(function(){"use strict";var e={620:function(e,t,i){var r=i(242),n=i(396),s=i(870),a=i(482);class o{constructor(e){(0,a.Z)(this,"gl",void 0),this.gl=e}static init(e){const t=e.getContext("webgl2",{powerPreference:"high-performance"});if(null==t)throw new Error("Unable to initialize WebGL!");return new o(t)}newShader(e,t){const i=this.loadShader(this.gl.VERTEX_SHADER,e),r=this.loadShader(this.gl.FRAGMENT_SHADER,t),n=this.gl.createProgram();if(this.gl.attachShader(n,i),this.gl.attachShader(n,r),this.gl.linkProgram(n),!this.gl.getProgramParameter(n,this.gl.LINK_STATUS))throw new Error(`Couldn't link shaders! Logs:\n${this.gl.getProgramInfoLog(n)}`);return n}newTexture(e,t){const i=this.gl.createTexture();return this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,t,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),i}newArrayBuffer(e){const t=this.gl.createBuffer();if(null==t)throw new Error("Could not create buffer");return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW),t}loadShader(e,t){const i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))throw new Error(`Couldn't compile shaders! Logs:\n\n${this.gl.getShaderInfoLog(i)}`);return i}}var l=i(358),c=i(376),u="#version 300 es\n\nin vec4 vertexPosition;\nin vec2 textureCoordinate;\nout vec2 texel;\n\nvoid main() {\n    gl_Position = vertexPosition;\n    texel = textureCoordinate;\n}",h="#version 300 es\n\nprecision highp float;\n\nconst float CHECKER_SIZE = 25.0;\n\nuniform mat4 viewMatrix;\nuniform float time;\nuniform vec2 areaSize;\n\nout vec4 color;\n\nvoid main() {\n    vec4 fragment = viewMatrix * gl_FragCoord;\n    float x = fragment.x;\n    float y = fragment.y;\n\n    float value = mod(floor(x/CHECKER_SIZE) + floor(y/CHECKER_SIZE), 2.0) == 0.0 ? 0.4 : 0.2;\n    color = vec4(value, value, value, 1);\n\n    // x = 100\n    if (abs(x - 100.0) < 10.0 && abs(y) < 10.0)\n        color = mix(color, vec4(0, 1, 0, 1), 0.5);\n\n    // y = 100\n    if (abs(x) < 10.0 && abs(y - 100.0) < 10.0)\n        color = mix(color, vec4(1, 0, 0, 1), 0.5);\n\n    if (abs(x) < 10.0 && abs(y) < 10.0)\n        color = mix(color, vec4(0, 0, 0, 1), 0.5);\n\n    if (x < 0.0 || y < 0.0 || x >= areaSize.x || y >= areaSize.y)\n        color = mix(color, vec4(0, 0, 0, 1), 0.8);\n}",d="#version 300 es\n\nprecision highp float;\n\nconst float CELL_BORDER_WIDTH = 2.0;\n\nstruct Cell {\n    int id;\n    vec2 center;\n    vec2 speed;\n    float mass;\n    float angle;\n    float radius;\n};\n\nuniform sampler2D image;\nuniform vec2 imageSize;\nuniform mat4 viewMatrix;\nuniform float time;\n\nuniform Cell cell;\n\nin vec2 texel;\nout vec4 color;\n\nvec4 previousLayerColor(float x, float y) {\n    vec2 imagePixelSize = vec2(1.0, 1.0) / imageSize;\n    return texture(image, vec2(texel.x + x * imagePixelSize.x, texel.y + y * imagePixelSize.y));\n}\n\nvoid main() {\n    vec4 fragment = viewMatrix * gl_FragCoord;\n    float x = fragment.x;\n    float y = fragment.y;\n\n    vec2 imagePixelSize = vec2(1.0, 1.0) / imageSize;\n\n    vec4 background = texture(image, texel);\n    vec4 layerColor = vec4(0);\n\n    vec4 bodyColor = vec4(1, 1, 1, 0.8);\n    vec4 borderColor = mix(bodyColor, vec4(0, 0, 0, 1), 0.25);\n    float centerDistance = sqrt(pow(x - cell.center.x, 2.0) + pow(y - cell.center.y, 2.0));\n\n    if (centerDistance < cell.radius){\n        layerColor = bodyColor;\n        if (centerDistance > cell.radius - CELL_BORDER_WIDTH)\n            layerColor = borderColor;\n    }\n\n    color = mix(background, vec4(layerColor.rgb, 1), layerColor.a);\n}";const{sqrt:f,pow:g,sin:m,cos:v,acos:w,PI:p}=Math;class x{constructor(e=0,t=0){(0,a.Z)(this,"x",void 0),(0,a.Z)(this,"y",void 0),this.x=e,this.y=t}get length(){return f(g(this.x,2)+g(this.y,2))}plus(e){return new x(this.x+e.x,this.y+e.y)}minus(e){return new x(this.x-e.x,this.y-e.y)}times(e){return new x(this.x*e.y,this.y*e.y)}div(e){return new x(this.x/e.y,this.x/e.y)}get negative(){return new x(-this.x,-this.y)}dot(e){return this.x*e.x+this.y+e.y}to(e){return e.minus(this)}nearest(...e){return e.reduce(((e,t)=>this.distance(e)>this.distance(t)?t:e))}shortestAngularTurn(e){const t=e.angle-this.angle;return t<-p||t>=0&&t<p?1:-1}positiveAngleDiff(e){return(this.angle-e.angle+2*p)%(2*p)}get angle(){return this.y>0?2*p-w(this.x/this.length):w(this.x/this.length)}get angleSafe(){return 0!=this.length?this.angle:0}distance(e){return f(g(this.x-e.x,2)+g(this.y-e.y,2))}rotate(e){return new x(this.x*v(e)-this.y*m(e),this.x*m(e)+this.y*v(e))}get unit(){return 0!=this.length?new x(this.x/this.length,this.y/this.length):new x}static isNaN(e){return isNaN(e.x)||isNaN(e.y)}static unit(e){return new x(v(e),m(e))}static equals(e,t){return null==e&&null==t||null!=e&&null!=t&&(e.x==t.x&&e.y==t.y)}}class T{constructor(e,t,i,r){(0,a.Z)(this,"shaderManager",void 0),(0,a.Z)(this,"backgroundShader",void 0),(0,a.Z)(this,"cellShader",void 0),(0,a.Z)(this,"worldState",void 0),(0,a.Z)(this,"startTime",Date.now()),(0,a.Z)(this,"mainMesh",void 0),(0,a.Z)(this,"drawBufferTextureUv",void 0),(0,a.Z)(this,"framebuffer",void 0),(0,a.Z)(this,"bufferTextureSize",new x),(0,a.Z)(this,"sourceBufferTexture",null),(0,a.Z)(this,"targetBufferTexture",null),this.shaderManager=e,this.backgroundShader=t,this.cellShader=i,this.worldState=r,this.mainMesh=this.createMainMesh(),this.drawBufferTextureUv=this.createDrawBufferTextureUv(),this.framebuffer=e.gl.createFramebuffer(),this.autoUpdateDrawBufferTexture()}static init(e,t){const i=o.init(e),r=i.newShader(u,h),n=i.newShader(u,d);return new T(i,r,n,t)}render(){const e=this.shaderManager.gl;e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this.renderBackground(),this.renderCells()}project(e){const t=this.buildCameraTransform(),i=l.U_(t,t);return c.fF(c.Ue(),e,i)}unproject(e){return c.fF(c.Ue(),e,this.buildCameraTransform())}renderCells(){const e=this.shaderManager.gl;e.useProgram(this.cellShader);const t=e.getAttribLocation(this.cellShader,"vertexPosition");e.bindBuffer(e.ARRAY_BUFFER,this.mainMesh),e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t);const i=this.buildViewTransform();e.uniformMatrix4fv(e.getUniformLocation(this.cellShader,"viewMatrix"),!1,i),e.uniform1f(e.getUniformLocation(this.cellShader,"time"),(Date.now()-this.startTime)/1e3),e.uniform2f(e.getUniformLocation(this.cellShader,"imageSize"),this.bufferTextureSize.x,this.bufferTextureSize.y);for(const[r,n]of this.worldState.cells)e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.bindTexture(e.TEXTURE_2D,this.sourceBufferTexture),e.uniform1i(e.getUniformLocation(this.cellShader,"image"),0),e.uniform1i(e.getUniformLocation(this.cellShader,"cell.id"),n.id),e.uniform2f(e.getUniformLocation(this.cellShader,"cell.center"),n.center.x,n.center.y),e.uniform2f(e.getUniformLocation(this.cellShader,"cell.speed"),n.speed.x,n.speed.y),e.uniform1f(e.getUniformLocation(this.cellShader,"cell.mass"),n.mass),e.uniform1f(e.getUniformLocation(this.cellShader,"cell.angle"),n.angle),e.uniform1f(e.getUniformLocation(this.cellShader,"cell.radius"),n.radius),r==this.worldState.cells.size-1?this.setDrawToCanvas():this.setDrawToBufferTexture(),e.drawArrays(e.TRIANGLE_STRIP,0,4),this.swapBuffers()}renderBackground(){const e=this.shaderManager.gl;e.useProgram(this.backgroundShader);const t=e.getAttribLocation(this.backgroundShader,"vertexPosition");e.bindBuffer(e.ARRAY_BUFFER,this.mainMesh),e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t);const i=e.getAttribLocation(this.backgroundShader,"textureCoordinate");e.enableVertexAttribArray(i),e.bindBuffer(e.ARRAY_BUFFER,this.drawBufferTextureUv),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0);const r=this.buildViewTransform();e.uniformMatrix4fv(e.getUniformLocation(this.backgroundShader,"viewMatrix"),!1,r),e.uniform1f(e.getUniformLocation(this.backgroundShader,"time"),(Date.now()-this.startTime)/1e3),e.uniform2f(e.getUniformLocation(this.backgroundShader,"areaSize"),this.worldState.width,this.worldState.height),this.setDrawToBufferTexture(),e.drawArrays(e.TRIANGLE_STRIP,0,4),this.swapBuffers()}buildCameraTransform(){const e=this.shaderManager.gl.canvas.width,t=this.shaderManager.gl.canvas.height,i=l.Ue(),r=this.worldState.camera,n=r.height/t;return l.bA(i,i,[n,n,1]),l.Iu(i,i,[r.center.x/n-e/2,r.center.y/n-t/2,0]),i}buildViewTransform(){const e=this.shaderManager.gl.canvas.height,t=this.buildCameraTransform();return l.bA(t,t,[1,-1,1]),l.Iu(t,t,[0,-e,0]),t}autoUpdateDrawBufferTexture(){if(this.drawBufferTextureNeedsUpdate()){const e=this.shaderManager.gl;e.deleteTexture(this.sourceBufferTexture),e.deleteTexture(this.targetBufferTexture);const t=this.shaderManager.gl.drawingBufferWidth,i=this.shaderManager.gl.drawingBufferHeight;this.sourceBufferTexture=this.shaderManager.newTexture(t,i),this.targetBufferTexture=this.shaderManager.newTexture(t,i),this.bufferTextureSize=new x(t,i)}}drawBufferTextureNeedsUpdate(){return this.bufferTextureSize.x!=this.shaderManager.gl.drawingBufferWidth||this.bufferTextureSize.y!=this.shaderManager.gl.drawingBufferHeight}setDrawToBufferTexture(){this.autoUpdateDrawBufferTexture();const e=this.shaderManager.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.targetBufferTexture,0)}setDrawToCanvas(){this.shaderManager.gl.bindFramebuffer(this.shaderManager.gl.FRAMEBUFFER,null)}swapBuffers(){const e=this.sourceBufferTexture;this.sourceBufferTexture=this.targetBufferTexture,this.targetBufferTexture=e}createDrawBufferTextureUv(){return this.shaderManager.newArrayBuffer([1,1,0,1,1,0,0,0])}createMainMesh(){return this.shaderManager.newArrayBuffer([1,1,-1,1,1,-1,-1,-1])}}class b{constructor(e,t,i,r,n){}}const y=["onWheel"];var _=(0,n.aZ)({__name:"WorldViewer",setup(e,{emit:t}){const i=.005,a=(0,s.iH)(),o=(0,s.iH)();let l,c,u,h=(0,n.f3)("worldState");const d={dragMode:!1,lastMouseWorldPoint:[0,0]};function f(){l=a.value,c=o.value,u=T.init(l,h.value),new ResizeObserver(w).observe(c),v()}function g(e){const t=h.value.camera;e.deltaY>0?t.height*=1+e.deltaY*i:t.height*=1/(1-e.deltaY*i),t.height<1&&(t.height=1)}function m(e){const i=window.devicePixelRatio,[r,n]=[e.x*i,e.y*i];let[s,a]=u.unproject([r,n]);if("mousedown"===e.type&&(d.dragMode=!0,d.lastMouseWorldPoint=[s,a]),"mousemove"===e.type&&d.dragMode){const[e,t]=d.lastMouseWorldPoint;h.value.camera.center.x+=e-s,h.value.camera.center.y+=t-a,[s,a]=u.unproject([r,n]),d.lastMouseWorldPoint=[s,a]}"mouseup"!==e.type&&"mouseleave"!==e.type||(d.dragMode=!1),t(`world-${e.type}`,new b(`world-${e.type}`,r,n,s,a))}function v(){u.render(),window.requestAnimationFrame(v)}function w(){const e=window.devicePixelRatio,{width:t,height:i}=c.getBoundingClientRect();l.width=Math.round(t*e),l.height=Math.round(i*e),u.render()}return(0,n.bv)(f),(e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"viewer-wr",ref_key:"containerRef",ref:o},[(0,n._)("canvas",{class:"canvas",ref_key:"canvasRef",ref:a,onClick:m,onMousedown:m,onMouseup:m,onMousemove:m,onMouseleave:m,onWheel:(0,r.iM)(g,["prevent"])},null,40,y)],512))}});const E=_;var S=E,R=i(139);const Z={class:"tabbed-panel-wr"},A={class:"tabs"},M={class:"body"};var U=(0,n.aZ)({__name:"PropertiesTabbedPanel",setup(e){const t=(0,s.iH)(null),i=320;let r=0;const a=(0,s.iH)(300),o=(0,s.iH)(a.value);function l(e){r=e.clientX,c()}function c(){window.addEventListener("mousemove",u),window.addEventListener("mouseleave",h),window.addEventListener("mouseup",h)}function u(e){if(0===e.screenX)return;let t=r-e.clientX;o.value=a.value+t,o.value<i&&(o.value=i)}function h(){a.value=o.value,window.removeEventListener("mousemove",u),window.removeEventListener("mouseleave",h),window.removeEventListener("mouseup",h)}return(0,n.JJ)("activeTabName",t),(e,t)=>((0,n.wg)(),(0,n.iD)("div",Z,[(0,n._)("div",{class:"tabbed-panel",draggable:"false",style:(0,R.j5)({width:`${o.value}px`,minWidth:`${i}px`})},[(0,n._)("div",A,[(0,n.WI)(e.$slots,"tabs")]),(0,n._)("div",M,[(0,n.WI)(e.$slots,"bodies"),(0,n._)("div",{class:"resize-handle",onMousedown:l},null,32)])],4)]))}}),C=i(89);const P=(0,C.Z)(U,[["__scopeId","data-v-98703540"]]);var B=P,L=(0,n.aZ)({__name:"PropertiesTab",props:["name"],setup(e){const t=e,i=(0,n.f3)("activeTabName");function r(){i.value==t.name?i.value=null:i.value=t.name}return(t,a)=>((0,n.wg)(),(0,n.iD)("button",{class:(0,R.C_)(["button",{active:(0,s.SU)(i)===e.name}]),onClick:r},[(0,n.WI)(t.$slots,"default")],2))}});const D=(0,C.Z)(L,[["__scopeId","data-v-a7a5af26"]]);var F=D,I=(0,n.aZ)({__name:"ToolButton",props:["active"],setup(e){return(t,i)=>((0,n.wg)(),(0,n.iD)("button",{class:(0,R.C_)(["button",{active:e.active}])},[(0,n.WI)(t.$slots,"default")],2))}});const k=(0,C.Z)(I,[["__scopeId","data-v-9870f248"]]);var W=k;const O={key:0,class:"body-wr"};var H=(0,n.aZ)({__name:"PropertiesTabBody",props:["name"],setup(e){const t=e,i=(0,n.f3)("activeTabName",(0,s.iH)(null));return(e,r)=>(0,s.SU)(i)===t.name?((0,n.wg)(),(0,n.iD)("div",O,[(0,n.WI)(e.$slots,"default")])):(0,n.kq)("",!0)}});const N=H;var V=N;const z={class:"section-wr"},Y={key:0,class:"section-title"},G={class:"section-content"};var X=(0,n.aZ)({__name:"PropertiesSection",props:["title"],setup(e){const t=e;return(e,i)=>((0,n.wg)(),(0,n.iD)("div",z,[t.title?((0,n.wg)(),(0,n.iD)("div",Y,(0,R.zw)(t.title),1)):(0,n.kq)("",!0),(0,n._)("div",G,[(0,n.WI)(e.$slots,"default")])]))}});const j=(0,C.Z)(X,[["__scopeId","data-v-3ab760ea"]]);var K=j;const $={class:"slider-container"},J=["min","max","step"];var q=(0,n.aZ)({__name:"Slider",props:["min","max","step","modelValue"],emits:["update:modelValue"],setup(e,{emit:t}){const i=e,a=(0,s.iH)(0);return(0,n.YP)(i,(()=>{a.value=i.modelValue})),(0,n.YP)(a,(()=>{t("update:modelValue",a.value)})),(t,i)=>((0,n.wg)(),(0,n.iD)("div",$,[(0,n.wy)((0,n._)("input",{class:"slider-input",type:"range",min:e.min,max:e.max,step:e.step,"onUpdate:modelValue":i[0]||(i[0]=e=>a.value=e)},null,8,J),[[r.nr,a.value]])]))}});const Q=(0,C.Z)(q,[["__scopeId","data-v-94fe77ba"]]);var ee=Q;const te={class:"slider-with-number-input-wr"},ie={key:0,class:"label"},re={class:"slider-with-number-input"};var ne=(0,n.aZ)({__name:"SliderWithNumberInput",props:["min","max","step","modelValue","label"],emits:["update:modelValue"],setup(e,{emit:t}){const i=e,a=(0,s.iH)(),o=(0,s.iH)(0);return(0,n.YP)(i,(()=>{o.value=i.modelValue})),(0,n.YP)(o,(()=>{t("update:modelValue",o.value)})),(t,i)=>((0,n.wg)(),(0,n.iD)("div",te,[e.label?((0,n.wg)(),(0,n.iD)("div",ie,(0,R.zw)(e.label),1)):(0,n.kq)("",!0),(0,n._)("div",re,[(0,n.Wm)(ee,{class:"slider",min:e.min,max:e.max,step:e.step,modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=e=>o.value=e)},null,8,["min","max","step","modelValue"]),(0,n.wy)((0,n._)("input",{class:"text-input",type:"text","onUpdate:modelValue":i[1]||(i[1]=e=>o.value=e),ref_key:"textInput",ref:a,onFocus:i[2]||(i[2]=e=>a.value.select()),onKeydown:[i[3]||(i[3]=(0,r.D2)((e=>a.value.blur()),["enter"])),i[4]||(i[4]=(0,r.D2)((e=>a.value.blur()),["esc"]))]},null,544),[[r.nr,o.value]])])]))}});const se=(0,C.Z)(ne,[["__scopeId","data-v-343a09b9"]]);var ae=se,oe=(0,n.aZ)({__name:"WorldSettingsTabBody",props:["name"],setup(e){const t=e,i=(0,n.f3)("worldState"),r=(0,s.qj)({viscosity:0});return(0,n.YP)(r,(()=>{i.value.viscosity=r.viscosity})),(e,i)=>((0,n.wg)(),(0,n.j4)(V,{name:t.name},{default:(0,n.w5)((()=>[(0,n.Wm)(K,{title:"World settings"},{default:(0,n.w5)((()=>[(0,n.Wm)(ae,{class:"slider-input",label:"Viscosity",min:"0",max:"2",step:"0.001",modelValue:r.viscosity,"onUpdate:modelValue":i[0]||(i[0]=e=>r.viscosity=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["name"]))}});const le=(0,C.Z)(oe,[["__scopeId","data-v-543a8686"]]);var ce=le,ue=(0,n.aZ)({__name:"GenomeEditorTabBody",props:["name"],setup(e){return(t,i)=>((0,n.wg)(),(0,n.j4)(V,{name:e.name},{default:(0,n.w5)((()=>[(0,n.Wm)(K,null,{default:(0,n.w5)((()=>[(0,n.Uk)(" GENOME EDITOR ")])),_:1})])),_:1},8,["name"]))}});const he=ue;var de=he;const fe=e=>((0,n.dD)("data-v-77428572"),e=e(),(0,n.Cn)(),e),ge={class:"controls-panel"},me=fe((()=>(0,n._)("img",{class:"properties-tab-icon",src:"/icons/settings.svg",alt:"icon"},null,-1))),ve={class:"tool-buttons-container"};var we=(0,n.aZ)({__name:"ControlsPanel",setup(e){const t=(0,n.f3)("toolsManager");return(e,i)=>((0,n.wg)(),(0,n.iD)("div",ge,[(0,n.Wm)(B,{class:"properties-container"},{tabs:(0,n.w5)((()=>[(0,n.Wm)(F,{class:"properties-tab",name:"genome-editor"}),(0,n.Wm)(F,{class:"properties-tab",name:"settings"},{default:(0,n.w5)((()=>[me])),_:1})])),bodies:(0,n.w5)((()=>[(0,n.Wm)(de,{name:"genome-editor"}),(0,n.Wm)(ce,{name:"settings"})])),_:1}),(0,n._)("div",ve,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,s.SU)(t).tools,(e=>((0,n.wg)(),(0,n.j4)(W,{class:"tool-button",key:e.id,active:(0,s.SU)(t).currentTool===e,onClick:i=>(0,s.SU)(t).currentTool=e},null,8,["active","onClick"])))),128))])]))}});const pe=(0,C.Z)(we,[["__scopeId","data-v-77428572"]]);var xe,Te=pe;class be{constructor(){(0,a.Z)(this,"entries",new Set)}search(e){const t=new Set;return this.entries.forEach((i=>{i.name.toLowerCase().includes(e.toLowerCase())&&t.add(i)})),t}}class ye{constructor(e,t,i,r,n,s){(0,a.Z)(this,"center",void 0),(0,a.Z)(this,"speed",void 0),(0,a.Z)(this,"mass",void 0),(0,a.Z)(this,"angle",void 0),(0,a.Z)(this,"angularSpeed",void 0),(0,a.Z)(this,"genome",void 0),(0,a.Z)(this,"id",-1),(0,a.Z)(this,"connections",new Map),(0,a.Z)(this,"age",0),this.center=e,this.speed=t,this.mass=i,this.angle=r,this.angularSpeed=n,this.genome=s}get radius(){return Math.sqrt(this.mass)}}(function(e){e[e["PHAGOCYTE"]=0]="PHAGOCYTE",e[e["FLAGELLOCYTE"]=1]="FLAGELLOCYTE"})(xe||(xe={}));var _e=xe;class Ee{constructor(){(0,a.Z)(this,"type",_e.FLAGELLOCYTE),(0,a.Z)(this,"cyanPigment",0),(0,a.Z)(this,"magentaPigment",0),(0,a.Z)(this,"yellowPigment",0),(0,a.Z)(this,"hardness",.6),(0,a.Z)(this,"splitMass",350),(0,a.Z)(this,"splitAngle",0),(0,a.Z)(this,"child1Angle",0),(0,a.Z)(this,"child2Angle",0),(0,a.Z)(this,"stickOnSplit",!1),(0,a.Z)(this,"child1KeepConnections",!0),(0,a.Z)(this,"child2KeepConnections",!0),(0,a.Z)(this,"nutritionPriority",.5),(0,a.Z)(this,"flagellumForce",8),(0,a.Z)(this,"children",[this,this]),(0,a.Z)(this,"deepCopy",this.copyRecursive)}applyRadiation(){}copyRecursive(e=(new Map).set(null,null)){const t=new Ee;return t.type=this.type,t.cyanPigment=this.cyanPigment,t.magentaPigment=this.magentaPigment,t.yellowPigment=this.yellowPigment,t.hardness=this.hardness,t.splitMass=this.splitMass,t.splitAngle=this.splitAngle,t.child1Angle=this.child1Angle,t.child2Angle=this.child2Angle,t.stickOnSplit=this.stickOnSplit,t.child1KeepConnections=this.child1KeepConnections,t.child2KeepConnections=this.child2KeepConnections,t.nutritionPriority=this.nutritionPriority,t.flagellumForce=this.flagellumForce,e.set(this,t),t.children=[e.has(this.children[0])?e.get(this.children[0]):this.children[0].copyRecursive(e),e.has(this.children[1])?e.get(this.children[1]):this.children[1].copyRecursive(e)],t}findAllGenomes(){const e=new Array,t=new Set;while(0!=e.length)e.pop().children.forEach((i=>{t.has(i)||(e.push(i),t.add(i))}));return t}applyRadiationRecursive(){}}class Se{constructor(e,t){(0,a.Z)(this,"center",void 0),(0,a.Z)(this,"height",void 0),this.center=e,this.height=t}}(0,a.Z)(Se,"NULL",new Se(new x,0));class Re{constructor(e,t,i,r,n,s=Se.NULL){(0,a.Z)(this,"width",void 0),(0,a.Z)(this,"height",void 0),(0,a.Z)(this,"gravity",void 0),(0,a.Z)(this,"viscosity",void 0),(0,a.Z)(this,"radiation",void 0),(0,a.Z)(this,"camera",void 0),(0,a.Z)(this,"food",new Map),(0,a.Z)(this,"cells",new Map),(0,a.Z)(this,"walls",new Map),this.width=e,this.height=t,this.gravity=i,this.viscosity=r,this.radiation=n,this.camera=s}}(0,a.Z)(Re,"NULL",new Re(0,0,new x,0,0)),(0,a.Z)(Re,"TEMPORARY_DEBUG",(()=>{const e=new Re(800,600,new x,0,0,new Se(new x(0,0),800)),t=new Ee;return e.cells.set(0,new ye(new x(50,50),new x,400,0,0,t)),e.cells.set(1,new ye(new x(200,120),new x,400,0,0,t)),e})());class Ze{}class Ae{constructor(e,t){(0,a.Z)(this,"tools",void 0),(0,a.Z)(this,"world",void 0),(0,a.Z)(this,"currentTool",void 0),this.tools=e,this.world=t,e.forEach((e=>e.init(this))),this.currentTool=e[0]}dispatchEvent(e){}}class Me{constructor(){(0,a.Z)(this,"toolsManager",null)}init(e){this.toolsManager=e}onSelect(){}onUnselect(){}}class Ue{init(e){}onSelect(){}onUnselect(){}}var Ce=(0,n.aZ)({__name:"App",setup(e){const t=[new Me,new Ue],i=Re.TEMPORARY_DEBUG;return(0,n.JJ)("worldState",(0,s.iH)(i)),(0,n.JJ)("genomeLibrary",(0,s.iH)(new be)),(0,n.JJ)("appPreferences",(0,s.iH)(new Ze)),(0,n.JJ)("toolsManager",(0,s.iH)(new Ae(t,i))),(e,t)=>((0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(S,{class:"area-viewer"}),(0,n.Wm)(Te,{class:"controls-panel"})],64))}});const Pe=Ce;var Be=Pe;(0,r.ri)(Be).mount("#app")}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}i.m=e,function(){var e=[];i.O=function(t,r,n,s){if(!r){var a=1/0;for(u=0;u<e.length;u++){r=e[u][0],n=e[u][1],s=e[u][2];for(var o=!0,l=0;l<r.length;l++)(!1&s||a>=s)&&Object.keys(i.O).every((function(e){return i.O[e](r[l])}))?r.splice(l--,1):(o=!1,s<a&&(a=s));if(o){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[r,n,s]}}(),function(){i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,a=r[0],o=r[1],l=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var u=l(i)}for(t&&t(r);c<a.length;c++)s=a[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(u)},r=self["webpackChunkcybercells"]=self["webpackChunkcybercells"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=i.O(void 0,[998],(function(){return i(620)}));r=i.O(r)})();
//# sourceMappingURL=app.71e72f3b.js.map