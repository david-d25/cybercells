{"version":3,"file":"js/app.9fe9b496.js","mappings":"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","sources":["webpack://cybercells/./src/gl/ShaderManager.ts","webpack://cybercells/./src/shaders/common.vert","webpack://cybercells/./src/shaders/background.frag","webpack://cybercells/./src/shaders/cell.frag","webpack://cybercells/./src/shaders/wall.frag","webpack://cybercells/./src/shaders/empty.frag","webpack://cybercells/./src/geom/Vector2.ts","webpack://cybercells/./src/render/WorldRenderer.ts","webpack://cybercells/./src/game/event/WorldMouseEvent.ts","webpack://cybercells/./src/component/WorldViewer.vue?b6c6","webpack://cybercells/./src/component/WorldViewer.vue","webpack://cybercells/./src/component/properties/PropertiesTabbedPanel.vue?3591","webpack://cybercells/./src/component/properties/PropertiesTabbedPanel.vue","webpack://cybercells/./src/component/HudButton.vue?c952","webpack://cybercells/./src/component/HudButton.vue","webpack://cybercells/./src/component/properties/PropertiesTab.vue?d676","webpack://cybercells/./src/component/properties/PropertiesTab.vue","webpack://cybercells/./src/component/properties/PropertiesTabBody.vue?2f09","webpack://cybercells/./src/component/properties/PropertiesTabBody.vue","webpack://cybercells/./src/component/properties/PropertiesSection.vue?1a5d","webpack://cybercells/./src/component/properties/PropertiesSection.vue","webpack://cybercells/./src/component/input/NumberSlider.vue?bb1e","webpack://cybercells/./src/component/input/NumberSlider.vue","webpack://cybercells/./src/component/input/SliderWithNumberInput.vue?7062","webpack://cybercells/./src/component/input/SliderWithNumberInput.vue","webpack://cybercells/./src/component/input/InputLabel.vue","webpack://cybercells/./src/component/input/InputLabel.vue?e8ad","webpack://cybercells/./src/component/WorldSettings.vue?daf4","webpack://cybercells/./src/component/WorldSettings.vue","webpack://cybercells/./src/game/world/object/Food.ts","webpack://cybercells/./src/game/world/object/Cell.ts","webpack://cybercells/./src/game/world/object/Wall.ts","webpack://cybercells/./src/game/CellType.ts","webpack://cybercells/./src/game/Genome.ts","webpack://cybercells/./src/game/Camera.ts","webpack://cybercells/./src/game/world/World.ts","webpack://cybercells/./src/component/genome/CellGenomePreview.vue?bc20","webpack://cybercells/./src/component/genome/CellGenomePreview.vue","webpack://cybercells/./src/component/genome/GenomeSelector.vue?f571","webpack://cybercells/./src/component/genome/GenomeSelector.vue","webpack://cybercells/./src/component/properties/PropertiesSubheader.vue","webpack://cybercells/./src/component/properties/PropertiesSubheader.vue?130a","webpack://cybercells/./src/component/genome/GenomePigmentColorDropletIcon.vue?210e","webpack://cybercells/./src/component/genome/GenomePigmentColorDropletIcon.vue","webpack://cybercells/./src/component/genome/GenomePigmentsEditor.vue?681e","webpack://cybercells/./src/component/genome/GenomePigmentsEditor.vue","webpack://cybercells/./src/component/genome/GenomeEditor.vue?1405","webpack://cybercells/./src/component/genome/GenomeEditor.vue","webpack://cybercells/./src/component/genome/GenomeLibraryEditor.vue?f406","webpack://cybercells/./src/component/genome/GenomeLibraryEditor.vue","webpack://cybercells/./src/component/TimeControl.vue?2009","webpack://cybercells/./src/component/TimeControl.vue","webpack://cybercells/./src/component/HudPanel.vue?62d3","webpack://cybercells/./src/component/HudPanel.vue","webpack://cybercells/./src/game/GenomeLibrary.ts","webpack://cybercells/./src/AppPreferences.ts","webpack://cybercells/./src/tool/ToolsManager.ts","webpack://cybercells/./src/tool/AddCellTool.ts","webpack://cybercells/./src/tool/RemoveCellTool.ts","webpack://cybercells/./src/tool/SelectionTool.ts","webpack://cybercells/./src/game/world/updater/ResetContextUpdater.ts","webpack://cybercells/./src/game/world/updater/UpdateContext.ts","webpack://cybercells/./src/geom/Geometry.ts","webpack://cybercells/./src/game/world/updater/KineticsUpdater.ts","webpack://cybercells/./src/game/world/updater/ApplyContextUpdater.ts","webpack://cybercells/./src/game/world/updater/PositionUpdater.ts","webpack://cybercells/./src/game/world/updater/WorldUpdater.ts","webpack://cybercells/./src/App.vue?2a5e","webpack://cybercells/./src/App.vue","webpack://cybercells/./src/main.ts","webpack://cybercells/webpack/bootstrap","webpack://cybercells/webpack/runtime/chunk loaded","webpack://cybercells/webpack/runtime/compat get default export","webpack://cybercells/webpack/runtime/define property getters","webpack://cybercells/webpack/runtime/global","webpack://cybercells/webpack/runtime/hasOwnProperty shorthand","webpack://cybercells/webpack/runtime/publicPath","webpack://cybercells/webpack/runtime/jsonp chunk loading","webpack://cybercells/webpack/startup"],"sourcesContent":["export default class ShaderManager {\n    private constructor(\n        public readonly gl: WebGL2RenderingContext\n    ) {}\n\n    static init(canvas: HTMLCanvasElement): ShaderManager {\n        const gl = canvas.getContext('webgl2', {\n            powerPreference: 'high-performance'\n        })\n\n        if (gl == null)\n            throw new Error(\"Unable to initialize WebGL!\")\n\n        return new ShaderManager(gl)\n    }\n\n    newShader(vertexShaderSource: string, fragmentShaderSource: string): WebGLProgram {\n        const vertexShader = this.loadShader(this.gl.VERTEX_SHADER, vertexShaderSource)\n        const fragmentShader = this.loadShader(this.gl.FRAGMENT_SHADER, fragmentShaderSource)\n\n        const shaderProgram = this.gl.createProgram()!\n        this.gl.attachShader(shaderProgram, vertexShader)\n        this.gl.attachShader(shaderProgram, fragmentShader)\n        this.gl.linkProgram(shaderProgram)\n\n        if (!this.gl.getProgramParameter(shaderProgram, this.gl.LINK_STATUS)) {\n            throw new Error(`Couldn't link shaders! Logs:\\n${this.gl.getProgramInfoLog(shaderProgram)}`)\n        }\n\n        return shaderProgram\n    }\n\n    newTexture(width: number, height: number): WebGLTexture | null {\n        const texture = this.gl.createTexture();\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n        this.gl.texImage2D(\n            this.gl.TEXTURE_2D, 0, this.gl.RGBA, width, height,\n            0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null\n        );\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);\n        return texture\n    }\n\n    newArrayBuffer(data: number[]): WebGLBuffer {\n        const buffer = this.gl.createBuffer()\n        if (buffer == null)\n            throw new Error(\"Could not create buffer\")\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer)\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(data), this.gl.STATIC_DRAW)\n        return buffer\n    }\n\n    destroy() {\n        this.gl.getExtension(\"WEBGL_lose_context\")!.loseContext();\n    }\n\n    private loadShader(type: number, source: string): WebGLShader {\n        const shader = this.gl.createShader(type)!\n        this.gl.shaderSource(shader, source)\n        this.gl.compileShader(shader)\n\n        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n            throw new Error(`Couldn't compile shaders! Logs:\\n\\n${this.gl.getShaderInfoLog(shader)}`)\n        }\n\n        return shader\n    }\n}","export default \"#version 300 es\\n\\nin vec4 vertexPosition;\\nin vec2 textureCoordinate;\\nout vec2 texel;\\n\\nvoid main() {\\n    gl_Position = vertexPosition;\\n    texel = textureCoordinate;\\n}\";","export default \"#version 300 es\\n\\nprecision highp float;\\nprecision highp sampler2D;\\n\\nconst float CHECKER_SIZE = 25.0;\\nconst vec4 LIGHT_COLOR = vec4(0.88, 0.88, 1, 1);\\n\\nuniform mat4 viewMatrix;\\nuniform float time;\\nuniform vec2 areaSize;\\n\\nuniform float lightIntensity;\\n\\nout vec4 color;\\n\\nvec4 lightFunction(float x, float y) {\\n    return vec4(0, 0, 0, 0);\\n}\\n\\nvoid main() {\\n    vec4 fragment = viewMatrix * gl_FragCoord;\\n    float x = fragment.x;\\n    float y = fragment.y;\\n\\n    float value = mod(floor(x/CHECKER_SIZE) + floor(y/CHECKER_SIZE), 2.0) == 0.0 ? 0.4 : 0.2;\\n    color = vec4(value, value, value, 1);\\n//    color = vec4(0.4, 0.7, 0.9, 1);\\n    color = mix(color, lightFunction(x, y), lightIntensity);\\n\\n    if (x < 0.0 || y < 0.0 || x >= areaSize.x || y >= areaSize.y)\\n        color = mix(color, vec4(0, 0, 0, 1), 0.2);\\n}\";","export default \"#version 300 es\\n\\nprecision highp float;\\nprecision highp sampler2D;\\n\\nconst float CELL_BORDER_WIDTH = 2.0;\\n\\nstruct Cell {\\n    int id;\\n    vec2 center;\\n    vec2 speed;\\n    float mass;\\n    float angle;\\n    float radius;\\n    vec4 bodyRgba;\\n};\\n\\nuniform sampler2D image;\\nuniform vec2 imageSize;\\nuniform mat4 viewMatrix;\\nuniform float time;\\n\\nuniform Cell cell;\\n\\nin vec2 texel;\\nout vec4 color;\\n\\nvec4 previousLayerColor(float x, float y) {\\n    vec2 imagePixelSize = vec2(1.0, 1.0) / imageSize;\\n    return texture(image, vec2(texel.x + x * imagePixelSize.x, texel.y + y * imagePixelSize.y));\\n}\\n\\nvoid main() {\\n    vec4 fragment = viewMatrix * gl_FragCoord;\\n    float x = fragment.x;\\n    float y = fragment.y;\\n\\n    vec2 imagePixelSize = vec2(1.0, 1.0) / imageSize;\\n\\n    vec4 background = texture(image, texel);\\n    vec4 layerColor = vec4(0);\\n\\n    vec4 borderColor = mix(cell.bodyRgba, vec4(0, 0, 0, 1), 0.25);\\n    float centerDistance = sqrt(pow(x - cell.center.x, 2.0) + pow(y - cell.center.y, 2.0));\\n\\n    if (centerDistance < cell.radius){\\n        layerColor = cell.bodyRgba;\\n        if (centerDistance > cell.radius - CELL_BORDER_WIDTH)\\n            layerColor = borderColor;\\n    }\\n\\n    color = mix(background, vec4(layerColor.rgb, 1), layerColor.a);\\n}\";","export default \"#version 300 es\\n\\nprecision highp float;\\nprecision highp sampler2D;\\n\\nconst float WALL_THICKNESS = 2.0;\\n\\nstruct Wall {\\n    vec2 a;\\n    vec2 b;\\n};\\n\\nuniform sampler2D image;\\nuniform vec2 imageSize;\\nuniform mat4 viewMatrix;\\nuniform Wall wall;\\n\\nin vec2 texel;\\nout vec4 color;\\n\\nvec2 projectToWall(vec2 p) {\\n    vec2 a = wall.a;\\n    vec2 b = wall.b;\\n    if (a == b)\\n        return a;\\n    return (b - a) * dot(p - a, b - a) / dot(b - a, b - a) + a;\\n}\\n\\nvoid main() {\\n    vec4 fragment = viewMatrix * gl_FragCoord;\\n    float x = fragment.x;\\n    float y = fragment.y;\\n\\n    vec4 background = texture(image, texel);\\n    vec4 layerColor = vec4(0);\\n\\n    vec2 projected = projectToWall(fragment.xy);\\n    float fractionalDistance = length(projected - wall.a) / length(wall.b - wall.a) * sign(dot(wall.b - wall.a, projected - wall.a));\\n\\n    if (length(fragment.xy - projected) < WALL_THICKNESS/2.0\\n        && fractionalDistance >= 0.0 && fractionalDistance < 1.0\\n        || length(wall.a - fragment.xy) < WALL_THICKNESS/2.0\\n        || length(wall.b - fragment.xy) < WALL_THICKNESS/2.0)\\n        layerColor = vec4(0, 0, 0, 1);\\n\\n    color = mix(background, vec4(layerColor.rgb, 1), layerColor.a);\\n}\";","export default \"#version 300 es\\n\\nprecision highp float;\\nprecision highp sampler2D;\\n\\nuniform sampler2D image;\\n\\nin vec2 texel;\\nout vec4 color;\\n\\nvoid main() {\\n    color = texture(image, texel);\\n}\";","const { sqrt, pow, sin, cos, acos, PI } = Math\n\nexport default class Vector2 {\n    x: number\n    y: number\n\n    constructor(x: number = 0, y: number = 0) {\n        this.x = x\n        this.y = y\n    }\n\n    get length(): number {\n        return sqrt(pow(this.x, 2) + pow(this.y, 2))\n    }\n\n    plus(that: Vector2): Vector2 {\n        return new Vector2(this.x + that.x, this.y + that.y)\n    }\n\n    minus(that: Vector2): Vector2 {\n        return new Vector2(this.x - that.x, this.y - that.y)\n    }\n\n    times(factor: Vector2 | number): Vector2 {\n        if (factor instanceof Vector2)\n            return new Vector2(this.x * factor.y, this.y * factor.y);\n        else\n            return new Vector2(this.x * factor, this.y * factor);\n    }\n\n    div(factor: Vector2 | number): Vector2 {\n        if (factor instanceof Vector2)\n            return new Vector2(this.x / factor.y, this.x / factor.y);\n        else\n            return new Vector2(this.x / factor, this.y / factor);\n    }\n\n    get negative(): Vector2 {\n        return new Vector2(-this.x, -this.y)\n    }\n\n    dot(that: Vector2): number {\n        return this.x * that.x + this.y + that.y\n    }\n\n    to(that: Vector2): Vector2 {\n        return that.minus(this)\n    }\n\n    nearest(...vectors: Array<Vector2>): Vector2 {\n        return vectors.reduce((a, b) => this.distance(a) > this.distance(b) ? b : a)\n    }\n\n    /**\n     * This method calculates the shortest turn direction needed\n     * to get from this vector's angle to that vector's angle.\n     * \n     * @returns 1 if direction is counterclockwise, -1 otherwise\n     */\n    shortestAngularTurn(that: Vector2): number {\n        const diff = that.angle - this.angle\n        return (diff < -PI || diff >= 0.0 && diff < PI) ? 1 : -1\n    }\n\n    positiveAngleDiff(that: Vector2): number {\n        return (this.angle - that.angle + 2*PI) % (2*PI)\n    }\n\n    get angle(): number {\n        return this.y > 0 ? 2*PI - acos(this.x/this.length) : acos(this.x/this.length)\n    }\n\n    get angleSafe(): number {\n        return this.length != 0 ? this.angle : 0\n    }\n\n    distance(that: Vector2): number {\n        return sqrt(pow(this.x - that.x, 2) + pow(this.y - that.y, 2))\n    }\n\n    isNaN() {\n        return isNaN(this.x) || isNaN(this.y);\n    }\n\n    /**\n     * Returns a new vector rotated by given amount of radians.\n     * The positive argument is counterclockwise rotation.\n     */\n    rotate(radians: number): Vector2 {\n        return new Vector2(this.x * cos(radians) - this.y * sin(radians), this.x * sin(radians) + this.y * cos(radians))\n    }\n\n    get unit(): Vector2 {\n        return this.length != 0 ? new Vector2(this.x/this.length, this.y/this.length) : new Vector2()\n    }\n\n    static isNaN(vector: Vector2): boolean {\n        return isNaN(vector.x) || isNaN(vector.y)\n    }\n\n    static unit(radians: number): Vector2 {\n        return new Vector2(cos(radians), sin(radians))\n    }\n\n    static equals(a?: Vector2, b?: Vector2): boolean {\n        if (a == null && b == null)\n            return true\n        if (a == null || b == null)\n            return false\n        return a.x == b.x && a.y == b.y\n    }\n}","import ShaderManager from \"@/gl/ShaderManager\";\nimport { mat4, vec2 } from 'gl-matrix';\n\nimport World from \"@/game/world/World\";\n\nimport commonVertexShaderSource from 'raw-loader!@/shaders/common.vert';\nimport backgroundFragmentShaderSource from 'raw-loader!@/shaders/background.frag';\nimport cellFragmentShaderSource from 'raw-loader!@/shaders/cell.frag';\nimport wallFragmentShaderSource from 'raw-loader!@/shaders/wall.frag';\nimport emptyFragmentShaderSource from 'raw-loader!@/shaders/empty.frag';\nimport Vector2 from \"@/geom/Vector2\";\n\nexport default class WorldRenderer {\n    private readonly startTime = Date.now()\n\n    private readonly mainMesh: WebGLBuffer\n    private readonly drawBufferTextureUv: WebGLBuffer\n    private readonly framebuffer: WebGLFramebuffer | null\n\n    private bufferTextureSize: Vector2 = new Vector2()\n    private sourceBufferTexture: WebGLTexture | null = null\n    private targetBufferTexture: WebGLTexture | null = null\n\n    public config = {\n        layers: {\n            background: true,\n            walls: true,\n            cells: true\n        }\n    }\n\n    private constructor(\n        private shaderManager: ShaderManager,\n        private backgroundShader: WebGLShader,\n        private cellShader: WebGLShader,\n        private wallShader: WebGLShader,\n        private emptyShader: WebGLShader,\n        public worldState: World | null = null\n    ) {\n        this.mainMesh = this.createMainMesh();\n        this.drawBufferTextureUv = this.createDrawBufferTextureUv();\n        this.framebuffer = shaderManager.gl.createFramebuffer();\n        this.autoUpdateDrawBufferTexture();\n    }\n\n    static init(canvas: HTMLCanvasElement, worldState: World | null = null): WorldRenderer {\n        const shaderManager = ShaderManager.init(canvas);\n\n        const backgroundShader = shaderManager.newShader(commonVertexShaderSource, backgroundFragmentShaderSource);\n        const cellShader = shaderManager.newShader(commonVertexShaderSource, cellFragmentShaderSource);\n        const wallShader = shaderManager.newShader(commonVertexShaderSource, wallFragmentShaderSource);\n        const emptyShader = shaderManager.newShader(commonVertexShaderSource, emptyFragmentShaderSource);\n        return new WorldRenderer(shaderManager, backgroundShader, cellShader, wallShader, emptyShader, worldState);\n    }\n\n    render() {\n        const gl = this.shaderManager.gl;\n        gl.clearColor(0, 0, 0, 0);\n        gl.clearDepth(1);\n        gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);\n\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        if (this.config.layers.background)\n            this.renderBackground();\n        if (this.config.layers.cells)\n            this.renderCells();\n        if (this.config.layers.walls)\n            this.renderWalls();\n\n        this.renderBufferToCanvas();\n    }\n\n    /**\n     * From world coordinates to screen coordinates.\n     */\n    project(worldPoint: vec2): vec2 {\n        const projection = this.buildCameraTransform()\n        const inverted = mat4.invert(projection, projection)\n        return vec2.transformMat4(vec2.create(), worldPoint, inverted)\n    }\n\n    /**\n     * From screen coordinates to world coordinates.\n     */\n    unproject(screenPoint: vec2): vec2 {\n        return vec2.transformMat4(vec2.create(), screenPoint, this.buildCameraTransform())\n    }\n\n    destroy() {\n        this.shaderManager.destroy();\n    }\n\n    private renderBufferToCanvas() {\n        const gl = this.shaderManager.gl;\n        gl.useProgram(this.emptyShader);\n\n        this.setupVertexShader(this.emptyShader);\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.bindTexture(gl.TEXTURE_2D, this.sourceBufferTexture);\n        gl.uniform1i(gl.getUniformLocation(this.emptyShader, 'image'), 0);\n\n        this.setDrawToCanvas();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n    }\n\n    private renderWalls() {\n        const gl = this.shaderManager.gl\n        gl.useProgram(this.wallShader)\n\n        this.setupVertexShader(this.wallShader);\n\n        const viewMatrix = this.buildViewTransform()\n        gl.uniformMatrix4fv(gl.getUniformLocation(this.wallShader, 'viewMatrix'), false, viewMatrix)\n\n        gl.uniform2f(\n            gl.getUniformLocation(this.wallShader, 'imageSize'),\n            this.bufferTextureSize.x,\n            this.bufferTextureSize.y\n        );\n\n        for (const wall of this.worldState!.walls.values()) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n            gl.bindTexture(gl.TEXTURE_2D, this.sourceBufferTexture);\n            gl.uniform1i(gl.getUniformLocation(this.wallShader, 'image'), 0);\n\n            gl.uniform2f(gl.getUniformLocation(this.wallShader, 'wall.a'), wall.a.x, wall.a.y);\n            gl.uniform2f(gl.getUniformLocation(this.wallShader, 'wall.b'), wall.b.x, wall.b.y);\n\n            this.setDrawToBufferTexture();\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n            this.swapBuffers();\n        }\n    }\n\n    private renderCells() {\n        const gl = this.shaderManager.gl;\n        gl.useProgram(this.cellShader);\n\n        this.setupVertexShader(this.cellShader);\n\n        gl.uniform1f(gl.getUniformLocation(this.cellShader, 'time'), (Date.now() - this.startTime)/1000);\n        const viewMatrix = this.buildViewTransform();\n        gl.uniformMatrix4fv(gl.getUniformLocation(this.cellShader, 'viewMatrix'), false, viewMatrix);\n\n        gl.uniform2f(\n            gl.getUniformLocation(this.cellShader, 'imageSize'),\n            this.bufferTextureSize.x,\n            this.bufferTextureSize.y\n        );\n\n        for (const cell of this.worldState!.cells.values()) {\n            const cellRgba = WorldRenderer.cellPigmentsToRgba(\n                cell.genome.cyanPigment,\n                cell.genome.magentaPigment,\n                cell.genome.yellowPigment,\n                cell.genome.whitePigment\n            )\n\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer)\n            gl.bindTexture(gl.TEXTURE_2D, this.sourceBufferTexture)\n            gl.uniform1i(gl.getUniformLocation(this.cellShader, 'image'), 0)\n\n            gl.uniform1i(gl.getUniformLocation(this.cellShader, 'cell.id'), cell.id);\n            gl.uniform2f(gl.getUniformLocation(this.cellShader, 'cell.center'), cell.center.x, cell.center.y);\n            gl.uniform2f(gl.getUniformLocation(this.cellShader, 'cell.speed'), cell.speed.x, cell.speed.y);\n            gl.uniform1f(gl.getUniformLocation(this.cellShader, 'cell.mass'), cell.mass);\n            gl.uniform1f(gl.getUniformLocation(this.cellShader, 'cell.angle'), cell.angle);\n            gl.uniform1f(gl.getUniformLocation(this.cellShader, 'cell.radius'), cell.radius);\n            gl.uniform4f(gl.getUniformLocation(this.cellShader, 'cell.bodyRgba'), ...cellRgba);\n\n            this.setDrawToBufferTexture();\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n\n            this.swapBuffers()\n        }\n    }\n\n    private setupVertexShader(shader: WebGLShader) {\n        const gl = this.shaderManager.gl\n        const vertexAttributeLoc = gl.getAttribLocation(shader, 'vertexPosition')\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.mainMesh)\n        gl.vertexAttribPointer(vertexAttributeLoc, 2, gl.FLOAT, false, 0, 0)\n        gl.enableVertexAttribArray(vertexAttributeLoc)\n    }\n\n    private renderBackground() {\n        if (!this.worldState)\n            return\n\n        const gl = this.shaderManager.gl\n        gl.useProgram(this.backgroundShader)\n\n        const vertexAttributeLoc = gl.getAttribLocation(this.backgroundShader, 'vertexPosition')\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.mainMesh)\n        gl.vertexAttribPointer(vertexAttributeLoc, 2, gl.FLOAT, false, 0, 0)\n        gl.enableVertexAttribArray(vertexAttributeLoc)\n\n        const textureCoordinateLoc = gl.getAttribLocation(this.backgroundShader, 'textureCoordinate')\n        gl.enableVertexAttribArray(textureCoordinateLoc)\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.drawBufferTextureUv)\n        gl.vertexAttribPointer(textureCoordinateLoc, 2, gl.FLOAT, false, 0, 0)\n\n        const viewMatrix = this.buildViewTransform()\n        gl.uniformMatrix4fv(gl.getUniformLocation(this.backgroundShader, 'viewMatrix'), false, viewMatrix)\n        gl.uniform1f(gl.getUniformLocation(this.backgroundShader, 'time'), (Date.now() - this.startTime)/1000)\n        gl.uniform2f(gl.getUniformLocation(this.backgroundShader, 'areaSize'), this.worldState.width, this.worldState.height)\n        gl.uniform1f(gl.getUniformLocation(this.backgroundShader, 'lightIntensity'), this.worldState.lightIntensity)\n\n        this.setDrawToBufferTexture();\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\n\n        this.swapBuffers()\n    }\n\n    private buildCameraTransform(): mat4 {\n        if (!this.worldState)\n            throw new Error(\"Can't build camera transform: the world state is not set in renderer!\")\n\n        const canvasWidth = this.shaderManager.gl.canvas.width\n        const canvasHeight = this.shaderManager.gl.canvas.height\n\n        const result = mat4.create()\n        const camera = this.worldState.camera\n        const scale = camera.height/canvasHeight\n        mat4.scale(result, result, [scale, scale, 1])\n        mat4.translate(result, result, [camera.center.x/scale - canvasWidth/2, camera.center.y/scale - canvasHeight/2, 0])\n        return result\n    }\n\n    private buildViewTransform(): mat4 {\n        const canvasHeight = this.shaderManager.gl.canvas.height\n\n        const result = this.buildCameraTransform()\n        mat4.scale(result, result, [1, -1, 1])\n        mat4.translate(result, result, [0, -canvasHeight, 0])\n        return result\n    }\n\n    private autoUpdateDrawBufferTexture() {\n        if (this.drawBufferTextureNeedsUpdate()) {\n            const gl = this.shaderManager.gl\n\n            gl.deleteTexture(this.sourceBufferTexture)\n            gl.deleteTexture(this.targetBufferTexture)\n\n            const width = this.shaderManager.gl.drawingBufferWidth\n            const height = this.shaderManager.gl.drawingBufferHeight\n\n            this.sourceBufferTexture = this.shaderManager.newTexture(width, height)\n            this.targetBufferTexture = this.shaderManager.newTexture(width, height)\n\n            this.bufferTextureSize = new Vector2(width, height)\n        }\n    }\n\n    private drawBufferTextureNeedsUpdate(): boolean {\n        return  this.bufferTextureSize.x != this.shaderManager.gl.drawingBufferWidth ||\n                this.bufferTextureSize.y != this.shaderManager.gl.drawingBufferHeight\n    }\n\n    private setDrawToBufferTexture() {\n        this.autoUpdateDrawBufferTexture();\n        const gl = this.shaderManager.gl;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.targetBufferTexture, 0);\n    }\n\n    private setDrawToCanvas() {\n        const gl = this.shaderManager.gl;\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    }\n\n    private swapBuffers() {\n        const swap = this.sourceBufferTexture\n        this.sourceBufferTexture = this.targetBufferTexture\n        this.targetBufferTexture = swap\n    }\n\n    private createDrawBufferTextureUv() {\n        return this.shaderManager.newArrayBuffer([\n            1.0,  1.0,\n            0.0,  1.0,\n            1.0,  0.0,\n            0.0,  0.0,\n        ])\n    }\n\n    private createMainMesh(): WebGLBuffer {\n        return this.shaderManager.newArrayBuffer([\n            1.0, 1.0,\n            -1.0, 1.0,\n            1.0, -1.0,\n            -1.0, -1.0\n        ])\n    }\n\n    private static cellPigmentsToRgba(\n        cyan: number,\n        magenta: number,\n        yellow: number,\n        white: number\n    ): [number, number, number, number] {\n        const [r, g, b] = [1 - cyan, 1 - magenta, 1 - yellow]; // todo use white\n        const a = 1 - (1 - cyan) * (1 - magenta) * (1 - yellow) * (1 - white);\n        return [r, g, b, a];\n    }\n}\n","export default class WorldMouseEvent {\n    constructor(\n        public type: string,\n        public screenX: number,\n        public screenY: number,\n        public worldX: number,\n        public worldY: number\n    ) {}\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { withModifiers as _withModifiers, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"onTouchstart\", \"onTouchmove\", \"onTouchend\", \"onWheel\"]\n\nimport {ref, inject, onMounted, onBeforeUnmount} from 'vue';\nimport World from \"@/game/world/World\";\nimport WorldRenderer from \"@/render/WorldRenderer\";\nimport WorldMouseEvent from \"@/game/event/WorldMouseEvent\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'WorldViewer',\n  setup(__props, { emit }: { emit: ({(e: string, payload: WorldMouseEvent): void}), expose: any, slots: any, attrs: any }) {\n\nconst SCROLL_SENSITIVITY = 0.005\n\nconst canvasRef = ref<HTMLCanvasElement>()\nconst containerRef = ref<HTMLDivElement>()\n\n\n\nlet world: World = inject('world')!\nlet canvas: HTMLCanvasElement\nlet container: HTMLDivElement\nlet renderer: WorldRenderer\n\nconst dragging = {\n  dragMode: false,\n  lastMouseWorldPoint: [0, 0]\n}\n\nonMounted(init);\nonBeforeUnmount(() => {\n  renderer.destroy()\n});\n\nfunction init() {\n  canvas = canvasRef.value!\n  container = containerRef.value!\n  renderer = WorldRenderer.init(canvas, world)\n  new ResizeObserver(onCanvasResize).observe(container)\n  renderingRoutine();\n}\n\nfunction onWheel(event: WheelEvent) {\n  const camera = world.camera\n  if (event.deltaY > 0)\n    camera.height *= 1 + event.deltaY*SCROLL_SENSITIVITY\n  else\n    camera.height *= 1/(1 - event.deltaY*SCROLL_SENSITIVITY)\n  if (camera.height < 1)\n    camera.height = 1\n}\n\nfunction onTouchEvent(event: TouchEvent) {\n  if (event.touches.length == 1) {\n    let mouseEventType: string | undefined\n    switch (event.type) {\n      case 'touchstart': mouseEventType = 'mousedown'; break;\n      case 'touchmove': mouseEventType = 'mousemove'; break;\n      case 'touchend': mouseEventType = 'mouseup'; break;\n    }\n    if (mouseEventType) {\n      const { clientX: x, clientY: y } = event.touches[0]\n      const dps = window.devicePixelRatio\n      const [ screenX, screenY ] = [x * dps, y * dps]\n      let [ worldX, worldY ] = renderer.unproject([screenX, screenY])\n      const worldEvent = new WorldMouseEvent(`world-${mouseEventType}`, screenX, screenY, worldX, worldY)\n      handleDraggingEvent(worldEvent)\n      emit(worldEvent.type, worldEvent)\n    }\n  }\n}\n\nfunction onMouseEvent(event: MouseEvent) {\n  const dps = window.devicePixelRatio\n  const [ screenX, screenY ] = [event.x * dps, event.y * dps]\n  let [ worldX, worldY ] = renderer.unproject([screenX, screenY])\n\n  const worldEvent = new WorldMouseEvent(`world-${event.type}`, screenX, screenY, worldX, worldY)\n  handleDraggingEvent(worldEvent)\n  emit(worldEvent.type, worldEvent)\n}\n\nfunction handleDraggingEvent(event: WorldMouseEvent) {\n  if (event.type === 'world-mousedown') {\n    dragging.dragMode = true\n    dragging.lastMouseWorldPoint = [ event.worldX, event.worldY ]\n  }\n\n  if (event.type === 'world-mousemove' && dragging.dragMode) {\n    const [ prevX, prevY ] = dragging.lastMouseWorldPoint\n    world.camera.center.x += prevX - event.worldX\n    world.camera.center.y += prevY - event.worldY;\n    [ event.worldX, event.worldY ] = renderer.unproject([event.screenX, event.screenY])\n    dragging.lastMouseWorldPoint = [ event.worldX, event.worldY ]\n  }\n\n  if (event.type === 'world-mouseup' || event.type === 'world-mouseleave')\n    dragging.dragMode = false\n}\n\nfunction renderingRoutine() {\n  renderer.render()\n  window.requestAnimationFrame(renderingRoutine)\n}\n\nfunction onCanvasResize() {\n  const dpr = window.devicePixelRatio;\n  const { width, height } = container.getBoundingClientRect();\n  canvas.width = Math.round(width * dpr);\n  canvas.height = Math.round(height * dpr);\n  renderer.render()\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"c-world-viewer\",\n    ref_key: \"containerRef\",\n    ref: containerRef\n  }, [\n    _createElementVNode(\"canvas\", {\n      class: \"canvas\",\n      ref_key: \"canvasRef\",\n      ref: canvasRef,\n      onClick: onMouseEvent,\n      onMousedown: onMouseEvent,\n      onMouseup: onMouseEvent,\n      onMousemove: onMouseEvent,\n      onMouseleave: onMouseEvent,\n      onTouchstart: _withModifiers(onTouchEvent, [\"prevent\"]),\n      onTouchmove: _withModifiers(onTouchEvent, [\"prevent\"]),\n      onTouchend: _withModifiers(onTouchEvent, [\"prevent\"]),\n      onWheel: _withModifiers(onWheel, [\"prevent\"])\n    }, null, 40, _hoisted_1)\n  ], 512))\n}\n}\n\n})","import script from \"./WorldViewer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WorldViewer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WorldViewer.vue?vue&type=style&index=0&id=3c038b05&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-tabbed-panel\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = { class: \"body\" }\n\nimport { ref, provide } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesTabbedPanel',\n  setup(__props) {\n\nconst activeTabName = ref<string | null>(null)\nconst minWidth = 320\n\nlet dragStartX = 0\nconst oldWidth = ref(300)\nconst width = ref(oldWidth.value)\n\nprovide('activeTabName', activeTabName)\n\nfunction onHandleDragStart(event: DragEvent) {\n  dragStartX = event.clientX\n  initHandleDragging()\n}\n\nfunction initHandleDragging() {\n  window.addEventListener('mousemove', onHandleDrag);\n  window.addEventListener('mouseleave', stopHandleDragging);\n  window.addEventListener('mouseup', stopHandleDragging);\n}\n\nfunction onHandleDrag(event: MouseEvent) {\n  if (event.screenX === 0)\n    return\n  let offset = dragStartX - event.clientX\n  width.value = oldWidth.value + offset\n  if (width.value < minWidth)\n    width.value = minWidth\n}\n\nfunction stopHandleDragging() {\n  oldWidth.value = width.value\n  window.removeEventListener('mousemove', onHandleDrag);\n  window.removeEventListener('mouseleave', stopHandleDragging);\n  window.removeEventListener('mouseup', stopHandleDragging);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"tabbed-panel\",\n      draggable: \"false\",\n      style: _normalizeStyle({ width: `${width.value}px`, minWidth: `${minWidth}px` })\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _renderSlot(_ctx.$slots, \"tabs\")\n      ]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _renderSlot(_ctx.$slots, \"bodies\"),\n        _createElementVNode(\"div\", {\n          class: \"resize-handle\",\n          onMousedown: onHandleDragStart\n        }, null, 32)\n      ])\n    ], 4)\n  ]))\n}\n}\n\n})","import script from \"./PropertiesTabbedPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesTabbedPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PropertiesTabbedPanel.vue?vue&type=style&index=0&id=ca817e26&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useCssVars as _useCssVars, unref as _unref, defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"disabled\"]\n\nimport {computed} from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'HudButton',\n  props: {\n    active: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n    borderRadius: { default: \"4px\" },\n    borderWidth: { default: \"1px\" }\n  },\n  setup(__props: any) {\n\nconst props = __props as { active: boolean, disabled: boolean, borderRadius: string, borderWidth: string };\n\n_useCssVars(_ctx => ({\n  \"70e98800\": (_unref(defaultsSupportingBorderRadius)),\n  \"69d2b898\": (_unref(defaultsSupportingBorderWidth))\n}))\n\n\n\nlet defaultsSupportingBorderRadius = computed(() => props.borderRadius.replaceAll('default', \"4px\"))\nlet defaultsSupportingBorderWidth = computed(() => props.borderWidth.replaceAll('default', \"1px\"))\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"button\", {\n    class: _normalizeClass([\"c-button\", { active: __props.active }]),\n    disabled: __props.disabled\n  }, [\n    _renderSlot(_ctx.$slots, \"default\")\n  ], 10, _hoisted_1))\n}\n}\n\n})","import script from \"./HudButton.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HudButton.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HudButton.vue?vue&type=style&index=0&id=0ab01900&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderSlot as _renderSlot, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { inject, Ref } from 'vue'\nimport HudButton from \"@/component/HudButton.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesTab',\n  props: ['name'],\n  setup(__props) {\n\nconst props = __props;\n\n\nconst activeTabName = inject('activeTabName') as Ref<string | null>\n\nfunction onClick() {\n  if (activeTabName.value == props.name)\n    activeTabName.value = null\n  else\n    activeTabName.value = props.name\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(HudButton, {\n    class: \"c-properties-tab\",\n    active: _unref(activeTabName) === __props.name,\n    onClick: onClick\n  }, {\n    default: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"default\")\n    ]),\n    _: 3\n  }, 8, [\"active\"]))\n}\n}\n\n})","import script from \"./PropertiesTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PropertiesTab.vue?vue&type=style&index=0&id=8da2aa86&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"body-wr\"\n}\n\nimport { inject, ref } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesTabBody',\n  props: ['name'],\n  setup(__props) {\n\nconst props = __props;\n\n\nconst activeTabName = inject('activeTabName', ref(null))\n\nreturn (_ctx: any,_cache: any) => {\n  return (_unref(activeTabName) === props.name)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _renderSlot(_ctx.$slots, \"default\")\n      ]))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})","import script from \"./PropertiesTabBody.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesTabBody.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-22faf50d\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"section-wr\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"section-title\"\n}\nconst _hoisted_3 = { class: \"section-content\" }\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesSection',\n  props: ['title'],\n  setup(__props) {\n\nconst props = __props;\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (props.title)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString(props.title), 1))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _renderSlot(_ctx.$slots, \"default\")\n    ])\n  ]))\n}\n}\n\n})","import script from \"./PropertiesSection.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesSection.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PropertiesSection.vue?vue&type=style&index=0&id=22faf50d&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-22faf50d\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-f7fc3158\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"c-number-slider\" }\nconst _hoisted_2 = [\"disabled\", \"min\", \"max\", \"step\"]\n\nimport { ref, watch } from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'NumberSlider',\n  props: {\n    min: null,\n    max: null,\n    step: null,\n    disabled: { type: Boolean },\n    modelValue: null\n  },\n  emits: ['update:modelValue'],\n  setup(__props: any, { emit }) {\n\nconst props = __props as {\n  min?: number,\n  max?: number,\n  step?: number,\n  disabled?: boolean,\n  modelValue?: number\n};\n\n\n\n\nconst value = ref<number>(0)\n\nwatch(props, () => {\n  if (props.modelValue != null)\n    value.value = props.modelValue\n})\n\nwatch(value, () => {\n  emit(\"update:modelValue\", value.value)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"input\", {\n      class: \"input\",\n      type: \"range\",\n      disabled: __props.disabled,\n      min: __props.min,\n      max: __props.max,\n      step: __props.step,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((value).value = $event))\n    }, null, 8, _hoisted_2), [\n      [_vModelText, value.value]\n    ])\n  ]))\n}\n}\n\n})","import script from \"./NumberSlider.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NumberSlider.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NumberSlider.vue?vue&type=style&index=0&id=f7fc3158&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f7fc3158\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, vModelText as _vModelText, unref as _unref, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-slider-with-number-input\" }\nconst _hoisted_2 = { class: \"slider-with-number-input\" }\nconst _hoisted_3 = [\"disabled\"]\n\nimport {Ref, ref, watch} from \"vue\";\nimport Slider from \"@/component/input/NumberSlider.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SliderWithNumberInput',\n  props: {\n    min: null,\n    max: null,\n    step: null,\n    disabled: { type: Boolean },\n    modelValue: null\n  },\n  emits: ['update:modelValue'],\n  setup(__props: any, { emit }) {\n\nconst props = __props as {\n  min?: number,\n  max?: number,\n  step?: number,\n  disabled?: boolean,\n  modelValue?: number\n};\n\n\n\nconst textInput = ref<HTMLInputElement>() as Ref<HTMLInputElement>\nconst value = ref<number>(0)\n\nwatch(props, () => {\n  if (props.modelValue != null)\n    value.value = props.modelValue\n})\n\nwatch(value, () => {\n  emit(\"update:modelValue\", value.value)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(Slider, {\n        class: \"slider\",\n        min: __props.min,\n        max: __props.max,\n        step: __props.step,\n        disabled: __props.disabled,\n        modelValue: value.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((value).value = $event)),\n        modelModifiers: { number: true }\n      }, null, 8, [\"min\", \"max\", \"step\", \"disabled\", \"modelValue\"]),\n      _withDirectives(_createElementVNode(\"input\", {\n        class: \"text-input\",\n        type: \"text\",\n        ref_key: \"textInput\",\n        ref: textInput,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((value).value = $event)),\n        disabled: __props.disabled,\n        onFocus: _cache[2] || (_cache[2] = ($event: any) => (_unref(textInput).select())),\n        onKeydown: [\n          _cache[3] || (_cache[3] = _withKeys(($event: any) => (_unref(textInput).blur()), [\"enter\"])),\n          _cache[4] || (_cache[4] = _withKeys(($event: any) => (_unref(textInput).blur()), [\"esc\"]))\n        ]\n      }, null, 40, _hoisted_3), [\n        [\n          _vModelText,\n          value.value,\n          void 0,\n          { number: true }\n        ]\n      ])\n    ])\n  ]))\n}\n}\n\n})","import script from \"./SliderWithNumberInput.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SliderWithNumberInput.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SliderWithNumberInput.vue?vue&type=style&index=0&id=c25372b2&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"c-input-label\"><slot/></div>\n</template>\n\n<style>\n.c-input-label {\n  color: var(--properties-input-label-color);\n  font-size: 0.8em;\n  margin-bottom: 1px;\n  cursor: default;\n}\n</style>","import { render } from \"./InputLabel.vue?vue&type=template&id=99afd250\"\nconst script = {}\n\nimport \"./InputLabel.vue?vue&type=style&index=0&id=99afd250&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { inject } from \"vue\";\n\nimport World from \"@/game/world/World\";\n\nimport PropertiesSection from \"@/component/properties/PropertiesSection.vue\";\nimport SliderWithNumberInput from \"@/component/input/SliderWithNumberInput.vue\";\nimport InputLabel from \"@/component/input/InputLabel.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'WorldSettings',\n  setup(__props) {\n\nconst world = inject('world') as World;\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(PropertiesSection, {\n    class: \"c-world-settings-tab-body\",\n    title: \"World settings\"\n  }, {\n    default: _withCtx(() => [\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Gravity\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        class: \"slider-input\",\n        min: -5,\n        max: 5,\n        step: 0.01,\n        modelValue: _unref(world).gravity.y,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(world).gravity.y) = $event)),\n        modelModifiers: { number: true }\n      }, null, 8, [\"step\", \"modelValue\"]),\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Density\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        class: \"slider-input\",\n        min: 0,\n        max: 1.5,\n        step: 0.01,\n        modelValue: _unref(world).density,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(world).density) = $event)),\n        modelModifiers: { number: true },\n        disabled: true\n      }, null, 8, [\"max\", \"step\", \"modelValue\"]),\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Viscosity\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        class: \"slider-input\",\n        min: 0,\n        max: 0.8,\n        step: 0.01,\n        modelValue: _unref(world).viscosity,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(world).viscosity) = $event)),\n        modelModifiers: { number: true }\n      }, null, 8, [\"max\", \"step\", \"modelValue\"]),\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Light intensity\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        class: \"slider-input\",\n        min: 0,\n        max: 0.8,\n        step: 0.01,\n        modelValue: _unref(world).lightIntensity,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(world).lightIntensity) = $event)),\n        modelModifiers: { number: true },\n        disabled: true\n      }, null, 8, [\"max\", \"step\", \"modelValue\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./WorldSettings.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WorldSettings.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WorldSettings.vue?vue&type=style&index=0&id=4e2775a8&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import Vector2 from \"@/geom/Vector2\";\n\nexport default class Food implements WorldObject {\n    static FOOD_DENSITY = 4\n\n    id = -1\n\n    constructor(\n        public center: Vector2,\n        public mass: number\n    ) {}\n\n\n    get radius() {\n        return Math.sqrt(this.mass/Math.PI) / Food.FOOD_DENSITY\n    }\n}","import Vector2 from \"@/geom/Vector2\";\nimport Genome from \"@/game/Genome\";\n\nexport default class Cell implements WorldObject {\n    id = -1\n\n    constructor(\n        public center: Vector2,\n        public speed: Vector2,\n        public mass: number,\n        public angle: number,\n        public angularSpeed: number,\n        public genome: Genome,\n    ) {}\n\n    connections: Map<number, CellConnectionState> = new Map()\n    age: number = 0\n\n    public get radius() {\n        return Math.sqrt(this.mass)\n    }\n}\n\nexport class CellConnectionState {\n    constructor(public angle: number, public partnerId: number) {}\n}","import Vector2 from \"@/geom/Vector2\";\n\nexport default class Wall implements WorldObject {\n    id = -1\n\n    constructor(public a: Vector2, public b: Vector2) {}\n}\n","enum CellType {\n    PHAGOCYTE,\n    FLAGELLOCYTE\n}\n\nexport default CellType","import CellType from \"@/game/CellType\";\n\nexport default class Genome {\n    private constructor(\n        public type: CellType = CellType.FLAGELLOCYTE,\n        public cyanPigment: number = 0,\n        public magentaPigment: number = 0,\n        public yellowPigment: number = 0,\n        public whitePigment: number = 0,\n        public hardness: number = 0,\n        public splitMass: number = 0,\n        public splitAngle: number = 0,\n        public child1Angle: number = 0,\n        public child2Angle: number = 0,\n        public stickOnSplit: boolean = false,\n        public child1KeepConnections: boolean = false,\n        public child2KeepConnections: boolean = false,\n        public nutritionPriority: number = 0,\n    ) {}\n\n    flagellumForce: number = 8;\n\n    children: [Genome, Genome] = [this, this];\n\n    deepCopy = this.copyRecursive\n\n    applyRadiationLocally() {\n        // TODO\n    }\n\n    static newNullGenome(): Genome {\n        return new Genome();\n    }\n\n    static newSampleGenome(): Genome {\n        const result = new Genome();\n        result.type = CellType.FLAGELLOCYTE;\n        result.hardness = 0.6;\n        result.splitMass = 350;\n        result.child1KeepConnections = true;\n        result.child2KeepConnections = true;\n        result.nutritionPriority = 1;\n        [result.cyanPigment, result.magentaPigment, result.yellowPigment, result.whitePigment] = this.getRandomCellPigments();\n        return result\n    }\n\n    private static getRandomCellPigments(): [number, number, number, number] {\n        const cmyw: [number, number, number, number] = [\n            Math.round(Math.random()/2*100)/100,\n            Math.round(Math.random()*100)/100,\n            0,\n            0\n        ];\n        for (let i = 0; i < cmyw.length; i++) {\n            const randomIndex = Math.floor(Math.random() * cmyw.length);\n            [cmyw[i], cmyw[randomIndex]] = [cmyw[randomIndex], cmyw[i]];\n        }\n        return cmyw\n    }\n\n    private copyRecursive(copies: Map<Genome, Genome> = new Map().set(null, null)): Genome {\n        const result = new Genome()\n        result.type = this.type\n        result.cyanPigment = this.cyanPigment\n        result.magentaPigment = this.magentaPigment\n        result.yellowPigment = this.yellowPigment\n        result.whitePigment = this.whitePigment\n        result.hardness = this.hardness\n        result.splitMass = this.splitMass\n        result.splitAngle = this.splitAngle\n        result.child1Angle = this.child1Angle\n        result.child2Angle = this.child2Angle\n        result.stickOnSplit = this.stickOnSplit\n        result.child1KeepConnections = this.child1KeepConnections\n        result.child2KeepConnections = this.child2KeepConnections\n        result.nutritionPriority = this.nutritionPriority\n        result.flagellumForce = this.flagellumForce\n        copies.set(this, result)\n\n        result.children = [\n            copies.has(this.children[0]) ? copies.get(this.children[0])! : this.children[0].copyRecursive(copies),\n            copies.has(this.children[1]) ? copies.get(this.children[1])! : this.children[1].copyRecursive(copies)\n        ]\n\n        return result\n    }\n\n    private findAllGenomes(): Set<Genome> {\n        const stash = new Array<Genome>()\n        const result = new Set<Genome>()\n        while (stash.length != 0) {\n            stash.pop()!!.children.forEach((element: Genome) => {\n                if (!result.has(element)) {\n                    stash.push(element)\n                    result.add(element)\n                }\n            });\n        }\n        return result\n    }\n\n    private applyRadiationRecursive() {\n        // TODO\n    }\n}","import Vector2 from \"@/geom/Vector2\";\n\nexport default class Camera {\n    constructor(\n        public center: Vector2,\n        public height: number\n    ) {}\n\n    static NULL = new Camera(new Vector2(), 0)\n}","import Vector2 from \"@/geom/Vector2\";\nimport Food from \"@/game/world/object/Food\";\nimport Cell from \"@/game/world/object/Cell\";\nimport Wall from \"@/game/world/object/Wall\";\nimport Genome from \"@/game/Genome\";\nimport Camera from \"@/game/Camera\";\n\nexport default class World {\n    constructor(\n        public width: number,\n        public height: number,\n        public gravity: Vector2,\n        public density: number,\n        public viscosity: number,\n        public radiation: number,\n        public lightIntensity: number,\n        public camera: Camera = Camera.NULL\n    ) {}\n\n    public food: Map<number, Food> = new Map()\n    public cells: Map<number, Cell> = new Map()\n    public walls: Map<number, Wall> = new Map()\n\n    private idCounter = 0;\n\n    public newId() {\n        return this.idCounter++;\n    }\n\n    public add(object: WorldObject) {\n        if (object.id == -1)\n            object.id = this.newId();\n\n        if (object instanceof Cell)\n            this.cells.set(object.id, object);\n        if (object instanceof Food)\n            this.food.set(object.id, object);\n        if (object instanceof Wall)\n            this.walls.set(object.id, object);\n    }\n\n    public remove(object: WorldObject) {\n        this.cells.delete(object.id);\n        this.food.delete(object.id);\n        this.walls.delete(object.id);\n\n        if (object instanceof Cell) {\n            for (const id of object.connections.keys()) {\n                this.cells.get(id)?.connections.delete(object.id);\n            }\n        }\n    }\n\n    public getLightIntensityAtPoint(point: Vector2) {\n        // TODO\n    }\n\n    static getDefault() {\n        return new World(0, 0, new Vector2(), 0, 0, 0, 0)\n    }\n\n    static TEMPORARY_DEBUG = (() => {\n        const world = new World(800, 600, new Vector2(0, 4), 0, 0.2, 0, 0, new Camera(new Vector2(0, 0), 800));\n        world.add(new Cell(new Vector2(50, 50), new Vector2(), 400, 0, 0, Genome.newSampleGenome()));\n        world.add(new Cell(new Vector2(200, 120), new Vector2(), 400, 0, 0, Genome.newSampleGenome()));\n        world.add(new Cell(new Vector2(200, 300), new Vector2(), 400, 0, 0, Genome.newSampleGenome()));\n        world.add(new Wall(new Vector2(0, 0), new Vector2(0, world.height)));\n        world.add(new Wall(new Vector2(0, world.height), new Vector2(world.width, world.height)));\n        world.add(new Wall(new Vector2(world.width, world.height), new Vector2(world.width, 0)));\n        world.add(new Wall(new Vector2(world.width, 0), new Vector2(0, 0)));\n        return world;\n    })()\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-cell-genome-preview\" }\n\nimport Genome from \"@/game/Genome\";\nimport WorldRenderer from \"@/render/WorldRenderer\";\nimport {onBeforeUnmount, onMounted, Ref, ref, watch} from \"vue\";\nimport World from \"@/game/world/World\";\nimport Vector2 from \"@/geom/Vector2\";\nimport Camera from \"@/game/Camera\";\nimport Cell from \"@/game/world/object/Cell\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CellGenomePreview',\n  props: {\n    genome: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n  genome: Genome | null\n};\n\n\n\nconst canvas = ref() as Ref<HTMLCanvasElement>;\nlet canvasSizeObserver: ResizeObserver\nlet renderer: WorldRenderer\n\nonMounted(() => {\n  renderer = WorldRenderer.init(canvas.value)\n  renderer.config.layers.background = false\n  canvasSizeObserver = new ResizeObserver(onCanvasResize)\n  canvasSizeObserver.observe(canvas.value)\n  updateRendererDummyWorld()\n  renderer.render()\n})\n\nonBeforeUnmount(() => {\n  canvasSizeObserver.disconnect();\n  renderer.destroy();\n})\n\nwatch(props, () => {\n  updateRendererDummyWorld()\n  renderer.render()\n})\n\nfunction updateRendererDummyWorld() {\n  const dummyWorld = World.getDefault()\n  if (props.genome) {\n    const dummyCell = new Cell(new Vector2(), new Vector2(), 300, Math.PI/4, 0, props.genome)\n    dummyWorld.cells.set(0, dummyCell)\n    dummyWorld.camera = new Camera(new Vector2(), dummyCell.radius * 3)\n  }\n  renderer.worldState = dummyWorld\n}\n\nfunction onCanvasResize() {\n  const dpr = window.devicePixelRatio;\n  const { width, height } = canvas.value.getBoundingClientRect();\n  canvas.value.width = Math.round(width * dpr);\n  canvas.value.height = Math.round(height * dpr);\n  renderer.render()\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"canvas\", {\n      class: \"canvas\",\n      ref_key: \"canvas\",\n      ref: canvas\n    }, null, 512)\n  ]))\n}\n}\n\n})","import script from \"./CellGenomePreview.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CellGenomePreview.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CellGenomePreview.vue?vue&type=style&index=0&id=495f7946&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, unref as _unref, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vShow as _vShow, normalizeClass as _normalizeClass, resolveDirective as _resolveDirective } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-genome-selector\" }\nconst _hoisted_2 = { class: \"select-head\" }\nconst _hoisted_3 = [\"onKeydown\"]\nconst _hoisted_4 = { class: \"dropdown\" }\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"dropdown-item__preview-wr\" }\nconst _hoisted_7 = { class: \"dropdown-item__name\" }\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"dropdown-item__controls\" }, null, -1)\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"new-item-button\" }, null, -1)\n\nimport {computed, ref, watch} from \"vue\";\nimport GenomeLibrary, {GenomeLibraryEntry} from \"@/game/GenomeLibrary\";\nimport InputLabel from \"@/component/input/InputLabel.vue\";\nimport CellGenomePreview from \"@/component/genome/CellGenomePreview.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomeSelector',\n  props: {\n    library: null,\n    modelValue: null\n  },\n  emits: ['update:modelValue'],\n  setup(__props: any, { emit }) {\n\nconst props = __props as {\n  library: GenomeLibrary,\n  modelValue?: GenomeLibraryEntry\n};\n\n\n\n\nconst nameInput = ref(props.modelValue ? props.modelValue.name : \"\")\nconst dropdownOpened = ref(false)\nconst value = ref<GenomeLibraryEntry | null>(null)\n\nconst libraryEntriesFiltered = computed(() => {\n  if (value.value && nameInput.value === value.value.name)\n    return props.library.entries\n  else\n    return props.library.search(nameInput.value)\n})\n\nwatch(value, () => {\n  emit('update:modelValue', value.value)\n  resetNameInput();\n})\n\nwatch(props, () => {\n  if (props.modelValue)\n    value.value = props.modelValue\n  resetNameInput();\n})\n\nfunction onInputFocus(e: InputEvent) {\n  dropdownOpened.value = true;\n  const input = e.target as HTMLInputElement;\n  input.select()\n}\n\nfunction select(item: GenomeLibraryEntry) {\n  value.value = item\n  dropdownOpened.value = false;\n}\n\nfunction cancelSelection() {\n  dropdownOpened.value = false\n  resetNameInput();\n}\n\nfunction resetNameInput() {\n  if (value.value == null)\n    nameInput.value = '';\n  else\n    nameInput.value = value.value.name\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _directive_click_outside = _resolveDirective(\"click-outside\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass({ 'dropdown-opened': dropdownOpened.value })\n    }, [\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Genome to edit\")\n        ]),\n        _: 1\n      }),\n      _createElementVNode(\"div\", _hoisted_2, [\n        (value.value)\n          ? (_openBlock(), _createBlock(CellGenomePreview, {\n              key: 0,\n              class: \"select-head__preview\",\n              genome: __props.modelValue?.genome\n            }, null, 8, [\"genome\"]))\n          : _createCommentVNode(\"\", true),\n        _withDirectives(_createElementVNode(\"input\", {\n          class: \"select-head__name-input\",\n          placeholder: \"Select genome\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((nameInput).value = $event)),\n          onFocus: onInputFocus,\n          onKeydown: _withKeys(cancelSelection, [\"esc\"])\n        }, null, 40, _hoisted_3), [\n          [_vModelText, nameInput.value]\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"select-head__dropdown-trigger\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (dropdownOpened.value = !dropdownOpened.value))\n        })\n      ]),\n      _withDirectives(_createElementVNode(\"div\", _hoisted_4, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(libraryEntriesFiltered), (item) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"dropdown-item\",\n            key: item.name,\n            onClick: () => select(item)\n          }, [\n            _createElementVNode(\"div\", _hoisted_6, [\n              _createVNode(CellGenomePreview, {\n                class: \"dropdown-item__preview\",\n                genome: item.genome\n              }, null, 8, [\"genome\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_7, _toDisplayString(item.name), 1),\n            _hoisted_8\n          ], 8, _hoisted_5))\n        }), 128)),\n        _hoisted_9\n      ], 512), [\n        [_vShow, dropdownOpened.value]\n      ])\n    ], 2)), [\n      [_directive_click_outside, cancelSelection]\n    ])\n  ]))\n}\n}\n\n})","import script from \"./GenomeSelector.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomeSelector.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GenomeSelector.vue?vue&type=style&index=0&id=32df403e&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"c-properties-subheader\">\n    <span class=\"text\">\n      <slot/>\n    </span>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.c-properties-subheader {\n  text-align: center;\n  display: flex;\n  align-items: center;\n  margin-top: 15px;\n  margin-bottom: 5px;\n\n  &:before, &:after {\n    content: '';\n    border-bottom: 1px solid grey;\n    height: 0;\n    flex: 1;\n  }\n\n  .text {\n    color: rgb(190, 190, 190);\n    text-transform: uppercase;\n    font-size: 0.8em;\n    margin: 0 10px;\n  }\n}\n</style>","import { render } from \"./PropertiesSubheader.vue?vue&type=template&id=8c428008\"\nconst script = {}\n\nimport \"./PropertiesSubheader.vue?vue&type=style&index=0&id=8c428008&lang=scss\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-genome-pigment-color-droplet-icon\" }\n\nimport {onBeforeUnmount, onMounted, Ref, ref, watch} from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomePigmentColorDropletIcon',\n  props: {\n  color: {\n    type: String,\n    default: \"white\"\n  },\n  value: {\n    type: Number,\n    default: 1\n  }\n},\n  setup(__props) {\n\nconst props = __props;\n\nconst canvasRef = ref() as Ref<HTMLCanvasElement>;\nlet canvasCtx: CanvasRenderingContext2D | null = null\nlet canvasSizeObserver: ResizeObserver\n\n\n\nwatch(props, drawDroplet);\n\nonMounted(startObservingCanvasSizeChange);\nonBeforeUnmount(stopObservingCanvasSizeChange)\n\nfunction startObservingCanvasSizeChange() {\n  canvasSizeObserver = new ResizeObserver(onCanvasResize)\n  canvasSizeObserver.observe(canvasRef.value);\n}\n\nfunction stopObservingCanvasSizeChange() {\n  canvasSizeObserver.disconnect();\n}\n\nfunction onCanvasResize() {\n  const canvas = canvasRef.value\n  const dpr = window.devicePixelRatio;\n  const { width, height } = canvas.getBoundingClientRect();\n  canvas.width = Math.round(width * dpr);\n  canvas.height = Math.round(height * dpr);\n  drawDroplet();\n}\n\nfunction drawDroplet() {\n  const canvas = canvasRef.value;\n  const { width: w, height: h } = canvas;\n  canvasCtx = canvasCtx || canvas.getContext('2d')!;\n  const gradient = canvasCtx.createLinearGradient(0.5 * w, 0.2 * h, 0.5 * w, 0.85 * h);\n  const clippedValue = Math.min(1, Math.max(0, props.value));\n  gradient.addColorStop(0, \"transparent\");\n  gradient.addColorStop(1 - clippedValue, \"transparent\");\n  gradient.addColorStop(1 - clippedValue, props.color);\n  gradient.addColorStop(1, props.color);\n  canvasCtx.clearRect(0, 0, w, h);\n  canvasCtx.strokeStyle = props.color;\n  canvasCtx.fillStyle = gradient;\n  canvasCtx.lineWidth = 2;\n  canvasCtx.beginPath();\n  canvasCtx.moveTo(0.5 * w, 0.2 * h);\n  canvasCtx.lineTo(0.75 * w, 0.6 * h);\n  canvasCtx.arc(0.5 * w, 0.6 * h, 0.25 * w, 0, Math.PI);\n  canvasCtx.lineTo(0.5 * w, 0.2 * h);\n  canvasCtx.stroke();\n  canvasCtx.fill();\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"canvas\", {\n      class: \"canvas\",\n      ref_key: \"canvasRef\",\n      ref: canvasRef\n    }, null, 512)\n  ]))\n}\n}\n\n})","import script from \"./GenomePigmentColorDropletIcon.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomePigmentColorDropletIcon.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GenomePigmentColorDropletIcon.vue?vue&type=style&index=0&id=374333ae&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-genome-pigments-editor\" }\nconst _hoisted_2 = { class: \"pigments-view\" }\n\nimport InputLabel from \"@/component/input/InputLabel.vue\";\nimport {computed, inject, Ref} from \"vue\";\nimport SliderWithNumberInput from \"@/component/input/SliderWithNumberInput.vue\";\nimport GenomePigmentColorDropletIcon from \"@/component/genome/GenomePigmentColorDropletIcon.vue\";\nimport Genome from \"@/game/Genome\";\nimport {GenomeLibraryEntry} from \"@/game/GenomeLibrary\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomePigmentsEditor',\n  setup(__props) {\n\nconst selectedGenomeEntry = inject('selectedGenomeEntry') as Ref<GenomeLibraryEntry | null>\nconst genome: Ref<Genome> = computed(() =>\n    selectedGenomeEntry.value ? selectedGenomeEntry.value!.genome : Genome.newNullGenome()\n)\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(InputLabel, { class: \"label\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Cyan\")\n      ]),\n      _: 1\n    }),\n    _createVNode(SliderWithNumberInput, {\n      class: \"input\",\n      min: 0,\n      max: 1,\n      step: 0.01,\n      disabled: !_unref(selectedGenomeEntry),\n      modelValue: _unref(genome).cyanPigment,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(genome).cyanPigment) = $event))\n    }, null, 8, [\"step\", \"disabled\", \"modelValue\"]),\n    _createVNode(InputLabel, { class: \"label\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Magenta\")\n      ]),\n      _: 1\n    }),\n    _createVNode(SliderWithNumberInput, {\n      class: \"input\",\n      min: 0,\n      max: 1,\n      step: 0.01,\n      disabled: !_unref(selectedGenomeEntry),\n      modelValue: _unref(genome).magentaPigment,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(genome).magentaPigment) = $event))\n    }, null, 8, [\"step\", \"disabled\", \"modelValue\"]),\n    _createVNode(InputLabel, { class: \"label\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Yellow\")\n      ]),\n      _: 1\n    }),\n    _createVNode(SliderWithNumberInput, {\n      class: \"input\",\n      min: 0,\n      max: 1,\n      step: 0.01,\n      disabled: !_unref(selectedGenomeEntry),\n      modelValue: _unref(genome).yellowPigment,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(genome).yellowPigment) = $event))\n    }, null, 8, [\"step\", \"disabled\", \"modelValue\"]),\n    _createVNode(InputLabel, { class: \"label\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"White\")\n      ]),\n      _: 1\n    }),\n    _createVNode(SliderWithNumberInput, {\n      class: \"input\",\n      min: 0,\n      max: 1,\n      step: 0.01,\n      disabled: !_unref(selectedGenomeEntry),\n      modelValue: _unref(genome).whitePigment,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(genome).whitePigment) = $event))\n    }, null, 8, [\"step\", \"disabled\", \"modelValue\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(GenomePigmentColorDropletIcon, {\n        class: \"pigment-icon\",\n        color: \"cyan\",\n        value: _unref(genome).cyanPigment\n      }, null, 8, [\"value\"]),\n      _createVNode(GenomePigmentColorDropletIcon, {\n        class: \"pigment-icon\",\n        color: \"magenta\",\n        value: _unref(genome).magentaPigment\n      }, null, 8, [\"value\"]),\n      _createVNode(GenomePigmentColorDropletIcon, {\n        class: \"pigment-icon\",\n        color: \"yellow\",\n        value: _unref(genome).yellowPigment\n      }, null, 8, [\"value\"]),\n      _createVNode(GenomePigmentColorDropletIcon, {\n        class: \"pigment-icon\",\n        color: \"white\",\n        value: _unref(genome).whitePigment\n      }, null, 8, [\"value\"])\n    ])\n  ]))\n}\n}\n\n})","import script from \"./GenomePigmentsEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomePigmentsEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GenomePigmentsEditor.vue?vue&type=style&index=0&id=d1c55dbc&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport PropertiesSubheader from \"@/component/properties/PropertiesSubheader.vue\";\nimport GenomePigmentsEditor from \"@/component/genome/GenomePigmentsEditor.vue\";\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomeEditor',\n  setup(__props) {\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(PropertiesSubheader, null, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Pigments\")\n      ]),\n      _: 1\n    }),\n    _createVNode(GenomePigmentsEditor),\n    _createVNode(PropertiesSubheader, null, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Children\")\n      ]),\n      _: 1\n    })\n  ]))\n}\n}\n\n})","import script from \"./GenomeEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomeEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, isRef as _isRef, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport {inject, provide, ref, Ref} from \"vue\";\nimport PropertiesSection from \"@/component/properties/PropertiesSection.vue\";\nimport GenomeLibrary, { GenomeLibraryEntry } from \"@/game/GenomeLibrary\";\nimport GenomeSelector from \"@/component/genome/GenomeSelector.vue\";\nimport GenomeEditor from \"@/component/genome/GenomeEditor.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomeLibraryEditor',\n  setup(__props) {\n\nconst library = inject('genomeLibrary') as Ref<GenomeLibrary>;\n\nlet selectedGenomeEntry = ref<GenomeLibraryEntry | null>(null);\nprovide('selectedGenomeEntry', selectedGenomeEntry);\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(PropertiesSection, { title: \"Genome editor\" }, {\n    default: _withCtx(() => [\n      _createVNode(GenomeSelector, {\n        library: _unref(library),\n        modelValue: _unref(selectedGenomeEntry),\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(selectedGenomeEntry) ? (selectedGenomeEntry).value = $event : selectedGenomeEntry = $event))\n      }, null, 8, [\"library\", \"modelValue\"]),\n      _createVNode(GenomeEditor)\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./GenomeLibraryEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomeLibraryEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode } from \"vue\"\nimport _imports_0 from '@public/icon/time_control/pause.svg'\nimport _imports_1 from '@public/icon/time_control/play.svg'\n\n\nconst _hoisted_1 = { class: \"c-time-control\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"icon\",\n  src: _imports_0,\n  alt: \"pause icon\"\n}\nconst _hoisted_3 = {\n  key: 1,\n  class: \"icon\",\n  src: _imports_1,\n  alt: \"play icon\"\n}\n\nimport {inject, Ref} from \"vue\";\n\nimport HudButton from \"@/component/HudButton.vue\";\nimport WorldUpdater from \"@/game/world/updater/WorldUpdater\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TimeControl',\n  setup(__props) {\n\nconst updater = inject('worldUpdater') as Ref<WorldUpdater>;\n\nfunction onPausePlayButtonClick() {\n  if (updater.value.simulationActive)\n    updater.value.pauseSimulation();\n  else\n    updater.value.startSimulation();\n}\n\nfunction onSpeedButtonClick(speed: number) {\n  updater.value.simulationSpeed = speed;\n  updater.value.startSimulation();\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(HudButton, {\n      class: \"button pause-play-button\",\n      \"border-radius\": \"default 0 0 default\",\n      \"border-width\": \"default 0.5px default default\",\n      onClick: onPausePlayButtonClick\n    }, {\n      default: _withCtx(() => [\n        (_unref(updater).simulationActive)\n          ? (_openBlock(), _createElementBlock(\"img\", _hoisted_2))\n          : (_openBlock(), _createElementBlock(\"img\", _hoisted_3))\n      ]),\n      _: 1\n    }),\n    _createVNode(HudButton, {\n      class: \"button play-1x-button\",\n      \"border-radius\": \"0\",\n      \"border-width\": \"default 0.5px\",\n      active: _unref(updater).simulationSpeed === 1,\n      onClick: _cache[0] || (_cache[0] = () => onSpeedButtonClick(1))\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\" x1 \")\n      ]),\n      _: 1\n    }, 8, [\"active\"]),\n    _createVNode(HudButton, {\n      class: \"button play-2x-button\",\n      \"border-radius\": \"0\",\n      \"border-width\": \"default 0.5px\",\n      active: _unref(updater).simulationSpeed === 2,\n      onClick: _cache[1] || (_cache[1] = () => onSpeedButtonClick(2))\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\" x2 \")\n      ]),\n      _: 1\n    }, 8, [\"active\"]),\n    _createVNode(HudButton, {\n      class: \"button play-5x-button\",\n      \"border-radius\": \"0.5px default default 0\",\n      \"border-width\": \"default default default 0.5px\",\n      active: _unref(updater).simulationSpeed === 5,\n      onClick: _cache[2] || (_cache[2] = () => onSpeedButtonClick(5))\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\" x5 \")\n      ]),\n      _: 1\n    }, 8, [\"active\"])\n  ]))\n}\n}\n\n})","import script from \"./TimeControl.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimeControl.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimeControl.vue?vue&type=style&index=0&id=2fea11d3&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\"\nimport _imports_0 from '@public/icon/properties/genome-editor.svg'\nimport _imports_1 from '@public/icon/properties/settings.svg'\n\n\nconst _hoisted_1 = { class: \"c-controls-panel\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"properties-tab__icon\",\n  src: _imports_0,\n  alt: \"Tab icon\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"properties-tab__icon\",\n  src: _imports_1,\n  alt: \"Tab icon\"\n}, null, -1)\nconst _hoisted_4 = { class: \"tool-buttons-container\" }\nconst _hoisted_5 = [\"src\"]\n\nimport { inject } from \"vue\";\nimport PropertiesTabbedPanel from \"@/component/properties/PropertiesTabbedPanel.vue\";\nimport PropertiesTab from \"@/component/properties/PropertiesTab.vue\";\nimport ToolsManager from \"@/tool/ToolsManager\";\nimport HudButton from \"@/component/HudButton.vue\";\nimport PropertiesTabBody from \"@/component/properties/PropertiesTabBody.vue\";\nimport WorldSettings from \"@/component/WorldSettings.vue\";\nimport GenomeLibraryEditor from \"@/component/genome/GenomeLibraryEditor.vue\";\nimport TimeControl from \"@/component/TimeControl.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'HudPanel',\n  setup(__props) {\n\nconst toolsManager = inject('toolsManager') as ToolsManager;\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(PropertiesTabbedPanel, { class: \"properties-container\" }, {\n      tabs: _withCtx(() => [\n        _createVNode(PropertiesTab, {\n          class: \"properties-tab\",\n          name: \"genome-editor\"\n        }, {\n          default: _withCtx(() => [\n            _hoisted_2\n          ]),\n          _: 1\n        }),\n        _createVNode(PropertiesTab, {\n          class: \"properties-tab\",\n          name: \"settings\"\n        }, {\n          default: _withCtx(() => [\n            _hoisted_3\n          ]),\n          _: 1\n        })\n      ]),\n      bodies: _withCtx(() => [\n        _createVNode(PropertiesTabBody, { name: \"genome-editor\" }, {\n          default: _withCtx(() => [\n            _createVNode(GenomeLibraryEditor)\n          ]),\n          _: 1\n        }),\n        _createVNode(PropertiesTabBody, { name: \"settings\" }, {\n          default: _withCtx(() => [\n            _createVNode(WorldSettings)\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createElementVNode(\"div\", _hoisted_4, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(toolsManager).tools, (tool) => {\n        return (_openBlock(), _createBlock(HudButton, {\n          class: \"tool-button\",\n          key: tool.name,\n          disabled: !tool.enabled,\n          active: _unref(toolsManager).currentTool === tool,\n          onClick: ($event: any) => (_unref(toolsManager).currentTool = tool)\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"img\", {\n              class: \"tool-button__icon\",\n              src: tool.icon,\n              alt: \"Tool icon\"\n            }, null, 8, _hoisted_5)\n          ]),\n          _: 2\n        }, 1032, [\"disabled\", \"active\", \"onClick\"]))\n      }), 128))\n    ]),\n    _createVNode(TimeControl)\n  ]))\n}\n}\n\n})","import script from \"./HudPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HudPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HudPanel.vue?vue&type=style&index=0&id=167bbffc&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import Genome from \"@/game/Genome\";\n\nexport default class GenomeLibrary {\n    entries: Set<GenomeLibraryEntry> = new Set()\n\n    search(query: string): Set<GenomeLibraryEntry> {\n        const result = new Set<GenomeLibraryEntry>()\n        this.entries.forEach( entry => {\n            if (entry.name.toLowerCase().includes(query.toLowerCase()))\n                result.add(entry)\n        })\n        return result\n    }\n}\n\nexport class GenomeLibraryEntry {\n    constructor(\n        public name: string,\n        public genome: Genome\n    ) {}\n}","export default class AppPreferences {\n    // Nothing here so far...\n}","import WorldMouseEvent from \"@/game/event/WorldMouseEvent\";\nimport Tool from \"@/tool/Tool\";\nimport World from \"@/game/world/World\";\n\nexport default class ToolsManager {\n\n    public currentTool: Tool\n\n    constructor(\n        public tools: Tool[],\n        private world: World\n    ) {\n        tools.forEach(tool => tool.init(this))\n        this.currentTool = tools[0]\n    }\n\n    dispatchEvent(event: WorldMouseEvent) {\n        // TODO\n    }\n}","import Tool from \"@/tool/Tool\";\nimport ToolsManager from \"@/tool/ToolsManager\";\n\nexport default class AddCellTool implements Tool {\n    name = \"Add cell\"\n    icon = require(\"@public/icon/tool/add-cell.svg\")\n    enabled = false\n\n    private toolsManager: ToolsManager | null = null;\n\n    init(toolsManager: ToolsManager) {\n        this.toolsManager = toolsManager\n    }\n\n    onSelect() {\n\n    }\n\n    onUnselect() {\n\n    }\n}","import Tool from \"@/tool/Tool\";\nimport ToolsManager from \"@/tool/ToolsManager\";\n\nexport default class RemoveCellTool implements Tool {\n    name = \"Remove cell\"\n    icon = require(\"@public/icon/tool/remove-cell.svg\")\n    enabled = false\n\n    init(toolsManager: ToolsManager) {}\n\n    onSelect() {}\n\n    onUnselect() {}\n}","import Tool from \"@/tool/Tool\";\nimport ToolsManager from \"@/tool/ToolsManager\";\n\nexport default class SelectionTool implements Tool {\n    name = \"Selection\";\n    icon = require(\"@public/icon/tool/selection.svg\")\n    enabled = true\n\n    init(toolsManager: ToolsManager): void {\n\n    }\n\n    onSelect(): void {\n\n    }\n\n    onUnselect(): void {\n\n    }\n}","import Updater from \"@/game/world/updater/Updater\";\nimport World from \"@/game/world/World\";\nimport UpdateContext from \"@/game/world/updater/UpdateContext\";\n\nexport default class ResetContextUpdater implements Updater {\n    constructor(\n        private world: World,\n        private context: UpdateContext\n    ) {}\n\n    update(): void {\n        this.context.cellsSpeedBuffer.clear();\n        this.context.cellsAngularSpeedBuffer.clear();\n\n        for (const cell of this.world.cells.values()) {\n            this.context.cellsSpeedBuffer.set(cell.id, cell.speed);\n            this.context.cellsAngularSpeedBuffer.set(cell.id, cell.angularSpeed);\n        }\n    }\n}","import Vector2 from \"@/geom/Vector2\";\n\nexport default class UpdateContext {\n    cellsSpeedBuffer = new Map<number, Vector2>();\n    cellsAngularSpeedBuffer = new Map<number, number>();\n}","import Vector2 from \"@/geom/Vector2\";\n\nexport default class Geometry {\n    static findLineAndCircleIntersections(\n        circleCenter: Vector2,\n        circleRadius: number,\n        lineStart: Vector2,\n        lineEnd: Vector2\n    ): Vector2[] {\n        const v1 = lineEnd.minus(lineStart);\n        const v2 = lineStart.minus(circleCenter);\n        const b = -2 * v1.dot(v2);\n        const c = 2 * (Math.pow(v1.x, 2) + Math.pow(v1.y, 2));\n        const d = Math.sqrt(\n            Math.pow(b, 2) - 2 * c * (Math.pow(v2.x, 2) + Math.pow(v2.y, 2) - Math.pow(circleRadius, 2))\n        );\n        if (isNaN(d))\n            return [];\n\n        const u1 = (b - d) / c;\n        const u2 = (b + d) / c;\n        const result = [];\n        if (u1 >= 0 && u1 <= 1)\n            result.push(new Vector2(lineStart.x + v1.x * u1, lineStart.y + v1.y * u1));\n        if (u2 >= 0 && u2 <= 1)\n            result.push(new Vector2(lineStart.x + v1.x * u2, lineStart.y + v1.y * u2));\n        return result;\n    }\n\n    static findCirclesIntersections(\n        circle1Center: Vector2,\n        circle1Radius: number,\n        circle2Center: Vector2,\n        circle2Radius: number\n    ): Vector2[] {\n        const distance = circle1Center.distance(circle2Center)\n        if (distance > circle1Radius + circle2Radius)\n            return [];\n\n        const a = circle1Center\n            .plus(circle2Center)\n            .times(0.5)\n            .plus(\n                circle2Center\n                    .minus(circle1Center)\n                    .times(\n                        Math.pow(circle1Radius, 2) - Math.pow(circle2Radius, 2)\n                    )\n                    .div(2*Math.pow(distance, 2))\n            );\n\n        const b = new Vector2(\n            circle2Center.y - circle1Center.y,\n            circle1Center.x - circle2Center.x\n        ).times(\n            0.5 * Math.sqrt(\n                2 * (Math.pow(circle1Radius, 2) + Math.pow(circle2Radius, 2)) / Math.pow(distance, 2) -\n                Math.pow(Math.pow(circle1Radius, 2) - Math.pow(circle2Radius, 2), 2) / Math.pow(distance, 4) - 1\n            )\n        );\n\n        if (a.isNaN() || b.isNaN())\n            return [];\n\n        return [a.plus(b), a.minus(b)];\n    }\n\n    static findLinesIntersection(\n        lineA: [Vector2, Vector2],\n        lineB: [Vector2, Vector2]\n    ): Vector2 | null {\n        const angle1Ratio = (lineA[1].y - lineA[0].y) / (lineA[1].x - lineA[0].x);\n        const angle2Ratio = (lineB[1].y - lineB[0].y) / (lineB[1].x - lineA[0].x);\n\n        if (isNaN(angle1Ratio) || isNaN(angle2Ratio) ||\n            !isFinite(angle1Ratio) && !isFinite(angle2Ratio) ||\n            angle1Ratio == angle2Ratio)\n            return null;\n\n        if (!isFinite(angle1Ratio))\n            return Geometry.findVerticalLineIntersection(lineA, lineB);\n        if (!isFinite(angle2Ratio))\n            return Geometry.findVerticalLineIntersection(lineB, lineA);\n\n        const lineAOffset = lineA[0].y - angle1Ratio * lineA[0].x;\n        const lineBOffset = lineB[0].y - angle2Ratio * lineB[0].x;\n\n        const intersection = new Vector2((lineBOffset - lineAOffset) / (angle1Ratio - angle2Ratio), 0);\n        intersection.y = angle1Ratio * intersection.x + lineAOffset;\n\n        const avgAPoint = lineA[0].plus(lineA[1]).div(2);\n        const lineARect = new Vector2(\n            Math.abs(lineA[0].x - lineA[1].x),\n            Math.abs(lineA[0].y - lineA[1].y)\n        );\n        const avgBPoint = lineB[0].plus(lineB[1]).div(2);\n        const lineBRect = new Vector2(\n            Math.abs(lineB[0].x - lineB[1].x),\n            Math.abs(lineB[0].y - lineB[1].y)\n        );\n        return (\n            Math.abs(intersection.x - avgAPoint.x) <= lineARect.x/2 &&\n            Math.abs(intersection.y - avgAPoint.y) <= lineARect.y/2 &&\n            Math.abs(intersection.x - avgBPoint.x) <= lineBRect.x/2 &&\n            Math.abs(intersection.y - avgBPoint.y) <= lineBRect.y/2\n        ) ? intersection : null;\n    }\n\n    static projectPointOntoLine(\n        point: Vector2,\n        line: [Vector2, Vector2]\n    ): Vector2 {\n        const a = line[0];\n        const b = line[1];\n        if (a.x == b.x)\n            return new Vector2(a.x, point.y);\n        return a.to(b).times(\n            a.to(point).dot(a.to(b)) / (a.to(b)).dot(a.to(b))\n        ).plus(a);\n    }\n\n    static clamp(value: number, min: number, max: number) {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    private static findVerticalLineIntersection(\n        verticalLine: [Vector2, Vector2],\n        otherLine: [Vector2, Vector2]\n    ): Vector2 | null {\n        if (otherLine[0].x == otherLine[1].x)\n            return null;\n\n        const otherAngleRatio = (otherLine[1].y - otherLine[1].y) / (otherLine[1].x - otherLine[0].x);\n        const line2Offset = otherLine[0].y - otherAngleRatio * otherLine[0].x;\n        const intersection = new Vector2(verticalLine[0].x, 0);\n        intersection.y = otherAngleRatio * intersection.x + line2Offset;\n        if (otherLine[0].x < intersection.x && otherLine[1].x < intersection.x ||\n            otherLine[0].x > intersection.x && otherLine[1].x > intersection.x)\n            return null;\n        const avgY = (verticalLine[0].y + verticalLine[1].y) / 2;\n        const height = Math.abs(verticalLine[0].y - verticalLine[1].y);\n        return Math.abs(intersection.y - avgY) <= height/2 ? intersection : null;\n    }\n}","import Updater from \"@/game/world/updater/Updater\";\nimport World from \"@/game/world/World\";\nimport Cell, {CellConnectionState} from \"@/game/world/object/Cell\";\nimport Wall from \"@/game/world/object/Wall\";\nimport Vector2 from \"@/geom/Vector2\";\nimport Geometry from \"@/geom/Geometry\";\nimport UpdateContext from \"@/game/world/updater/UpdateContext\";\n\nexport default class KineticsUpdater implements Updater {\n    private static CELL_STICKINESS_DEPTH = 3\n\n    constructor(\n        private world: World,\n        private context: UpdateContext,\n    ) {}\n\n    update(delta: number): void {\n        for (const cell of this.world.cells.values()) {\n            this.processGravity(cell, delta);\n\n            for (const wall of this.world.walls.values())\n                this.processCellWallCollision(cell, wall, delta);\n\n            for (const otherCell of this.world.cells.values())\n                this.processCellsCollision(cell, otherCell, delta);\n\n            for (const connection of cell.connections.values())\n                this.processCellConnection(cell, connection, delta);\n        }\n    }\n\n    private processGravity(cell: Cell, delta: number) {\n        let speed = this.context.cellsSpeedBuffer.get(cell.id)!;\n        speed = speed.plus(this.world.gravity.times(delta));\n        this.context.cellsSpeedBuffer.set(cell.id, speed);\n    }\n\n    private processCellWallCollision(cell: Cell, wall: Wall, delta: number) {\n        const intersections = Geometry.findLineAndCircleIntersections(cell.center, cell.radius, wall.a, wall.b);\n        if (intersections.length !== 0) {\n            const projection = Geometry.projectPointOntoLine(cell.center, [wall.a, wall.b]);\n            const oppositeForce = projection.to(cell.center).unit.times(cell.radius - projection.distance(cell.center));\n            const depth = Geometry.clamp(1 - cell.center.distance(projection) / cell.radius, 0, 1);\n            const hardnessCoefficient = Math.pow(cell.genome.hardness * depth + 1, cell.genome.hardness + 1);\n            const oldSpeed = this.context.cellsSpeedBuffer.get(cell.id)!;\n            const newSpeed = oldSpeed.plus(oppositeForce.times(hardnessCoefficient * delta));\n            this.context.cellsSpeedBuffer.set(cell.id, newSpeed);\n        }\n    }\n\n    private processCellsCollision(cell: Cell, otherCell: Cell, delta: number) {\n        if (cell.id == otherCell.id)\n            return;\n\n        if (cell.center.distance(otherCell.center) <= cell.radius + otherCell.radius) {\n            const intersections = Geometry.findCirclesIntersections(\n                cell.center, cell.radius, otherCell.center, otherCell.radius\n            );\n\n            const pivot = intersections.length != 0\n                ? intersections[0].plus(intersections[1]).div(2)\n                : cell.center.plus(otherCell.center).div(2);\n\n            const depth = Geometry.clamp(1 - cell.center.distance(pivot) / cell.radius, 0, 1);\n            const massSum = cell.mass + otherCell.mass;\n            const thisMassCoefficient = cell.mass / massSum;\n            const oppositeForce = pivot.to(cell.center).unit.times(cell.radius - pivot.distance(cell.center));\n            const hardnessCoefficient = Math.pow(cell.genome.hardness * depth + 1, cell.genome.hardness + 1);\n            const oldSpeed = this.context.cellsSpeedBuffer.get(cell.id)!;\n            const newSpeed = oldSpeed.plus(\n                oppositeForce\n                    .times(hardnessCoefficient)\n                    .plus(\n                        otherCell.speed\n                            .times(thisMassCoefficient)\n                            .minus(cell.speed.times(1 - thisMassCoefficient))\n                            .times(cell.genome.hardness)\n                    ).times(delta)\n            );\n            this.context.cellsSpeedBuffer.set(cell.id, newSpeed);\n        }\n    }\n\n    private processCellConnection(cell: Cell, connection: CellConnectionState, delta: number) {\n        const partner = this.world.cells.get(connection.partnerId);\n        if (!partner)\n            return;\n\n        const partnerConnection = partner.connections.get(cell.id);\n        if (!partnerConnection)\n            return;\n\n        // 4 is picked as balance between physical stability and computational load\n        for (let stringId = 0; stringId < 4; stringId++) {\n            const angleOffset = stringId * Math.PI / 24 - 1.5 * Math.PI / 24;\n            const effectiveConnectionAngle = cell.angle + connection.angle + angleOffset;\n            const effectiveConnectionForceOrigin = cell.center\n                    .plus(Vector2.unit(effectiveConnectionAngle).times(cell.radius))\n                    .minus(Vector2.unit(effectiveConnectionAngle).times(KineticsUpdater.CELL_STICKINESS_DEPTH));\n            const effectiveConnectionForceDestination = partner.center\n                .plus(Vector2.unit(partner.angle + partnerConnection.angle - angleOffset).times(partner.radius))\n                .minus(\n                    Vector2.unit(partner.angle + partnerConnection.angle - angleOffset)\n                        .times(KineticsUpdater.CELL_STICKINESS_DEPTH)\n                );\n            const connectionForceDirection = effectiveConnectionForceOrigin\n                .to(effectiveConnectionForceDestination)\n                .div(4)\n                .times(delta);\n            this.applyImpulse(cell, effectiveConnectionForceOrigin, connectionForceDirection)\n        }\n    }\n\n    private applyImpulse(cell: Cell, impulseOrigin: Vector2, impulseDirection: Vector2) {\n        if (impulseDirection.length == 0)\n            return;\n        const originToCenterAngle = impulseOrigin.to(cell.center).angle;\n        const directionRelativeAngle = originToCenterAngle - impulseDirection.angle;\n        const impulseOriginDistance = cell.center.distance(impulseOrigin);\n        const projectedDistance = Math.sin(directionRelativeAngle) * impulseOriginDistance;\n        const translationImpactCoefficient = 1 / (Math.pow(projectedDistance / cell.radius, 2) + 1);\n        const rotationImpactCoefficient = 1 - translationImpactCoefficient;\n        const oldSpeed = this.context.cellsSpeedBuffer.get(cell.id)!;\n        const newSpeed = oldSpeed.plus(impulseDirection.times(translationImpactCoefficient));\n        const oldAngularSpeed = this.context.cellsAngularSpeedBuffer.get(cell.id)!;\n        const newAngularSpeed = oldAngularSpeed\n            - Math.atan(impulseDirection.length / projectedDistance) * rotationImpactCoefficient;\n        this.context.cellsSpeedBuffer.set(cell.id, newSpeed);\n        this.context.cellsAngularSpeedBuffer.set(cell.id, newAngularSpeed);\n    }\n}","import UpdateContext from \"@/game/world/updater/UpdateContext\";\nimport Updater from \"@/game/world/updater/Updater\";\nimport World from \"@/game/world/World\";\n\nexport default class ApplyContextUpdater implements Updater {\n    constructor(\n        private world: World,\n        private context: UpdateContext\n    ) {}\n\n    update(): void {\n        this.context.cellsSpeedBuffer.forEach((value, key) => {\n            const cell = this.world.cells.get(key)\n            if (cell) {\n                cell.speed = value;\n            }\n        });\n        this.context.cellsAngularSpeedBuffer.forEach((value, key) => {\n            const cell = this.world.cells.get(key)\n            if (cell) {\n                cell.angularSpeed = value;\n            }\n        });\n    }\n}","import Updater from \"@/game/world/updater/Updater\";\nimport World from \"@/game/world/World\";\n\nexport default class PositionUpdater implements Updater {\n    constructor(\n        private world: World\n    ) {}\n\n    update(delta: number): void {\n        this.world.cells.forEach(cell => {\n            cell.center = cell.center.plus(cell.speed.times(delta));\n            cell.angle = cell.angle + cell.angularSpeed * delta;\n            cell.speed = cell.speed.minus(cell.speed.times(this.world.viscosity * delta));\n            cell.angularSpeed -= cell.angularSpeed * this.world.viscosity * delta;\n        });\n    }\n}","import World from \"@/game/world/World\";\nimport ResetContextUpdater from \"@/game/world/updater/ResetContextUpdater\";\nimport UpdateContext from \"@/game/world/updater/UpdateContext\";\nimport KineticsUpdater from \"@/game/world/updater/KineticsUpdater\";\nimport ApplyContextUpdater from \"@/game/world/updater/ApplyContextUpdater\";\nimport Updater from \"@/game/world/updater/Updater\";\nimport PositionUpdater from \"@/game/world/updater/PositionUpdater\";\n\nexport default class WorldUpdater {\n    constructor(\n        private world: World\n    ) {\n        this.updatePipeline = [\n            new ResetContextUpdater(this.world, this.updateContext),\n            new KineticsUpdater(this.world, this.updateContext),\n            new ApplyContextUpdater(this.world, this.updateContext),\n            new PositionUpdater(this.world)\n        ]\n    }\n\n    static readonly SIMULATION_TICK_FIXED_DELTA = 16;\n    static readonly SIMULATION_SPEED_FACTOR = 5;\n\n    private readonly updateContext = new UpdateContext();\n    private readonly updatePipeline: Updater[]\n\n    simulationSpeed = 1;\n\n    private intervalId = -1;\n    private lastUpdateMillis = -1;\n\n    get simulationActive() {\n        return this.intervalId != -1;\n    }\n\n    startSimulation() {\n        if (!this.simulationActive) {\n            this.intervalId = setInterval(\n                this.intervalRoutine.bind(this),\n                WorldUpdater.SIMULATION_TICK_FIXED_DELTA\n            );\n            this.lastUpdateMillis = Date.now();\n        }\n    }\n\n    pauseSimulation() {\n        if (this.simulationActive)\n            clearInterval(this.intervalId);\n        this.intervalId = -1;\n    }\n\n    tick(delta: number) {\n        for (const updater of this.updatePipeline)\n            updater.update(delta);\n    }\n\n    private intervalRoutine() {\n        const deltaMillis = Date.now() - this.lastUpdateMillis;\n        const ticksRequiredOriginal = Math.round(deltaMillis / WorldUpdater.SIMULATION_TICK_FIXED_DELTA);\n        const ticksRequiredMultiplied = Math.min(\n            Math.round(deltaMillis * this.simulationSpeed / WorldUpdater.SIMULATION_TICK_FIXED_DELTA),\n            10\n        );\n        for (let i = 0; i < ticksRequiredMultiplied; i++)\n            this.tick(WorldUpdater.SIMULATION_TICK_FIXED_DELTA / 1000 * WorldUpdater.SIMULATION_SPEED_FACTOR);\n        this.lastUpdateMillis += WorldUpdater.SIMULATION_TICK_FIXED_DELTA * ticksRequiredOriginal;\n    }\n\n    // physics layers:\n    // 1. cell physics\n    // 2. cell nutrition\n    // 3. cell action\n    // 4. food\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { provide, ref } from \"vue\";\n\nimport WorldViewer from \"@/component/WorldViewer.vue\";\nimport ControlsPanel from \"@/component/HudPanel.vue\";\nimport GenomeLibrary, {GenomeLibraryEntry} from \"@/game/GenomeLibrary\";\nimport World from \"@/game/world/World\";\nimport AppPreferences from \"@/AppPreferences\";\nimport ToolsManager from \"@/tool/ToolsManager\";\nimport AddCellTool from \"@/tool/AddCellTool\";\nimport RemoveCellTool from \"@/tool/RemoveCellTool\";\nimport Genome from \"@/game/Genome\";\nimport SelectionTool from \"@/tool/SelectionTool\";\nimport WorldUpdater from \"@/game/world/updater/WorldUpdater\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\nconst tools = [ new SelectionTool(), new AddCellTool(), new RemoveCellTool() ];\nconst world = World.TEMPORARY_DEBUG;\n\nconst genomeLibrary = new GenomeLibrary();\nconst worldUpdater = new WorldUpdater(world);\nconst appPreferences = new AppPreferences();\nconst toolsManager = new ToolsManager(tools, world);\n\ngenomeLibrary.entries.add(new GenomeLibraryEntry(\"my genome\", Genome.newSampleGenome()));\ngenomeLibrary.entries.add(new GenomeLibraryEntry(\"test\", Genome.newSampleGenome()));\ngenomeLibrary.entries.add(new GenomeLibraryEntry(\"aaaaaaaaa\", Genome.newSampleGenome()));\ngenomeLibrary.entries.add(new GenomeLibraryEntry(\"aboba\", Genome.newSampleGenome()));\n\nprovide('world', world);\nprovide('worldUpdater', ref(worldUpdater));\nprovide('genomeLibrary', ref(genomeLibrary));\nprovide('appPreferences', ref(appPreferences));\nprovide('toolsManager', ref(toolsManager));\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(WorldViewer),\n    _createVNode(ControlsPanel, { class: \"controls-panel\" })\n  ], 64))\n}\n}\n\n})","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=2f4a91aa&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\nconst app = createApp(App)\n\napp.directive('click-outside', {\n    mounted: function (el, binding) {\n        el.clickOutsideEvent = function (event: MouseEvent) {\n            if (!(el == event.target || el.contains(event.target))) {\n                binding.value(event);\n            }\n        };\n        document.body.addEventListener('click', el.clickOutsideEvent)\n    },\n    beforeUnmount: function (el) {\n        document.body.removeEventListener('click', el.clickOutsideEvent)\n    },\n});\n\napp.mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkcybercells\"] = self[\"webpackChunkcybercells\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(4996); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["ShaderManager","constructor","gl","static","canvas","getContext","powerPreference","Error","newShader","vertexShaderSource","fragmentShaderSource","vertexShader","this","loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","newTexture","width","height","texture","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","newArrayBuffer","data","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","destroy","getExtension","loseContext","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","sqrt","pow","sin","cos","acos","PI","Math","Vector2","x","y","length","plus","that","minus","times","factor","div","negative","dot","to","nearest","vectors","reduce","a","b","distance","shortestAngularTurn","diff","angle","positiveAngleDiff","angleSafe","isNaN","rotate","radians","unit","vector","WorldRenderer","shaderManager","backgroundShader","cellShader","wallShader","emptyShader","worldState","Date","now","layers","background","walls","cells","mainMesh","createMainMesh","drawBufferTextureUv","createDrawBufferTextureUv","framebuffer","createFramebuffer","autoUpdateDrawBufferTexture","init","commonVertexShaderSource","backgroundFragmentShaderSource","cellFragmentShaderSource","wallFragmentShaderSource","emptyFragmentShaderSource","render","clearColor","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","viewport","drawingBufferWidth","drawingBufferHeight","config","renderBackground","renderCells","renderWalls","renderBufferToCanvas","project","worldPoint","projection","buildCameraTransform","inverted","mat4","vec2","unproject","screenPoint","useProgram","setupVertexShader","bindFramebuffer","FRAMEBUFFER","sourceBufferTexture","uniform1i","getUniformLocation","setDrawToCanvas","drawArrays","TRIANGLE_STRIP","viewMatrix","buildViewTransform","uniformMatrix4fv","uniform2f","bufferTextureSize","wall","values","setDrawToBufferTexture","swapBuffers","uniform1f","startTime","cell","cellRgba","cellPigmentsToRgba","genome","cyanPigment","magentaPigment","yellowPigment","whitePigment","id","center","speed","mass","radius","uniform4f","vertexAttributeLoc","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","textureCoordinateLoc","lightIntensity","canvasWidth","canvasHeight","result","camera","scale","drawBufferTextureNeedsUpdate","deleteTexture","targetBufferTexture","framebufferTexture2D","COLOR_ATTACHMENT0","swap","cyan","magenta","yellow","white","r","g","WorldMouseEvent","screenX","screenY","worldX","worldY","_hoisted_1","_defineComponent","__name","setup","__props","emit","SCROLL_SENSITIVITY","canvasRef","ref","containerRef","container","renderer","world","inject","dragging","dragMode","lastMouseWorldPoint","value","ResizeObserver","onCanvasResize","observe","renderingRoutine","onWheel","event","deltaY","onTouchEvent","touches","mouseEventType","clientX","clientY","dps","window","devicePixelRatio","worldEvent","handleDraggingEvent","onMouseEvent","prevX","prevY","requestAnimationFrame","dpr","getBoundingClientRect","round","onMounted","onBeforeUnmount","_ctx","_cache","_openBlock","_createElementBlock","class","ref_key","_createElementVNode","onClick","onMousedown","onMouseup","onMousemove","onMouseleave","onTouchstart","_withModifiers","onTouchmove","onTouchend","__exports__","_hoisted_2","_hoisted_3","activeTabName","minWidth","dragStartX","oldWidth","onHandleDragStart","initHandleDragging","addEventListener","onHandleDrag","stopHandleDragging","offset","removeEventListener","provide","draggable","style","_normalizeStyle","_renderSlot","$slots","props","active","Boolean","default","disabled","borderRadius","borderWidth","_useCssVars","_unref","defaultsSupportingBorderRadius","defaultsSupportingBorderWidth","computed","replaceAll","_normalizeClass","name","_createBlock","HudButton","_withCtx","_","key","_createCommentVNode","title","_toDisplayString","min","max","step","modelValue","emits","watch","_withDirectives","$event","_vModelText","textInput","_createVNode","Slider","modelModifiers","number","onFocus","select","onKeydown","_withKeys","blur","script","PropertiesSection","InputLabel","_createTextVNode","SliderWithNumberInput","gravity","density","viscosity","Food","FOOD_DENSITY","Cell","angularSpeed","Map","Wall","CellType","Genome","hardness","splitMass","splitAngle","child1Angle","child2Angle","stickOnSplit","child1KeepConnections","child2KeepConnections","nutritionPriority","copyRecursive","applyRadiationLocally","getRandomCellPigments","cmyw","random","i","randomIndex","floor","copies","set","flagellumForce","children","has","get","findAllGenomes","stash","Array","Set","pop","forEach","element","push","add","applyRadiationRecursive","Camera","World","radiation","NULL","newId","idCounter","object","food","remove","delete","connections","keys","getLightIntensityAtPoint","point","newSampleGenome","canvasSizeObserver","updateRendererDummyWorld","dummyWorld","getDefault","dummyCell","disconnect","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","library","nameInput","dropdownOpened","libraryEntriesFiltered","entries","search","onInputFocus","e","input","target","item","cancelSelection","resetNameInput","_directive_click_outside","_resolveDirective","CellGenomePreview","placeholder","_Fragment","_renderList","_vShow","color","String","Number","canvasCtx","startObservingCanvasSizeChange","stopObservingCanvasSizeChange","drawDroplet","w","h","gradient","createLinearGradient","clippedValue","addColorStop","clearRect","strokeStyle","fillStyle","lineWidth","beginPath","moveTo","lineTo","arc","stroke","fill","selectedGenomeEntry","newNullGenome","GenomePigmentColorDropletIcon","PropertiesSubheader","GenomePigmentsEditor","GenomeSelector","_isRef","GenomeEditor","src","_imports_0","alt","_imports_1","updater","onPausePlayButtonClick","simulationActive","pauseSimulation","startSimulation","onSpeedButtonClick","simulationSpeed","toolsManager","PropertiesTabbedPanel","tabs","PropertiesTab","bodies","PropertiesTabBody","GenomeLibraryEditor","WorldSettings","tools","tool","enabled","currentTool","icon","TimeControl","GenomeLibrary","query","entry","toLowerCase","includes","GenomeLibraryEntry","AppPreferences","ToolsManager","dispatchEvent","AddCellTool","require","onSelect","onUnselect","RemoveCellTool","SelectionTool","ResetContextUpdater","context","update","cellsSpeedBuffer","cellsAngularSpeedBuffer","UpdateContext","Geometry","circleCenter","circleRadius","lineStart","lineEnd","v1","v2","c","d","u1","u2","circle1Center","circle1Radius","circle2Center","circle2Radius","lineA","lineB","angle1Ratio","angle2Ratio","isFinite","findVerticalLineIntersection","lineAOffset","lineBOffset","intersection","avgAPoint","lineARect","abs","avgBPoint","lineBRect","line","verticalLine","otherLine","otherAngleRatio","line2Offset","avgY","KineticsUpdater","delta","processGravity","processCellWallCollision","otherCell","processCellsCollision","connection","processCellConnection","intersections","findLineAndCircleIntersections","projectPointOntoLine","oppositeForce","depth","clamp","hardnessCoefficient","oldSpeed","newSpeed","findCirclesIntersections","pivot","massSum","thisMassCoefficient","partner","partnerId","partnerConnection","stringId","angleOffset","effectiveConnectionAngle","effectiveConnectionForceOrigin","CELL_STICKINESS_DEPTH","effectiveConnectionForceDestination","connectionForceDirection","applyImpulse","impulseOrigin","impulseDirection","originToCenterAngle","directionRelativeAngle","impulseOriginDistance","projectedDistance","translationImpactCoefficient","rotationImpactCoefficient","oldAngularSpeed","newAngularSpeed","atan","ApplyContextUpdater","PositionUpdater","WorldUpdater","updatePipeline","updateContext","intervalId","setInterval","intervalRoutine","bind","SIMULATION_TICK_FIXED_DELTA","lastUpdateMillis","clearInterval","tick","deltaMillis","ticksRequiredOriginal","ticksRequiredMultiplied","SIMULATION_SPEED_FACTOR","TEMPORARY_DEBUG","genomeLibrary","worldUpdater","appPreferences","WorldViewer","ControlsPanel","app","createApp","App","directive","mounted","el","binding","clickOutsideEvent","contains","document","body","beforeUnmount","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","every","splice","n","getter","__esModule","definition","o","defineProperty","enumerable","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}