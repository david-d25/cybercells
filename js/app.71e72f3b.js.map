{"version":3,"file":"js/app.71e72f3b.js","mappings":"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","sources":["webpack://cybercells/./src/gl/ShaderManager.ts","webpack://cybercells/./src/shaders/common.vert","webpack://cybercells/./src/shaders/background.frag","webpack://cybercells/./src/shaders/cell.frag","webpack://cybercells/./src/geom/Vector2.ts","webpack://cybercells/./src/render/WorldRenderer.ts","webpack://cybercells/./src/game/event/WorldMouseEvent.ts","webpack://cybercells/./src/components/WorldViewer.vue?62a5","webpack://cybercells/./src/components/WorldViewer.vue","webpack://cybercells/./src/components/properties/PropertiesTabbedPanel.vue?dfcf","webpack://cybercells/./src/components/properties/PropertiesTabbedPanel.vue","webpack://cybercells/./src/components/properties/PropertiesTab.vue?7170","webpack://cybercells/./src/components/properties/PropertiesTab.vue","webpack://cybercells/./src/components/ToolButton.vue?871c","webpack://cybercells/./src/components/ToolButton.vue","webpack://cybercells/./src/components/properties/PropertiesTabBody.vue?4187","webpack://cybercells/./src/components/properties/PropertiesTabBody.vue","webpack://cybercells/./src/components/properties/PropertiesSection.vue?489a","webpack://cybercells/./src/components/properties/PropertiesSection.vue","webpack://cybercells/./src/components/input/Slider.vue?cffd","webpack://cybercells/./src/components/input/Slider.vue","webpack://cybercells/./src/components/input/SliderWithNumberInput.vue?72f0","webpack://cybercells/./src/components/input/SliderWithNumberInput.vue","webpack://cybercells/./src/components/properties/WorldSettingsTabBody.vue?183c","webpack://cybercells/./src/components/properties/WorldSettingsTabBody.vue","webpack://cybercells/./src/components/properties/GenomeEditorTabBody.vue?d7be","webpack://cybercells/./src/components/properties/GenomeEditorTabBody.vue","webpack://cybercells/./src/components/ControlsPanel.vue?c05a","webpack://cybercells/./src/components/ControlsPanel.vue","webpack://cybercells/./src/game/CellType.ts","webpack://cybercells/./src/game/GenomeLibrary.ts","webpack://cybercells/./src/game/state/CellState.ts","webpack://cybercells/./src/game/Genome.ts","webpack://cybercells/./src/game/Camera.ts","webpack://cybercells/./src/game/state/WorldState.ts","webpack://cybercells/./src/AppPreferences.ts","webpack://cybercells/./src/game/tool/ToolsManager.ts","webpack://cybercells/./src/game/tool/AddCellTool.ts","webpack://cybercells/./src/game/tool/RemoveCellTool.ts","webpack://cybercells/./src/App.vue?2a5e","webpack://cybercells/./src/App.vue","webpack://cybercells/./src/main.ts","webpack://cybercells/webpack/bootstrap","webpack://cybercells/webpack/runtime/chunk loaded","webpack://cybercells/webpack/runtime/define property getters","webpack://cybercells/webpack/runtime/global","webpack://cybercells/webpack/runtime/hasOwnProperty shorthand","webpack://cybercells/webpack/runtime/jsonp chunk loading","webpack://cybercells/webpack/startup"],"sourcesContent":["export default class ShaderManager {\n    private constructor(\n        public readonly gl: WebGL2RenderingContext\n    ) {}\n\n    static init(canvas: HTMLCanvasElement): ShaderManager {\n        const gl = canvas.getContext('webgl2', {\n            powerPreference: 'high-performance'\n        })\n\n        if (gl == null)\n            throw new Error(\"Unable to initialize WebGL!\")\n\n        return new ShaderManager(gl)\n    }\n\n    newShader(vertexShaderSource: string, fragmentShaderSource: string): WebGLProgram {\n        const vertexShader = this.loadShader(this.gl.VERTEX_SHADER, vertexShaderSource)\n        const fragmentShader = this.loadShader(this.gl.FRAGMENT_SHADER, fragmentShaderSource)\n\n        const shaderProgram = this.gl.createProgram()!\n        this.gl.attachShader(shaderProgram, vertexShader)\n        this.gl.attachShader(shaderProgram, fragmentShader)\n        this.gl.linkProgram(shaderProgram)\n\n        if (!this.gl.getProgramParameter(shaderProgram, this.gl.LINK_STATUS)) {\n            throw new Error(`Couldn't link shaders! Logs:\\n${this.gl.getProgramInfoLog(shaderProgram)}`)\n        }\n\n        return shaderProgram\n    }\n\n    newTexture(width: number, height: number): WebGLTexture | null {\n        const texture = this.gl.createTexture();\n        this.gl.bindTexture(this.gl.TEXTURE_2D, texture);\n        this.gl.texImage2D(\n            this.gl.TEXTURE_2D, 0, this.gl.RGBA, width, height,\n            0, this.gl.RGBA, this.gl.UNSIGNED_BYTE, null\n        );\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.NEAREST);\n        this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.NEAREST);\n        return texture\n    }\n\n    newArrayBuffer(data: number[]): WebGLBuffer {\n        const buffer = this.gl.createBuffer()\n        if (buffer == null)\n            throw new Error(\"Could not create buffer\")\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer)\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(data), this.gl.STATIC_DRAW)\n        return buffer\n    }\n\n    private loadShader(type: number, source: string): WebGLShader {\n        const shader = this.gl.createShader(type)!\n        this.gl.shaderSource(shader, source)\n        this.gl.compileShader(shader)\n\n        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n            throw new Error(`Couldn't compile shaders! Logs:\\n\\n${this.gl.getShaderInfoLog(shader)}`)\n        }\n\n        return shader\n    }\n}","export default \"#version 300 es\\n\\nin vec4 vertexPosition;\\nin vec2 textureCoordinate;\\nout vec2 texel;\\n\\nvoid main() {\\n    gl_Position = vertexPosition;\\n    texel = textureCoordinate;\\n}\";","export default \"#version 300 es\\n\\nprecision highp float;\\n\\nconst float CHECKER_SIZE = 25.0;\\n\\nuniform mat4 viewMatrix;\\nuniform float time;\\nuniform vec2 areaSize;\\n\\nout vec4 color;\\n\\nvoid main() {\\n    vec4 fragment = viewMatrix * gl_FragCoord;\\n    float x = fragment.x;\\n    float y = fragment.y;\\n\\n    float value = mod(floor(x/CHECKER_SIZE) + floor(y/CHECKER_SIZE), 2.0) == 0.0 ? 0.4 : 0.2;\\n    color = vec4(value, value, value, 1);\\n\\n    // x = 100\\n    if (abs(x - 100.0) < 10.0 && abs(y) < 10.0)\\n        color = mix(color, vec4(0, 1, 0, 1), 0.5);\\n\\n    // y = 100\\n    if (abs(x) < 10.0 && abs(y - 100.0) < 10.0)\\n        color = mix(color, vec4(1, 0, 0, 1), 0.5);\\n\\n    if (abs(x) < 10.0 && abs(y) < 10.0)\\n        color = mix(color, vec4(0, 0, 0, 1), 0.5);\\n\\n    if (x < 0.0 || y < 0.0 || x >= areaSize.x || y >= areaSize.y)\\n        color = mix(color, vec4(0, 0, 0, 1), 0.8);\\n}\";","export default \"#version 300 es\\n\\nprecision highp float;\\n\\nconst float CELL_BORDER_WIDTH = 2.0;\\n\\nstruct Cell {\\n    int id;\\n    vec2 center;\\n    vec2 speed;\\n    float mass;\\n    float angle;\\n    float radius;\\n};\\n\\nuniform sampler2D image;\\nuniform vec2 imageSize;\\nuniform mat4 viewMatrix;\\nuniform float time;\\n\\nuniform Cell cell;\\n\\nin vec2 texel;\\nout vec4 color;\\n\\nvec4 previousLayerColor(float x, float y) {\\n    vec2 imagePixelSize = vec2(1.0, 1.0) / imageSize;\\n    return texture(image, vec2(texel.x + x * imagePixelSize.x, texel.y + y * imagePixelSize.y));\\n}\\n\\nvoid main() {\\n    vec4 fragment = viewMatrix * gl_FragCoord;\\n    float x = fragment.x;\\n    float y = fragment.y;\\n\\n    vec2 imagePixelSize = vec2(1.0, 1.0) / imageSize;\\n\\n    vec4 background = texture(image, texel);\\n    vec4 layerColor = vec4(0);\\n\\n    vec4 bodyColor = vec4(1, 1, 1, 0.8);\\n    vec4 borderColor = mix(bodyColor, vec4(0, 0, 0, 1), 0.25);\\n    float centerDistance = sqrt(pow(x - cell.center.x, 2.0) + pow(y - cell.center.y, 2.0));\\n\\n    if (centerDistance < cell.radius){\\n        layerColor = bodyColor;\\n        if (centerDistance > cell.radius - CELL_BORDER_WIDTH)\\n            layerColor = borderColor;\\n    }\\n\\n    color = mix(background, vec4(layerColor.rgb, 1), layerColor.a);\\n}\";","const { sqrt, pow, sin, cos, acos, PI } = Math\n\nexport default class Vector2 {\n    x: number\n    y: number\n\n    constructor(x: number = 0, y: number = 0) {\n        this.x = x\n        this.y = y\n    }\n\n    get length(): number {\n        return sqrt(pow(this.x, 2) + pow(this.y, 2))\n    }\n\n    plus(that: Vector2): Vector2 {\n        return new Vector2(this.x + that.x, this.y + that.y)\n    }\n\n    minus(that: Vector2): Vector2 {\n        return new Vector2(this.x - that.x, this.y - that.y)\n    }\n\n    times(that: Vector2): Vector2 {\n        return new Vector2(this.x * that.y, this.y * that.y)\n    }\n\n    div(that: Vector2): Vector2 {\n        return new Vector2(this.x / that.y, this.x / that.y)\n    }\n\n    get negative(): Vector2 {\n        return new Vector2(-this.x, -this.y)\n    }\n\n    dot(that: Vector2): number {\n        return this.x * that.x + this.y + that.y\n    }\n\n    to(that: Vector2): Vector2 {\n        return that.minus(this)\n    }\n\n    nearest(...vectors: Array<Vector2>): Vector2 {\n        return vectors.reduce((a, b) => this.distance(a) > this.distance(b) ? b : a)\n    }\n\n    /**\n     * This method calculates the shortest turn direction needed\n     * to get from this vector's angle to that vector's angle.\n     * \n     * @returns 1 if direction is counterclockwise, -1 otherwise\n     */\n    shortestAngularTurn(that: Vector2): number {\n        const diff = that.angle - this.angle\n        return (diff < -PI || diff >= 0.0 && diff < PI) ? 1 : -1\n    }\n\n    positiveAngleDiff(that: Vector2): number {\n        return (this.angle - that.angle + 2*PI) % (2*PI)\n    }\n\n    get angle(): number {\n        return this.y > 0 ? 2*PI - acos(this.x/this.length) : acos(this.x/this.length)\n    }\n\n    get angleSafe(): number {\n        return this.length != 0 ? this.angle : 0\n    }\n\n    distance(that: Vector2): number {\n        return sqrt(pow(this.x - that.x, 2) + pow(this.y - that.y, 2))\n    }\n\n    /**\n     * Returns a new vector rotated by given amount of radians.\n     * The positive argument is counterclockwise rotation.\n     */\n    rotate(radians: number): Vector2 {\n        return new Vector2(this.x * cos(radians) - this.y * sin(radians), this.x * sin(radians) + this.y * cos(radians))\n    }\n\n    get unit(): Vector2 {\n        return this.length != 0 ? new Vector2(this.x/this.length, this.y/this.length) : new Vector2()\n    }\n\n    static isNaN(vector: Vector2): boolean {\n        return isNaN(vector.x) || isNaN(vector.y)\n    }\n\n    static unit(radians: number): Vector2 {\n        return new Vector2(cos(radians), sin(radians))\n    }\n\n    static equals(a?: Vector2, b?: Vector2): boolean {\n        if (a == null && b == null)\n            return true\n        if (a == null || b == null)\n            return false\n        return a.x == b.x && a.y == b.y\n    }\n}","import ShaderManager from \"@/gl/ShaderManager\";\nimport { mat4, vec2 } from 'gl-matrix';\n\nimport WorldState from \"@/game/state/WorldState\";\n\nimport commonVertexShaderSource from 'raw-loader!@/shaders/common.vert';\nimport backgroundFragmentShaderSource from 'raw-loader!@/shaders/background.frag';\nimport cellFragmentShaderSource from 'raw-loader!@/shaders/cell.frag';\nimport Vector2 from \"@/geom/Vector2\";\n\nexport default class WorldRenderer {\n    private readonly startTime = Date.now()\n\n    private readonly mainMesh: WebGLBuffer\n    private readonly drawBufferTextureUv: WebGLBuffer\n    private readonly framebuffer: WebGLFramebuffer | null\n\n    private bufferTextureSize: Vector2 = new Vector2()\n    private sourceBufferTexture: WebGLTexture | null = null\n    private targetBufferTexture: WebGLTexture | null = null\n\n    private constructor(\n        private shaderManager: ShaderManager,\n        private backgroundShader: WebGLShader,\n        private cellShader: WebGLShader,\n        private worldState: WorldState\n    ) {\n        this.mainMesh = this.createMainMesh()\n        this.drawBufferTextureUv = this.createDrawBufferTextureUv()\n        this.framebuffer = shaderManager.gl.createFramebuffer()\n        this.autoUpdateDrawBufferTexture()\n    }\n\n    static init(canvas: HTMLCanvasElement, worldState: WorldState): WorldRenderer {\n        const shaderManager = ShaderManager.init(canvas);\n\n        const backgroundShader = shaderManager.newShader(commonVertexShaderSource, backgroundFragmentShaderSource)\n        const cellShader = shaderManager.newShader(commonVertexShaderSource, cellFragmentShaderSource)\n        return new WorldRenderer(shaderManager, backgroundShader, cellShader, worldState)\n    }\n\n    render() {\n        const gl = this.shaderManager.gl\n        gl.clearColor(0, 0, 0, 1)\n        gl.clearDepth(1)\n        gl.enable(gl.DEPTH_TEST)\n        gl.depthFunc(gl.LEQUAL)\n\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT)\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight)\n\n        this.renderBackground()\n        this.renderCells()\n    }\n\n    /**\n     * From world coordinates to screen coordinates\n     */\n    project(worldPoint: vec2): vec2 {\n        const projection = this.buildCameraTransform()\n        const inverted = mat4.invert(projection, projection)\n        return vec2.transformMat4(vec2.create(), worldPoint, inverted)\n    }\n\n    /**\n     * From screen coordinates to world coordinates\n     */\n    unproject(screenPoint: vec2): vec2 {\n        return vec2.transformMat4(vec2.create(), screenPoint, this.buildCameraTransform())\n    }\n\n    private renderCells() {\n        const gl = this.shaderManager.gl\n        gl.useProgram(this.cellShader)\n\n        const vertexAttributeLoc = gl.getAttribLocation(this.cellShader, 'vertexPosition')\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.mainMesh)\n        gl.vertexAttribPointer(vertexAttributeLoc, 2, gl.FLOAT, false, 0, 0)\n        gl.enableVertexAttribArray(vertexAttributeLoc)\n\n        const viewMatrix = this.buildViewTransform()\n        gl.uniformMatrix4fv(gl.getUniformLocation(this.cellShader, 'viewMatrix'), false, viewMatrix)\n        gl.uniform1f(gl.getUniformLocation(this.cellShader, 'time'), (Date.now() - this.startTime)/1000)\n\n        gl.uniform2f(gl.getUniformLocation(this.cellShader, 'imageSize'), this.bufferTextureSize.x, this.bufferTextureSize.y)\n\n        for (const [index, cell] of this.worldState.cells) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer)\n            gl.bindTexture(gl.TEXTURE_2D, this.sourceBufferTexture)\n            gl.uniform1i(gl.getUniformLocation(this.cellShader, 'image'), 0)\n\n            gl.uniform1i(gl.getUniformLocation(this.cellShader, 'cell.id'), cell.id)\n            gl.uniform2f(gl.getUniformLocation(this.cellShader, 'cell.center'), cell.center.x, cell.center.y)\n            gl.uniform2f(gl.getUniformLocation(this.cellShader, 'cell.speed'), cell.speed.x, cell.speed.y)\n            gl.uniform1f(gl.getUniformLocation(this.cellShader, 'cell.mass'), cell.mass)\n            gl.uniform1f(gl.getUniformLocation(this.cellShader, 'cell.angle'), cell.angle)\n            gl.uniform1f(gl.getUniformLocation(this.cellShader, 'cell.radius'), cell.radius)\n\n            if (index == this.worldState.cells.size - 1)\n                this.setDrawToCanvas()\n            else\n                this.setDrawToBufferTexture()\n\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\n\n            this.swapBuffers()\n        }\n    }\n\n    private renderBackground() {\n        const gl = this.shaderManager.gl\n        gl.useProgram(this.backgroundShader)\n\n        const vertexAttributeLoc = gl.getAttribLocation(this.backgroundShader, 'vertexPosition')\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.mainMesh)\n        gl.vertexAttribPointer(vertexAttributeLoc, 2, gl.FLOAT, false, 0, 0)\n        gl.enableVertexAttribArray(vertexAttributeLoc)\n\n        const textureCoordinateLoc = gl.getAttribLocation(this.backgroundShader, 'textureCoordinate')\n        gl.enableVertexAttribArray(textureCoordinateLoc)\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.drawBufferTextureUv)\n        gl.vertexAttribPointer(textureCoordinateLoc, 2, gl.FLOAT, false, 0, 0)\n\n        const viewMatrix = this.buildViewTransform()\n        gl.uniformMatrix4fv(gl.getUniformLocation(this.backgroundShader, 'viewMatrix'), false, viewMatrix)\n        gl.uniform1f(gl.getUniformLocation(this.backgroundShader, 'time'), (Date.now() - this.startTime)/1000)\n        gl.uniform2f(gl.getUniformLocation(this.backgroundShader, 'areaSize'), this.worldState.width, this.worldState.height)\n\n        this.setDrawToBufferTexture()\n\n        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4)\n\n        this.swapBuffers()\n    }\n\n    private buildCameraTransform(): mat4 {\n        const canvasWidth = this.shaderManager.gl.canvas.width\n        const canvasHeight = this.shaderManager.gl.canvas.height\n\n        const result = mat4.create()\n        const camera = this.worldState.camera\n        const scale = camera.height/canvasHeight\n        mat4.scale(result, result, [scale, scale, 1])\n        mat4.translate(result, result, [camera.center.x/scale - canvasWidth/2, camera.center.y/scale - canvasHeight/2, 0])\n        return result\n    }\n\n    private buildViewTransform(): mat4 {\n        const canvasHeight = this.shaderManager.gl.canvas.height\n\n        const result = this.buildCameraTransform()\n        mat4.scale(result, result, [1, -1, 1])\n        mat4.translate(result, result, [0, -canvasHeight, 0])\n        return result\n    }\n\n    private autoUpdateDrawBufferTexture() {\n        if (this.drawBufferTextureNeedsUpdate()) {\n            const gl = this.shaderManager.gl\n\n            gl.deleteTexture(this.sourceBufferTexture)\n            gl.deleteTexture(this.targetBufferTexture)\n\n            const width = this.shaderManager.gl.drawingBufferWidth\n            const height = this.shaderManager.gl.drawingBufferHeight\n\n            this.sourceBufferTexture = this.shaderManager.newTexture(width, height)\n            this.targetBufferTexture = this.shaderManager.newTexture(width, height)\n\n            this.bufferTextureSize = new Vector2(width, height)\n        }\n    }\n\n    private drawBufferTextureNeedsUpdate(): boolean {\n        return  this.bufferTextureSize.x != this.shaderManager.gl.drawingBufferWidth ||\n                this.bufferTextureSize.y != this.shaderManager.gl.drawingBufferHeight\n    }\n\n    private setDrawToBufferTexture() {\n        this.autoUpdateDrawBufferTexture()\n        const gl = this.shaderManager.gl\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.targetBufferTexture, 0)\n    }\n\n    private setDrawToCanvas() {\n        this.shaderManager.gl.bindFramebuffer(this.shaderManager.gl.FRAMEBUFFER, null);\n    }\n\n    private swapBuffers() {\n        const swap = this.sourceBufferTexture\n        this.sourceBufferTexture = this.targetBufferTexture\n        this.targetBufferTexture = swap\n    }\n\n    private createDrawBufferTextureUv() {\n        return this.shaderManager.newArrayBuffer([\n            1.0,  1.0,\n            0.0,  1.0,\n            1.0,  0.0,\n            0.0,  0.0,\n        ])\n    }\n\n    private createMainMesh(): WebGLBuffer {\n        return this.shaderManager.newArrayBuffer([\n            1.0, 1.0,\n            -1.0, 1.0,\n            1.0, -1.0,\n            -1.0, -1.0\n        ])\n    }\n}","export default class WorldMouseEvent {\n    constructor(\n        type: string,\n        screenX: number,\n        screenY: number,\n        worldX: number,\n        worldY: number\n    ) {}\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { withModifiers as _withModifiers, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"onWheel\"]\n\nimport { ref, inject, onMounted, Ref } from 'vue';\nimport WorldState from \"@/game/state/WorldState\";\nimport WorldRenderer from \"@/render/WorldRenderer\";\nimport WorldMouseEvent from \"@/game/event/WorldMouseEvent\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'WorldViewer',\n  setup(__props, { emit }: { emit: ({(e: string, payload: WorldMouseEvent): void}), expose: any, slots: any, attrs: any }) {\n\nconst SCROLL_SENSITIVITY = 0.005\n\nconst canvasRef = ref<HTMLCanvasElement>()\nconst containerRef = ref<HTMLDivElement>()\n\n\n\nlet worldState: Ref<WorldState> = inject('worldState')!\nlet canvas: HTMLCanvasElement\nlet container: HTMLDivElement\nlet renderer: WorldRenderer\n\nconst dragging = {\n  dragMode: false,\n  lastMouseWorldPoint: [0, 0]\n}\n\nonMounted(init)\n\nfunction init() {\n  canvas = canvasRef.value!\n  container = containerRef.value!\n  renderer = WorldRenderer.init(canvas, worldState.value)\n  new ResizeObserver(onCanvasResize).observe(container)\n  renderingRoutine();\n}\n\nfunction onWheel(event: WheelEvent) {\n  const camera = worldState.value.camera\n  if (event.deltaY > 0)\n    camera.height *= 1 + event.deltaY*SCROLL_SENSITIVITY\n  else\n    camera.height *= 1/(1 - event.deltaY*SCROLL_SENSITIVITY)\n  if (camera.height < 1)\n    camera.height = 1\n}\n\nfunction onMouseEvent(event: MouseEvent) {\n  const dps = window.devicePixelRatio\n  const [ screenX, screenY ] = [event.x * dps, event.y * dps]\n  let [ worldX, worldY ] = renderer.unproject([screenX, screenY])\n\n  if (event.type === 'mousedown') {\n    dragging.dragMode = true\n    dragging.lastMouseWorldPoint = [ worldX, worldY ]\n  }\n\n  if (event.type === 'mousemove' && dragging.dragMode) {\n    const [ prevX, prevY ] = dragging.lastMouseWorldPoint\n    worldState.value.camera.center.x += prevX - worldX\n    worldState.value.camera.center.y += prevY - worldY;\n    [ worldX, worldY ] = renderer.unproject([screenX, screenY])\n    dragging.lastMouseWorldPoint = [ worldX, worldY ]\n  }\n\n  if (event.type === 'mouseup' || event.type === 'mouseleave')\n    dragging.dragMode = false\n\n  emit(`world-${event.type}`, new WorldMouseEvent(`world-${event.type}`, screenX, screenY, worldX, worldY))\n}\n\nfunction renderingRoutine() {\n  renderer.render()\n  window.requestAnimationFrame(renderingRoutine)\n}\n\nfunction onCanvasResize() {\n  const dpr = window.devicePixelRatio;\n  const { width, height } = container.getBoundingClientRect();\n  canvas.width = Math.round(width * dpr);\n  canvas.height = Math.round(height * dpr);\n  renderer.render()\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"viewer-wr\",\n    ref_key: \"containerRef\",\n    ref: containerRef\n  }, [\n    _createElementVNode(\"canvas\", {\n      class: \"canvas\",\n      ref_key: \"canvasRef\",\n      ref: canvasRef,\n      onClick: onMouseEvent,\n      onMousedown: onMouseEvent,\n      onMouseup: onMouseEvent,\n      onMousemove: onMouseEvent,\n      onMouseleave: onMouseEvent,\n      onWheel: _withModifiers(onWheel, [\"prevent\"])\n    }, null, 40, _hoisted_1)\n  ], 512))\n}\n}\n\n})","import script from \"./WorldViewer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WorldViewer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WorldViewer.vue?vue&type=style&index=0&id=3e81968a&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-98703540\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"tabbed-panel-wr\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = { class: \"body\" }\n\nimport { ref, provide } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesTabbedPanel',\n  setup(__props) {\n\nconst activeTabName = ref<string | null>(null)\nconst minWidth = 320\n\nlet dragStartX = 0\nconst oldWidth = ref(300)\nconst width = ref(oldWidth.value)\n\nprovide('activeTabName', activeTabName)\n\nfunction onHandleDragStart(event: DragEvent) {\n  dragStartX = event.clientX\n  initHandleDragging()\n}\n\nfunction initHandleDragging() {\n  window.addEventListener('mousemove', onHandleDrag);\n  window.addEventListener('mouseleave', stopHandleDragging);\n  window.addEventListener('mouseup', stopHandleDragging);\n}\n\nfunction onHandleDrag(event: MouseEvent) {\n  if (event.screenX === 0)\n    return\n  let offset = dragStartX - event.clientX\n  width.value = oldWidth.value + offset\n  if (width.value < minWidth)\n    width.value = minWidth\n}\n\nfunction stopHandleDragging() {\n  oldWidth.value = width.value\n  window.removeEventListener('mousemove', onHandleDrag);\n  window.removeEventListener('mouseleave', stopHandleDragging);\n  window.removeEventListener('mouseup', stopHandleDragging);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"tabbed-panel\",\n      draggable: \"false\",\n      style: _normalizeStyle({ width: `${width.value}px`, minWidth: `${minWidth}px` })\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _renderSlot(_ctx.$slots, \"tabs\")\n      ]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _renderSlot(_ctx.$slots, \"bodies\"),\n        _createElementVNode(\"div\", {\n          class: \"resize-handle\",\n          onMousedown: onHandleDragStart\n        }, null, 32)\n      ])\n    ], 4)\n  ]))\n}\n}\n\n})","import script from \"./PropertiesTabbedPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesTabbedPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PropertiesTabbedPanel.vue?vue&type=style&index=0&id=98703540&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-98703540\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderSlot as _renderSlot, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { inject, Ref } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesTab',\n  props: ['name'],\n  setup(__props) {\n\nconst props = __props;\n\n\nconst activeTabName = inject('activeTabName') as Ref<string | null>\n\nfunction onClick() {\n  if (activeTabName.value == props.name)\n    activeTabName.value = null\n  else\n    activeTabName.value = props.name\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"button\", {\n    class: _normalizeClass([\"button\", { active: _unref(activeTabName) === __props.name }]),\n    onClick: onClick\n  }, [\n    _renderSlot(_ctx.$slots, \"default\")\n  ], 2))\n}\n}\n\n})","import script from \"./PropertiesTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PropertiesTab.vue?vue&type=style&index=0&id=a7a5af26&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a7a5af26\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ToolButton',\n  props: ['active'],\n  setup(__props) {\n\nconst props = __props;\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"button\", {\n    class: _normalizeClass([\"button\", { active: __props.active }])\n  }, [\n    _renderSlot(_ctx.$slots, \"default\")\n  ], 2))\n}\n}\n\n})","import script from \"./ToolButton.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ToolButton.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ToolButton.vue?vue&type=style&index=0&id=9870f248&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9870f248\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"body-wr\"\n}\n\nimport { inject, ref } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesTabBody',\n  props: ['name'],\n  setup(__props) {\n\nconst props = __props;\n\n\nconst activeTabName = inject('activeTabName', ref(null))\n\nreturn (_ctx: any,_cache: any) => {\n  return (_unref(activeTabName) === props.name)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _renderSlot(_ctx.$slots, \"default\")\n      ]))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})","import script from \"./PropertiesTabBody.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesTabBody.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-3ab760ea\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"section-wr\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"section-title\"\n}\nconst _hoisted_3 = { class: \"section-content\" }\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesSection',\n  props: ['title'],\n  setup(__props) {\n\nconst props = __props;\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (props.title)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString(props.title), 1))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _renderSlot(_ctx.$slots, \"default\")\n    ])\n  ]))\n}\n}\n\n})","import script from \"./PropertiesSection.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesSection.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PropertiesSection.vue?vue&type=style&index=0&id=3ab760ea&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3ab760ea\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-94fe77ba\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"slider-container\" }\nconst _hoisted_2 = [\"min\", \"max\", \"step\"]\n\nimport { ref, watch } from \"vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Slider',\n  props: ['min', 'max', 'step', 'modelValue'],\n  emits: ['update:modelValue'],\n  setup(__props, { emit }) {\n\nconst props = __props;\n\n\n\nconst value = ref<number>(0)\n\nwatch(props, () => {\n  value.value = props.modelValue\n})\n\nwatch(value, () => {\n  emit(\"update:modelValue\", value.value)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"input\", {\n      class: \"slider-input\",\n      type: \"range\",\n      min: __props.min,\n      max: __props.max,\n      step: __props.step,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((value).value = $event))\n    }, null, 8, _hoisted_2), [\n      [_vModelText, value.value]\n    ])\n  ]))\n}\n}\n\n})","import script from \"./Slider.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Slider.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Slider.vue?vue&type=style&index=0&id=94fe77ba&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-94fe77ba\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-343a09b9\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"slider-with-number-input-wr\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"label\"\n}\nconst _hoisted_3 = { class: \"slider-with-number-input\" }\n\nimport { ref, watch } from \"vue\";\nimport Slider from \"@/components/input/Slider.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SliderWithNumberInput',\n  props: ['min', 'max', 'step', 'modelValue', 'label'],\n  emits: ['update:modelValue'],\n  setup(__props, { emit }) {\n\nconst props = __props;\n\n\n\nconst textInput = ref<HTMLInputElement>()\nconst value = ref<number>(0)\n\nwatch(props, () => {\n  value.value = props.modelValue\n})\n\nwatch(value, () => {\n  emit(\"update:modelValue\", value.value)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (__props.label)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString(__props.label), 1))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createVNode(Slider, {\n        class: \"slider\",\n        min: __props.min,\n        max: __props.max,\n        step: __props.step,\n        modelValue: value.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((value).value = $event))\n      }, null, 8, [\"min\", \"max\", \"step\", \"modelValue\"]),\n      _withDirectives(_createElementVNode(\"input\", {\n        class: \"text-input\",\n        type: \"text\",\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((value).value = $event)),\n        ref_key: \"textInput\",\n        ref: textInput,\n        onFocus: _cache[2] || (_cache[2] = ($event: any) => (textInput.value.select())),\n        onKeydown: [\n          _cache[3] || (_cache[3] = _withKeys(($event: any) => (textInput.value.blur()), [\"enter\"])),\n          _cache[4] || (_cache[4] = _withKeys(($event: any) => (textInput.value.blur()), [\"esc\"]))\n        ]\n      }, null, 544), [\n        [_vModelText, value.value]\n      ])\n    ])\n  ]))\n}\n}\n\n})","import script from \"./SliderWithNumberInput.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SliderWithNumberInput.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SliderWithNumberInput.vue?vue&type=style&index=0&id=343a09b9&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-343a09b9\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { inject, reactive, watch, Ref } from \"vue\";\n\nimport WorldState from \"@/game/state/WorldState\";\n\nimport PropertiesTabBody from \"@/components/properties/PropertiesTabBody.vue\";\nimport PropertiesSection from \"@/components/properties/PropertiesSection.vue\";\nimport SliderWithNumberInput from \"@/components/input/SliderWithNumberInput.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'WorldSettingsTabBody',\n  props: ['name'],\n  setup(__props) {\n\nconst props = __props;\n\n\nconst worldState = inject('worldState') as Ref<WorldState>\nconst inputs = reactive({\n  viscosity: 0\n})\n\nwatch(inputs, () => {\n  worldState.value.viscosity = inputs.viscosity\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(PropertiesTabBody, {\n    name: props.name\n  }, {\n    default: _withCtx(() => [\n      _createVNode(PropertiesSection, { title: \"World settings\" }, {\n        default: _withCtx(() => [\n          _createVNode(SliderWithNumberInput, {\n            class: \"slider-input\",\n            label: \"Viscosity\",\n            min: \"0\",\n            max: \"2\",\n            step: \"0.001\",\n            modelValue: inputs.viscosity,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((inputs.viscosity) = $event))\n          }, null, 8, [\"modelValue\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"name\"]))\n}\n}\n\n})","import script from \"./WorldSettingsTabBody.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WorldSettingsTabBody.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WorldSettingsTabBody.vue?vue&type=style&index=0&id=543a8686&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-543a8686\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport PropertiesTabBody from \"@/components/properties/PropertiesTabBody.vue\";\nimport PropertiesSection from \"@/components/properties/PropertiesSection.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomeEditorTabBody',\n  props: ['name'],\n  setup(__props) {\n\nconst props = __props;\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(PropertiesTabBody, { name: __props.name }, {\n    default: _withCtx(() => [\n      _createVNode(PropertiesSection, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\" GENOME EDITOR \")\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"name\"]))\n}\n}\n\n})","import script from \"./GenomeEditorTabBody.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomeEditorTabBody.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-77428572\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"controls-panel\" }\nconst _hoisted_2 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"properties-tab-icon\",\n  src: \"/icons/settings.svg\",\n  alt: \"icon\"\n}, null, -1))\nconst _hoisted_3 = { class: \"tool-buttons-container\" }\n\nimport { inject } from \"vue\";\nimport PropertiesTabbedPanel from \"@/components/properties/PropertiesTabbedPanel.vue\";\nimport PropertiesTab from \"@/components/properties/PropertiesTab.vue\";\nimport ToolsManager from \"@/game/tool/ToolsManager\";\nimport ToolButton from \"@/components/ToolButton.vue\";\nimport WorldSettingsTabBody from \"@/components/properties/WorldSettingsTabBody.vue\";\nimport GenomeEditorTabBody from \"@/components/properties/GenomeEditorTabBody.vue\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ControlsPanel',\n  setup(__props) {\n\nconst toolsManager = inject('toolsManager') as ToolsManager;\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(PropertiesTabbedPanel, { class: \"properties-container\" }, {\n      tabs: _withCtx(() => [\n        _createVNode(PropertiesTab, {\n          class: \"properties-tab\",\n          name: \"genome-editor\"\n        }),\n        _createVNode(PropertiesTab, {\n          class: \"properties-tab\",\n          name: \"settings\"\n        }, {\n          default: _withCtx(() => [\n            _hoisted_2\n          ]),\n          _: 1\n        })\n      ]),\n      bodies: _withCtx(() => [\n        _createVNode(GenomeEditorTabBody, { name: \"genome-editor\" }),\n        _createVNode(WorldSettingsTabBody, { name: \"settings\" })\n      ]),\n      _: 1\n    }),\n    _createElementVNode(\"div\", _hoisted_3, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(toolsManager).tools, (tool) => {\n        return (_openBlock(), _createBlock(ToolButton, {\n          class: \"tool-button\",\n          key: tool.id,\n          active: _unref(toolsManager).currentTool === tool,\n          onClick: ($event: any) => (_unref(toolsManager).currentTool = tool)\n        }, null, 8, [\"active\", \"onClick\"]))\n      }), 128))\n    ])\n  ]))\n}\n}\n\n})","import script from \"./ControlsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ControlsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ControlsPanel.vue?vue&type=style&index=0&id=77428572&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/davdav2/Desktop/cybercells/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-77428572\"]])\n\nexport default __exports__","enum CellType {\n    PHAGOCYTE,\n    FLAGELLOCYTE\n}\n\nexport default CellType","import Genome from \"@/game/Genome\";\n\nexport default class GenomeLibrary {\n    entries: Set<GenomeLibraryEntry> = new Set()\n\n    search(query: string): Set<GenomeLibraryEntry> {\n        const result = new Set<GenomeLibraryEntry>()\n        this.entries.forEach( entry => {\n            if (entry.name.toLowerCase().includes(query.toLowerCase()))\n                result.add(entry)\n        })\n        return result\n    }\n}\n\nexport class GenomeLibraryEntry {\n    constructor(\n        public name: string,\n        public genome: Genome\n    ) {}\n}","import Vector2 from \"@/geom/Vector2\";\nimport Genome from \"@/game/Genome\";\n\nexport default class CellState implements WorldObject {\n    id = -1\n\n    constructor(\n        public center: Vector2,\n        public speed: Vector2,\n        public mass: number,\n        public angle: number,\n        public angularSpeed: number,\n        public genome: Genome,\n    ) {}\n\n    connections: Map<number, CellConnectionState> = new Map()\n    age: number = 0\n\n    public get radius() {\n        return Math.sqrt(this.mass)\n    }\n}\n\nclass CellConnectionState {\n    constructor(public angle: number, public partnerId: number) {}\n}","import CellType from \"@/game/CellType\";\n\nexport default class Genome {\n    type: CellType = CellType.FLAGELLOCYTE\n    cyanPigment: number = 0\n    magentaPigment: number = 0\n    yellowPigment: number = 0\n    hardness: number = 0.6\n    splitMass: number = 350\n    splitAngle: number = 0\n    child1Angle: number = 0\n    child2Angle: number = 0\n    stickOnSplit: boolean = false\n    child1KeepConnections: boolean = true\n    child2KeepConnections: boolean = true\n    nutritionPriority: number = 0.5\n\n    flagellumForce: number = 8\n\n    children: [Genome, Genome] = [this, this]\n\n    deepCopy = this.copyRecursive\n\n    applyRadiation() {\n        // TODO\n    }\n\n    private copyRecursive(copies: Map<Genome, Genome> = new Map().set(null, null)): Genome {\n        const result = new Genome()\n        result.type = this.type\n        result.cyanPigment = this.cyanPigment\n        result.magentaPigment = this.magentaPigment\n        result.yellowPigment = this.yellowPigment\n        result.hardness = this.hardness\n        result.splitMass = this.splitMass\n        result.splitAngle = this.splitAngle\n        result.child1Angle = this.child1Angle\n        result.child2Angle = this.child2Angle\n        result.stickOnSplit = this.stickOnSplit\n        result.child1KeepConnections = this.child1KeepConnections\n        result.child2KeepConnections = this.child2KeepConnections\n        result.nutritionPriority = this.nutritionPriority\n        result.flagellumForce = this.flagellumForce\n        copies.set(this, result)\n\n        result.children = [\n            copies.has(this.children[0]) ? copies.get(this.children[0])! : this.children[0].copyRecursive(copies),\n            copies.has(this.children[1]) ? copies.get(this.children[1])! : this.children[1].copyRecursive(copies)\n        ]\n\n        return result\n    }\n\n    private findAllGenomes(): Set<Genome> {\n        const stash = new Array<Genome>()\n        const result = new Set<Genome>()\n        while (stash.length != 0) {\n            stash.pop()!!.children.forEach((element: Genome) => {\n                if (!result.has(element)) {\n                    stash.push(element)\n                    result.add(element)\n                }\n            });\n        }\n        return result\n    }\n\n    private applyRadiationRecursive() {\n        // TODO\n    }\n}","import Vector2 from \"@/geom/Vector2\";\n\nexport default class Camera {\n    constructor(\n        public center: Vector2,\n        public height: number\n    ) {}\n\n    static NULL = new Camera(new Vector2(), 0)\n}","import Vector2 from \"@/geom/Vector2\";\nimport FoodState from \"@/game/state/FoodState\";\nimport CellState from \"@/game/state/CellState\";\nimport WallState from \"@/game/state/WallState\";\nimport Genome from \"@/game/Genome\";\nimport Camera from \"@/game/Camera\";\n\nexport default class WorldState {\n    constructor(\n        public width: number,\n        public height: number,\n        public gravity: Vector2,\n        public viscosity: number,\n        public radiation: number,\n        public camera: Camera = Camera.NULL\n    ) {}\n\n    public food: Map<number, FoodState> = new Map()\n    public cells: Map<number, CellState> = new Map()\n    public walls: Map<number, WallState> = new Map()\n\n    static NULL = new WorldState(0, 0, new Vector2(), 0, 0)\n\n    static TEMPORARY_DEBUG = (() => {\n        const state = new WorldState(800, 600, new Vector2(), 0, 0, new Camera(new Vector2(0, 0), 800))\n        const genome = new Genome()\n        state.cells.set(0, new CellState(new Vector2(50, 50), new Vector2(), 400, 0, 0, genome))\n        state.cells.set(1, new CellState(new Vector2(200, 120), new Vector2(), 400, 0, 0, genome))\n        return state\n    })()\n}","export default class AppPreferences {\n    // Nothing here so far...\n}","import WorldMouseEvent from \"@/game/event/WorldMouseEvent\";\nimport Tool from \"@/game/tool/Tool\";\nimport WorldState from \"@/game/state/WorldState\";\n\nexport default class ToolsManager {\n\n    public currentTool: Tool\n\n    constructor(\n        public tools: Tool[],\n        private world: WorldState\n    ) {\n        tools.forEach(tool => tool.init(this))\n        this.currentTool = tools[0]\n    }\n\n    dispatchEvent(event: WorldMouseEvent) {\n        // TODO\n    }\n}","import Tool from \"@/game/tool/Tool\";\nimport ToolsManager from \"@/game/tool/ToolsManager\";\n\nexport default class AddCellTool implements Tool {\n    private toolsManager: ToolsManager | null = null;\n\n    init(toolsManager: ToolsManager) {\n        this.toolsManager = toolsManager\n    }\n\n    onSelect() {\n\n    }\n\n    onUnselect() {\n\n    }\n}","import Tool from \"@/game/tool/Tool\";\nimport ToolsManager from \"@/game/tool/ToolsManager\";\n\nexport default class RemoveCellTool implements Tool {\n    init(toolsManager: ToolsManager) {}\n\n    onSelect() {}\n\n    onUnselect() {}\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { provide, ref } from \"vue\";\n\nimport WorldViewer from \"@/components/WorldViewer.vue\";\nimport ControlsPanel from \"@/components/ControlsPanel.vue\";\nimport GenomeLibrary from \"@/game/GenomeLibrary\";\nimport WorldState from \"@/game/state/WorldState\";\nimport AppPreferences from \"@/AppPreferences\";\nimport ToolsManager from \"@/game/tool/ToolsManager\";\nimport AddCellTool from \"@/game/tool/AddCellTool\";\nimport RemoveCellTool from \"@/game/tool/RemoveCellTool\";\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\nconst tools = [ new AddCellTool(), new RemoveCellTool() ]\nconst worldState = WorldState.TEMPORARY_DEBUG\n\nprovide('worldState', ref<WorldState>(worldState))\nprovide('genomeLibrary', ref<GenomeLibrary>(new GenomeLibrary()))\nprovide('appPreferences', ref<AppPreferences>(new AppPreferences()))\nprovide('toolsManager', ref(new ToolsManager(tools, worldState)))\n\n// todo provide updater\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(WorldViewer, { class: \"area-viewer\" }),\n    _createVNode(ControlsPanel, { class: \"controls-panel\" })\n  ], 64))\n}\n}\n\n})","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=0c38c4d5&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkcybercells\"] = self[\"webpackChunkcybercells\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(620); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["ShaderManager","constructor","gl","static","canvas","getContext","powerPreference","Error","newShader","vertexShaderSource","fragmentShaderSource","vertexShader","this","loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","newTexture","width","height","texture","createTexture","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","newArrayBuffer","data","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","sqrt","pow","sin","cos","acos","PI","Math","Vector2","x","y","length","plus","that","minus","times","div","negative","dot","to","nearest","vectors","reduce","a","b","distance","shortestAngularTurn","diff","angle","positiveAngleDiff","angleSafe","rotate","radians","unit","vector","isNaN","WorldRenderer","shaderManager","backgroundShader","cellShader","worldState","Date","now","mainMesh","createMainMesh","drawBufferTextureUv","createDrawBufferTextureUv","framebuffer","createFramebuffer","autoUpdateDrawBufferTexture","init","commonVertexShaderSource","backgroundFragmentShaderSource","cellFragmentShaderSource","render","clearColor","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","viewport","drawingBufferWidth","drawingBufferHeight","renderBackground","renderCells","project","worldPoint","projection","buildCameraTransform","inverted","mat4","vec2","unproject","screenPoint","useProgram","vertexAttributeLoc","getAttribLocation","vertexAttribPointer","FLOAT","enableVertexAttribArray","viewMatrix","buildViewTransform","uniformMatrix4fv","getUniformLocation","uniform1f","startTime","uniform2f","bufferTextureSize","index","cell","cells","bindFramebuffer","FRAMEBUFFER","sourceBufferTexture","uniform1i","id","center","speed","mass","radius","size","setDrawToCanvas","setDrawToBufferTexture","drawArrays","TRIANGLE_STRIP","swapBuffers","textureCoordinateLoc","canvasWidth","canvasHeight","result","camera","scale","drawBufferTextureNeedsUpdate","deleteTexture","targetBufferTexture","framebufferTexture2D","COLOR_ATTACHMENT0","swap","WorldMouseEvent","screenX","screenY","worldX","worldY","_hoisted_1","_defineComponent","__name","setup","__props","emit","SCROLL_SENSITIVITY","canvasRef","ref","containerRef","container","renderer","inject","dragging","dragMode","lastMouseWorldPoint","value","ResizeObserver","onCanvasResize","observe","renderingRoutine","onWheel","event","deltaY","onMouseEvent","dps","window","devicePixelRatio","prevX","prevY","requestAnimationFrame","dpr","getBoundingClientRect","round","onMounted","_ctx","_cache","_openBlock","_createElementBlock","class","ref_key","_createElementVNode","onClick","onMousedown","onMouseup","onMousemove","onMouseleave","_withModifiers","__exports__","_hoisted_2","_hoisted_3","activeTabName","minWidth","dragStartX","oldWidth","onHandleDragStart","clientX","initHandleDragging","addEventListener","onHandleDrag","stopHandleDragging","offset","removeEventListener","provide","draggable","style","_normalizeStyle","_renderSlot","$slots","props","name","_normalizeClass","active","_unref","key","_createCommentVNode","title","_toDisplayString","emits","watch","modelValue","_withDirectives","min","max","step","$event","_vModelText","textInput","label","_createVNode","Slider","onFocus","select","onKeydown","_withKeys","blur","inputs","reactive","viscosity","_createBlock","PropertiesTabBody","default","_withCtx","PropertiesSection","SliderWithNumberInput","_","_createTextVNode","_withScopeId","n","_pushScopeId","_popScopeId","src","alt","toolsManager","PropertiesTabbedPanel","tabs","PropertiesTab","bodies","GenomeEditorTabBody","WorldSettingsTabBody","_Fragment","_renderList","tools","tool","ToolButton","currentTool","CellType","GenomeLibrary","Set","search","query","entries","forEach","entry","toLowerCase","includes","add","CellState","angularSpeed","genome","Map","Genome","copyRecursive","applyRadiation","copies","set","cyanPigment","magentaPigment","yellowPigment","hardness","splitMass","splitAngle","child1Angle","child2Angle","stickOnSplit","child1KeepConnections","child2KeepConnections","nutritionPriority","flagellumForce","children","has","get","findAllGenomes","stash","Array","pop","element","push","applyRadiationRecursive","Camera","WorldState","gravity","radiation","NULL","state","AppPreferences","ToolsManager","world","dispatchEvent","AddCellTool","onSelect","onUnselect","RemoveCellTool","TEMPORARY_DEBUG","WorldViewer","ControlsPanel","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","splice","r","d","definition","o","defineProperty","enumerable","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}