{"version":3,"file":"js/app.f043f8c7.js","mappings":"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","sources":["webpack://cybercells/./src/util/ColorUtil.ts","webpack://cybercells/./src/geom/Vector2.ts","webpack://cybercells/./src/game/world/object/Food.ts","webpack://cybercells/./src/game/world/object/Cell.ts","webpack://cybercells/./src/game/world/object/Wall.ts","webpack://cybercells/./src/game/CellType.ts","webpack://cybercells/./src/geom/KdTree.ts","webpack://cybercells/./src/game/Genome.ts","webpack://cybercells/./src/game/Camera.ts","webpack://cybercells/./src/geom/Geometry.ts","webpack://cybercells/./src/game/world/CollisionSystem.ts","webpack://cybercells/./src/game/world/World.ts","webpack://cybercells/./src/geom/TransformMatrix.ts","webpack://cybercells/./src/render/Renderer.ts","webpack://cybercells/./src/game/event/WorldMouseEvent.ts","webpack://cybercells/./src/component/WorldViewer.vue?b6c6","webpack://cybercells/./src/component/WorldViewer.vue","webpack://cybercells/./src/component/properties/PropertiesTabbedPanel.vue?3591","webpack://cybercells/./src/component/properties/PropertiesTabbedPanel.vue","webpack://cybercells/./src/component/HudButton.vue?c952","webpack://cybercells/./src/component/HudButton.vue","webpack://cybercells/./src/component/properties/PropertiesTab.vue?d676","webpack://cybercells/./src/component/properties/PropertiesTab.vue","webpack://cybercells/./src/component/properties/PropertiesTabBody.vue?2f09","webpack://cybercells/./src/component/properties/PropertiesTabBody.vue","webpack://cybercells/./src/component/properties/PropertiesSection.vue?1a5d","webpack://cybercells/./src/component/properties/PropertiesSection.vue","webpack://cybercells/./src/component/input/NumberSlider.vue?bb1e","webpack://cybercells/./src/component/input/NumberSlider.vue","webpack://cybercells/./src/component/input/SliderWithNumberInput.vue?7062","webpack://cybercells/./src/component/input/SliderWithNumberInput.vue","webpack://cybercells/./src/component/input/InputLabel.vue","webpack://cybercells/./src/component/input/InputLabel.vue?e8ad","webpack://cybercells/./src/component/WorldSettings.vue?daf4","webpack://cybercells/./src/component/WorldSettings.vue","webpack://cybercells/./src/component/genome/CellGenomePreview.vue?bc20","webpack://cybercells/./src/component/genome/CellGenomePreview.vue","webpack://cybercells/./src/component/genome/GenomeSelector.vue?f571","webpack://cybercells/./src/component/genome/GenomeSelector.vue","webpack://cybercells/./src/component/properties/PropertiesSubheader.vue","webpack://cybercells/./src/component/properties/PropertiesSubheader.vue?130a","webpack://cybercells/./src/component/genome/GenomePigmentColorDropletIcon.vue?210e","webpack://cybercells/./src/component/genome/GenomePigmentColorDropletIcon.vue","webpack://cybercells/./src/component/genome/GenomePigmentsEditor.vue?681e","webpack://cybercells/./src/component/genome/GenomePigmentsEditor.vue","webpack://cybercells/./src/component/genome/CellSplitPreview.vue?7411","webpack://cybercells/./src/component/genome/CellSplitPreview.vue","webpack://cybercells/./src/component/input/Checkbox.vue?d66b","webpack://cybercells/./src/component/input/Checkbox.vue","webpack://cybercells/./src/component/genome/GenomeChildrenEditor.vue?34e3","webpack://cybercells/./src/component/genome/GenomeChildrenEditor.vue","webpack://cybercells/./src/component/genome/GenomeEditor.vue?1405","webpack://cybercells/./src/component/genome/GenomeEditor.vue","webpack://cybercells/./src/component/genome/GenomeLibraryEditor.vue?f406","webpack://cybercells/./src/component/genome/GenomeLibraryEditor.vue","webpack://cybercells/./src/component/TimeControl.vue?2009","webpack://cybercells/./src/component/TimeControl.vue","webpack://cybercells/./src/tool/AddCellTool.ts","webpack://cybercells/./src/component/properties/tool/AddCellToolProperties.vue?6ca4","webpack://cybercells/./src/component/properties/tool/AddCellToolProperties.vue","webpack://cybercells/./src/component/HudPanel.vue?62d3","webpack://cybercells/./src/component/HudPanel.vue","webpack://cybercells/./src/game/GenomeLibrary.ts","webpack://cybercells/./src/AppPreferences.ts","webpack://cybercells/./src/tool/ToolsManager.ts","webpack://cybercells/./src/tool/RemoveCellTool.ts","webpack://cybercells/./src/tool/SelectionTool.ts","webpack://cybercells/./src/game/world/updater/ResetContextUpdater.ts","webpack://cybercells/./src/game/world/updater/UpdateContext.ts","webpack://cybercells/./src/game/world/updater/KineticsUpdater.ts","webpack://cybercells/./src/game/world/updater/PositionUpdater.ts","webpack://cybercells/./src/game/world/updater/FoodUpdater.ts","webpack://cybercells/./src/game/world/updater/NutritionUpdater.ts","webpack://cybercells/./src/game/world/updater/CellUpdater.ts","webpack://cybercells/./src/game/world/updater/WorldUpdater.ts","webpack://cybercells/./src/App.vue?2a5e","webpack://cybercells/./src/App.vue","webpack://cybercells/./src/main.ts","webpack://cybercells/webpack/bootstrap","webpack://cybercells/webpack/runtime/chunk loaded","webpack://cybercells/webpack/runtime/compat get default export","webpack://cybercells/webpack/runtime/define property getters","webpack://cybercells/webpack/runtime/global","webpack://cybercells/webpack/runtime/hasOwnProperty shorthand","webpack://cybercells/webpack/runtime/publicPath","webpack://cybercells/webpack/runtime/jsonp chunk loading","webpack://cybercells/webpack/startup"],"sourcesContent":["import Genome from \"@/game/Genome\";\r\n\r\nexport type rgba = [number, number, number, number];\r\nexport type cmyw = [number, number, number, number];\r\n\r\nexport function cmywFromGenome(genome: Genome): cmyw {\r\n    return [\r\n        genome.cyanPigment,\r\n        genome.magentaPigment,\r\n        genome.yellowPigment,\r\n        genome.whitePigment\r\n    ]\r\n}\r\n\r\nexport function cmywToRgba(color: cmyw): rgba {\r\n    const [cyan, magenta, yellow, white] = color;\r\n    const [r, g, b] = [1 - cyan, 1 - magenta, 1 - yellow].map(v => v + (1 - v)*white/2);\r\n    const a = 1 - (1 - cyan) * (1 - magenta) * (1 - yellow) * (1 - white);\r\n    return [r, g, b, a];\r\n}\r\n\r\nexport function mixRgba(a: rgba, b: rgba): rgba {\r\n    return [(a[0] + b[0])/2, (a[1] + b[1])/2, (a[2] + b[2])/2, (a[3] + b[3])/2];\r\n}\r\n\r\nexport function darkenRgba(color: rgba, percent: number): rgba {\r\n    const coefficient = 1 - percent;\r\n    return [color[0] * coefficient, color[1] * coefficient, color[2] * coefficient, color[3]];\r\n}\r\n\r\nexport function rgbaToCssString(color: rgba) {\r\n    return `rgba(${Math.floor(color[0]*256)}, ${Math.floor(color[1]*256)}, ${Math.floor(color[2]*256)}, ${color[3]})`;\r\n}","const { sqrt, sin, cos, acos, PI } = Math\r\n\r\nexport default class Vector2 {\r\n    x: number\r\n    y: number\r\n\r\n    constructor(x: number = 0, y: number = 0) {\r\n        this.x = x\r\n        this.y = y\r\n    }\r\n\r\n    get length(): number {\r\n        return sqrt(this.x * this.x + this.y * this.y)\r\n    }\r\n\r\n    plus(rvalue: Vector2 | number): Vector2 {\r\n        if (rvalue instanceof Vector2)\r\n            return new Vector2(this.x + rvalue.x, this.y + rvalue.y)\r\n        else\r\n            return new Vector2(this.x + rvalue, this.y + rvalue)\r\n    }\r\n\r\n    minus(rvalue: Vector2 | number): Vector2 {\r\n        if (rvalue instanceof Vector2)\r\n            return new Vector2(this.x - rvalue.x, this.y - rvalue.y)\r\n        else\r\n            return new Vector2(this.x - rvalue, this.y - rvalue)\r\n    }\r\n\r\n    times(factor: Vector2 | number): Vector2 {\r\n        if (factor instanceof Vector2)\r\n            return new Vector2(this.x * factor.y, this.y * factor.y);\r\n        else\r\n            return new Vector2(this.x * factor, this.y * factor);\r\n    }\r\n\r\n    div(factor: Vector2 | number): Vector2 {\r\n        if (factor instanceof Vector2)\r\n            return new Vector2(this.x / factor.y, this.x / factor.y);\r\n        else\r\n            return new Vector2(this.x / factor, this.y / factor);\r\n    }\r\n\r\n    get negative(): Vector2 {\r\n        return new Vector2(-this.x, -this.y)\r\n    }\r\n\r\n    dot(that: Vector2): number {\r\n        return this.x * that.x + this.y * that.y\r\n    }\r\n\r\n    to(that: Vector2): Vector2 {\r\n        return that.minus(this)\r\n    }\r\n\r\n    nearest(...vectors: Array<Vector2>): Vector2 {\r\n        return vectors.reduce((a, b) => this.distance(a) > this.distance(b) ? b : a)\r\n    }\r\n\r\n    /**\r\n     * This method calculates the shortest turn direction needed\r\n     * to get from this vector's angle to that vector's angle.\r\n     * \r\n     * @returns 1 if direction is counterclockwise, -1 otherwise\r\n     */\r\n    shortestAngularTurn(that: Vector2): number {\r\n        const diff = that.angle - this.angle\r\n        return (diff < -PI || diff >= 0.0 && diff < PI) ? 1 : -1\r\n    }\r\n\r\n    positiveAngleDiff(that: Vector2): number {\r\n        return (this.angle - that.angle + 2*PI) % (2*PI)\r\n    }\r\n\r\n    get angle(): number {\r\n        return -(this.y > 0 ? 2*PI - acos(this.x/this.length) : acos(this.x/this.length));\r\n        // return (Math.atan2(-this.y, this.x) + 2 * Math.PI) % (2 * Math.PI);\r\n    }\r\n\r\n    get angleSafe(): number {\r\n        return this.length != 0 ? this.angle : 0\r\n    }\r\n\r\n    distance(that: Vector2): number {\r\n        return sqrt((this.x - that.x)**2 + (this.y - that.y)**2)\r\n    }\r\n\r\n    isNaN() {\r\n        return isNaN(this.x) || isNaN(this.y);\r\n    }\r\n\r\n    /**\r\n     * Returns a new vector rotated by given amount of radians.\r\n     * The positive argument is counterclockwise rotation.\r\n     */\r\n    rotate(radians: number): Vector2 {\r\n        return new Vector2(this.x * cos(radians) - this.y * sin(radians), this.x * sin(radians) + this.y * cos(radians))\r\n    }\r\n\r\n    get unit(): Vector2 {\r\n        return this.length != 0 ? new Vector2(this.x/this.length, this.y/this.length) : new Vector2(1, 0)\r\n    }\r\n\r\n    static isNaN(vector: Vector2): boolean {\r\n        return isNaN(vector.x) || isNaN(vector.y)\r\n    }\r\n\r\n    static unit(radians: number): Vector2 {\r\n        return new Vector2(cos(radians), sin(radians))\r\n    }\r\n\r\n    static equals(a?: Vector2, b?: Vector2): boolean {\r\n        if (a == null && b == null)\r\n            return true\r\n        if (a == null || b == null)\r\n            return false\r\n        return a.x == b.x && a.y == b.y\r\n    }\r\n}","import Vector2 from \"@/geom/Vector2\";\r\nimport {HasAabb} from \"@/geom/HasAabb\";\r\nimport Aabb from \"@/geom/Aabb\";\r\n\r\nexport default class Food implements WorldObject, HasAabb {\r\n    static FOOD_DENSITY = 3\r\n\r\n    id = -1\r\n\r\n    constructor(\r\n        public center: Vector2,\r\n        public mass: number\r\n    ) {}\r\n\r\n    get radius() {\r\n        return Math.sqrt(this.mass/Math.PI) / Food.FOOD_DENSITY\r\n    }\r\n\r\n    get aabb(): Aabb {\r\n        const radius = this.radius;\r\n        return [this.center.x - radius, this.center.y - radius, this.center.x + radius, this.center.y + radius];\r\n    }\r\n}","import Vector2 from \"@/geom/Vector2\";\r\nimport Genome from \"@/game/Genome\";\r\nimport {HasAabb} from \"@/geom/HasAabb\";\r\nimport Aabb from \"@/geom/Aabb\";\r\n\r\nexport default class Cell implements WorldObject, HasAabb {\r\n    id = -1\r\n\r\n    constructor(\r\n        public center: Vector2,\r\n        public speed: Vector2,\r\n        public mass: number,\r\n        public angle: number,\r\n        public angularSpeed: number,\r\n        public genome: Genome,\r\n    ) {}\r\n\r\n    connections: Map<number, CellConnectionState> = new Map()\r\n    age: number = 0\r\n\r\n    get radius() {\r\n        return Math.sqrt(this.mass)\r\n    }\r\n\r\n    get aabb(): Aabb {\r\n        const radius  = this.radius;\r\n        return [\r\n            this.center.x - radius,\r\n            this.center.y - radius,\r\n            this.center.x + radius,\r\n            this.center.y + radius\r\n        ];\r\n    }\r\n\r\n    applyImpulse(impulseOrigin: Vector2, impulseDirection: Vector2) {\r\n        if (impulseDirection.length == 0)\r\n            return;\r\n        const originToCenterAngle = impulseOrigin.to(this.center).angle;\r\n        const directionRelativeAngle = originToCenterAngle - impulseDirection.angle;\r\n        const impulseOriginDistance = this.center.distance(impulseOrigin);\r\n        const projectedDistance = Math.sin(directionRelativeAngle) * impulseOriginDistance;\r\n        const translationImpactCoefficient = 1 / (Math.pow(projectedDistance / this.radius, 2) + 1);\r\n        const rotationImpactCoefficient = 1 - translationImpactCoefficient;\r\n        this.speed = this.speed.plus(impulseDirection.times(translationImpactCoefficient));\r\n        this.angularSpeed -= Math.atan(impulseDirection.length / projectedDistance) * rotationImpactCoefficient;\r\n    }\r\n}\r\n\r\nexport class CellConnectionState {\r\n    constructor(public angle: number, public partnerId: number) {}\r\n}","import Vector2 from \"@/geom/Vector2\";\r\nimport {HasAabb} from \"@/geom/HasAabb\";\r\nimport Aabb from \"@/geom/Aabb\";\r\n\r\nexport default class Wall implements WorldObject, HasAabb {\r\n    id = -1\r\n\r\n    constructor(public a: Vector2, public b: Vector2) {}\r\n\r\n    get aabb(): Aabb {\r\n        return [this.a.x, this.a.y, this.b.x, this.b.y];\r\n    }\r\n}\r\n","enum CellType {\r\n    PHAGOCYTE,\r\n    FLAGELLOCYTE\r\n}\r\n\r\nexport default CellType","import {HasAabb} from \"@/geom/HasAabb\";\r\nimport Aabb from \"@/geom/Aabb\";\r\n\r\nexport default class KdTree<T extends HasAabb> {\r\n    root: Node<T> | null = null;\r\n}\r\n\r\nexport class Node<T extends HasAabb> {\r\n    constructor(\r\n        public axis: Axis,\r\n        public aabb: Aabb,\r\n        public objects: Set<T> = new Set()\r\n    ) {}\r\n\r\n    childA: Node<T> | null = null\r\n    childB: Node<T> | null = null\r\n    splitLine: number = 0\r\n}\r\n\r\nexport enum Axis {\r\n    X, Y\r\n}","import CellType from \"@/game/CellType\";\r\nimport World from \"@/game/world/World\";\r\n\r\nexport default class Genome {\r\n    private constructor(\r\n        public type: CellType = CellType.PHAGOCYTE,\r\n        public cyanPigment: number = 0,\r\n        public magentaPigment: number = 0,\r\n        public yellowPigment: number = 0,\r\n        public whitePigment: number = 0,\r\n        public hardness: number = 0,\r\n        public splitMass: number = 0,\r\n        public splitAngle: number = 0,\r\n        public child1Angle: number = 0,\r\n        public child2Angle: number = 0,\r\n        public stickOnSplit: boolean = false,\r\n        public child1KeepConnections: boolean = false,\r\n        public child2KeepConnections: boolean = false,\r\n        public nutritionPriority: number = 0,\r\n    ) {}\r\n\r\n    flagellumForce: number = 8;\r\n\r\n    children: [Genome, Genome] = [this, this];\r\n\r\n    deepCopy(): Genome {\r\n        return this.copyRecursive();\r\n    }\r\n\r\n    applyRadiation(world: World, amount: number) {\r\n        // TODO\r\n    }\r\n\r\n    static newNullGenome(): Genome {\r\n        return new Genome();\r\n    }\r\n\r\n    static newSampleGenome(): Genome {\r\n        const result = new Genome();\r\n        result.type = CellType.PHAGOCYTE;\r\n        result.hardness = 0.6;\r\n        result.splitMass = 420;\r\n        result.child1KeepConnections = true;\r\n        result.child2KeepConnections = true;\r\n        result.nutritionPriority = 1;\r\n        [result.cyanPigment, result.magentaPigment, result.yellowPigment, result.whitePigment] = this.getRandomCellPigments();\r\n        return result\r\n    }\r\n\r\n    private static getRandomCellPigments(): [number, number, number, number] {\r\n        const cmyw: [number, number, number, number] = [\r\n            Math.round(Math.random()/2*100)/100,\r\n            Math.round(Math.random()*100)/100,\r\n            0,\r\n            0\r\n        ];\r\n        for (let i = 0; i < cmyw.length; i++) {\r\n            const randomIndex = Math.floor(Math.random() * cmyw.length);\r\n            [cmyw[i], cmyw[randomIndex]] = [cmyw[randomIndex], cmyw[i]];\r\n        }\r\n        return cmyw\r\n    }\r\n\r\n    private copyRecursive(copies: Map<Genome, Genome> = new Map().set(null, null)): Genome {\r\n        const result = new Genome()\r\n        result.type = this.type\r\n        result.cyanPigment = this.cyanPigment\r\n        result.magentaPigment = this.magentaPigment\r\n        result.yellowPigment = this.yellowPigment\r\n        result.whitePigment = this.whitePigment\r\n        result.hardness = this.hardness\r\n        result.splitMass = this.splitMass\r\n        result.splitAngle = this.splitAngle\r\n        result.child1Angle = this.child1Angle\r\n        result.child2Angle = this.child2Angle\r\n        result.stickOnSplit = this.stickOnSplit\r\n        result.child1KeepConnections = this.child1KeepConnections\r\n        result.child2KeepConnections = this.child2KeepConnections\r\n        result.nutritionPriority = this.nutritionPriority\r\n        result.flagellumForce = this.flagellumForce\r\n        copies.set(this, result)\r\n\r\n        result.children = [\r\n            copies.has(this.children[0]) ? copies.get(this.children[0])! : this.children[0].copyRecursive(copies),\r\n            copies.has(this.children[1]) ? copies.get(this.children[1])! : this.children[1].copyRecursive(copies)\r\n        ]\r\n\r\n        return result\r\n    }\r\n\r\n    private findAllGenomes(): Set<Genome> {\r\n        const stash = new Array<Genome>()\r\n        const result = new Set<Genome>()\r\n        while (stash.length != 0) {\r\n            stash.pop()!!.children.forEach((element: Genome) => {\r\n                if (!result.has(element)) {\r\n                    stash.push(element)\r\n                    result.add(element)\r\n                }\r\n            });\r\n        }\r\n        return result\r\n    }\r\n\r\n    private applyRadiationRecursive() {\r\n        // TODO\r\n    }\r\n}","import Vector2 from \"@/geom/Vector2\";\r\n\r\nexport default class Camera {\r\n    constructor(\r\n        public center: Vector2,\r\n        public height: number\r\n    ) {}\r\n\r\n    static createNull() {\r\n        return new Camera(new Vector2(), 0);\r\n    }\r\n}","import Vector2 from \"@/geom/Vector2\";\r\n\r\nexport default class Geometry {\r\n    static findLineAndCircleIntersections(\r\n        circleCenter: Vector2,\r\n        circleRadius: number,\r\n        lineStart: Vector2,\r\n        lineEnd: Vector2\r\n    ): Vector2[] {\r\n        const x1 = lineStart.x;\r\n        const y1 = lineStart.y;\r\n        const x2 = lineEnd.x;\r\n        const y2 = lineEnd.y;\r\n        const xc = circleCenter.x;\r\n        const yc = circleCenter.y;\r\n        const vx = x2 - x1;\r\n        const vy = y2 - y1;\r\n        const sx = x1 - xc;\r\n        const sy = y1 - yc;\r\n        const a = vx * vx + vy * vy;\r\n        const b = 2 * (vx * sx + vy * sy);\r\n        const c = sx * sx + sy * sy - circleRadius * circleRadius;\r\n        const d = b * b - 4 * a * c;\r\n\r\n        if (d < 0) {\r\n            return [];\r\n        }\r\n\r\n        const t1 = (-b - Math.sqrt(d)) / (2 * a);\r\n        const t2 = (-b + Math.sqrt(d)) / (2 * a);\r\n\r\n        const result = [];\r\n\r\n        if (t1 >= 0 && t1 <= 1) {\r\n            result.push(new Vector2(x1 + vx * t1, y1 + vy * t1));\r\n        }\r\n\r\n        if (t2 >= 0 && t2 <= 1) {\r\n            result.push(new Vector2(x1 + vx * t2, y1 + vy * t2));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    static findCirclesIntersections(\r\n        circle1Center: Vector2,\r\n        circle1Radius: number,\r\n        circle2Center: Vector2,\r\n        circle2Radius: number\r\n    ): Vector2[] {\r\n        const x1 = circle1Center.x;\r\n        const y1 = circle1Center.y;\r\n        const r1 = circle1Radius;\r\n        const x2 = circle2Center.x;\r\n        const y2 = circle2Center.y;\r\n        const r2 = circle2Radius;\r\n\r\n        const dx = x2 - x1;\r\n        const dy = y2 - y1;\r\n        const d = Math.sqrt(dx * dx + dy * dy);\r\n\r\n        if (d == 0 || d > r1 + r2)\r\n            return [];\r\n\r\n        const a = (r1 * r1 - r2 * r2 + d * d) / (2 * d);\r\n        const h = Math.sqrt(r1 * r1 - a * a);\r\n\r\n        if (isNaN(h))\r\n            return [];\r\n\r\n        const x3 = x1 + (dx * a) / d;\r\n        const y3 = y1 + (dy * a) / d;\r\n        const xa = x3 + (h * dy) / d;\r\n        const xb = x3 - (h * dy) / d;\r\n        const ya = y3 - (h * dx) / d;\r\n        const yb = y3 + (h * dx) / d;\r\n\r\n        return [new Vector2(xa, ya), new Vector2(xb, yb)];\r\n    }\r\n\r\n    static findLinesIntersection(\r\n        lineA: [Vector2, Vector2],\r\n        lineB: [Vector2, Vector2]\r\n    ): Vector2 | null {\r\n        const lineAVector = lineA[0].to(lineA[1]);\r\n        const lineBVector = lineB[0].to(lineB[1]);\r\n\r\n        const angle1Ratio = lineAVector.y / lineAVector.x;\r\n        const angle2Ratio = lineBVector.y / lineBVector.x;\r\n\r\n        if (isNaN(angle1Ratio) || isNaN(angle2Ratio) ||\r\n            !isFinite(angle1Ratio) && !isFinite(angle2Ratio) ||\r\n            angle1Ratio == angle2Ratio)\r\n            return null;\r\n\r\n        if (!isFinite(angle1Ratio))\r\n            return Geometry.findVerticalLineIntersection(lineA, lineB);\r\n        if (!isFinite(angle2Ratio))\r\n            return Geometry.findVerticalLineIntersection(lineB, lineA);\r\n\r\n        const lineAOffset = lineA[0].y - angle1Ratio * lineA[0].x;\r\n        const lineBOffset = lineB[0].y - angle2Ratio * lineB[0].x;\r\n\r\n        const intersection = new Vector2((lineBOffset - lineAOffset) / (angle1Ratio - angle2Ratio), 0);\r\n        intersection.y = angle1Ratio * intersection.x + lineAOffset;\r\n\r\n        const v1 = lineA[0].to(intersection);\r\n        const v2 = lineB[0].to(intersection);\r\n        return (\r\n            lineAVector.dot(v1) >= 0 &&\r\n            lineAVector.dot(v1) <= lineAVector.dot(lineAVector) &&\r\n            lineBVector.dot(v2) >= 0 &&\r\n            lineBVector.dot(v2) <= lineBVector.dot(lineBVector)\r\n        ) ? intersection : null;\r\n    }\r\n\r\n    static projectPointOntoLine(\r\n        point: Vector2,\r\n        line: [Vector2, Vector2]\r\n    ): Vector2 {\r\n        const a = line[0];\r\n        const b = line[1];\r\n        if (Math.abs(a.x - b.x) < Number.EPSILON)\r\n            return new Vector2(a.x, point.y);\r\n        return a.to(b).times(\r\n            a.to(point).dot(a.to(b)) / (a.to(b)).dot(a.to(b))\r\n        ).plus(a);\r\n    }\r\n\r\n    static clamp(value: number, min: number, max: number) {\r\n        return Math.min(Math.max(value, min), max);\r\n    }\r\n\r\n    /**\r\n     * Calculates the shortest turn direction needed\r\n     * to get from first angle to second angle.\r\n     *\r\n     * @returns 1 if direction is counterclockwise, -1 otherwise\r\n     */\r\n    static shortestAngularTurn(a: number, b: number): number {\r\n        const diff = b - a\r\n        if (Math.abs(diff) < 1e-8) return 0;\r\n        return (diff < -Math.PI || diff >= 0.0 && diff < Math.PI) ? 1 : -1\r\n    }\r\n\r\n    private static findVerticalLineIntersection(\r\n        verticalLine: [Vector2, Vector2],\r\n        otherLine: [Vector2, Vector2]\r\n    ): Vector2 | null {\r\n        if (otherLine[0].x == otherLine[1].x)\r\n            return null;\r\n\r\n        const otherAngleRatio = (otherLine[1].y - otherLine[0].y) / (otherLine[1].x - otherLine[0].x);\r\n        const line2Offset = otherLine[0].y - otherAngleRatio * otherLine[0].x;\r\n        const intersection = new Vector2(verticalLine[0].x, 0);\r\n        intersection.y = otherAngleRatio * intersection.x + line2Offset;\r\n        if (otherLine[0].x < intersection.x && otherLine[1].x < intersection.x ||\r\n            otherLine[0].x > intersection.x && otherLine[1].x > intersection.x)\r\n            return null;\r\n        const avgY = (verticalLine[0].y + verticalLine[1].y) / 2;\r\n        const height = Math.abs(verticalLine[0].y - verticalLine[1].y);\r\n        return Math.abs(intersection.y - avgY) <= height/2 ? intersection : null;\r\n    }\r\n}","import KdTree, {Axis, Node} from \"@/geom/KdTree\";\r\nimport {HasAabb} from \"@/geom/HasAabb\";\r\nimport Aabb from \"@/geom/Aabb\";\r\nimport World from \"@/game/world/World\";\r\n\r\nexport default class CollisionSystem<T extends HasAabb> {\r\n\r\n    private tree: KdTree<T> = new KdTree();\r\n\r\n    buildSystem(world: World, objects: Iterable<T>) {\r\n        const objectsSet = new Set<T>();\r\n        for (const object of objects)\r\n            objectsSet.add(object);\r\n\r\n        this.tree.root = new Node(Axis.X, [0, 0, world.width, world.height], objectsSet);\r\n        this.buildNodes(this.tree.root, Math.floor(Math.sqrt(objectsSet.size)));\r\n    }\r\n\r\n    add(object: T) {\r\n        // TODO\r\n    }\r\n\r\n    remove(object: T) {\r\n        // TODO\r\n    }\r\n\r\n    findPotentialCollisions(aabb: Aabb): Iterable<T> {\r\n        const result = new Set<T>();\r\n\r\n        if (this.tree.root == null)\r\n            return result;\r\n\r\n        const candidateNodes: Node<T>[] = [this.tree.root];\r\n        while (candidateNodes.length != 0) {\r\n            const node = candidateNodes.pop()!;\r\n            if (node.childA == null || node.childB == null) {\r\n                for (const object of node.objects)\r\n                    result.add(object);\r\n            } else {\r\n                const middle = node.splitLine;\r\n                const [ minX, minY, maxX, maxY ] = aabb;\r\n                if (node.axis == Axis.X) {\r\n                    if (minX <= middle)\r\n                        candidateNodes.push(node.childA!);\r\n                    if (maxX >= middle)\r\n                        candidateNodes.push(node.childB!);\r\n                } else {\r\n                    if (minY <= middle)\r\n                        candidateNodes.push(node.childA!);\r\n                    if (maxY >= middle)\r\n                        candidateNodes.push(node.childB!);\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private buildNodes(node: Node<T>, depthRemaining: number) {\r\n        let middle = 0;\r\n        let count = 0;\r\n        const isAxisX = node.axis == Axis.X\r\n        if (isAxisX) {\r\n            for (const object of node.objects) {\r\n                middle += object.aabb[0];\r\n                count++;\r\n            }\r\n        } else {\r\n            for (const object of node.objects) {\r\n                middle += object.aabb[1];\r\n                count++;\r\n            }\r\n        }\r\n        middle /= count;\r\n\r\n        if (count <= 2 || depthRemaining <= 0)\r\n            return;\r\n\r\n        const [ minX, minY, maxX, maxY ] = node.aabb;\r\n\r\n        const objectsA = new Set<T>();\r\n        const objectsB = new Set<T>();\r\n        const aabbA: Aabb = [\r\n            minX, minY,\r\n            isAxisX ? middle : maxX,\r\n            isAxisX ? maxY : middle\r\n        ];\r\n        const aabbB: Aabb = [\r\n            isAxisX ? middle : minX,\r\n            isAxisX ? minY : middle,\r\n            maxX, maxY\r\n        ];\r\n        if (isAxisX) {\r\n            for (const object of node.objects) {\r\n                if (object.aabb[0] <= middle)\r\n                    objectsA.add(object);\r\n                if (object.aabb[2] >= middle)\r\n                    objectsB.add(object);\r\n            }\r\n        } else {\r\n            for (const object of node.objects) {\r\n                if (object.aabb[1] <= middle)\r\n                    objectsA.add(object);\r\n                if (object.aabb[3] >= middle)\r\n                    objectsB.add(object);\r\n            }\r\n        }\r\n        node.splitLine = middle;\r\n        const newAxis = isAxisX ? Axis.Y : Axis.X;\r\n        const nodeA = new Node<T>(newAxis, aabbA, objectsA);\r\n        const nodeB = new Node<T>(newAxis, aabbB, objectsB);\r\n        this.buildNodes(nodeA, depthRemaining - 1);\r\n        this.buildNodes(nodeB, depthRemaining - 1);\r\n    }\r\n}","import Vector2 from \"@/geom/Vector2\";\r\nimport Food from \"@/game/world/object/Food\";\r\nimport Cell from \"@/game/world/object/Cell\";\r\nimport Wall from \"@/game/world/object/Wall\";\r\nimport Genome from \"@/game/Genome\";\r\nimport Camera from \"@/game/Camera\";\r\nimport Geometry from \"@/geom/Geometry\";\r\nimport CollisionSystem from \"@/game/world/CollisionSystem\";\r\nimport Aabb from \"@/geom/Aabb\";\r\n\r\nexport default class World {\r\n    constructor(\r\n        public width: number,\r\n        public height: number,\r\n    ) {}\r\n\r\n    public food: Map<number, Food> = new Map()\r\n    public cells: Map<number, Cell> = new Map()\r\n    public walls: Map<number, Wall> = new Map()\r\n\r\n    // For user\r\n    public foodSpawnRate = 0;\r\n    public lightIntensity = 0;\r\n    public radiation = 0;\r\n    public viscosity = 0;\r\n    public density = 0;\r\n    public gravity = new Vector2();\r\n    public camera = Camera.createNull();\r\n\r\n    // Not for user\r\n    public maxNutritionGainSpeed = 56;\r\n    public minCellMass = 80;\r\n    public maxCellMass = 500;\r\n    public foodMassLoss = 0.1;\r\n    public minFoodMass = 0.1;\r\n\r\n    // Cell-specific, not for user\r\n    public flagellocyteFlagellumForceCost = 0.1;\r\n    public flagellocyteFlagellumForceMax = 10;\r\n\r\n    private idCounter = 0;\r\n    private cellCollisionSystem: CollisionSystem<Cell> = new CollisionSystem();\r\n    private foodCollisionSystem: CollisionSystem<Food> = new CollisionSystem();\r\n    private wallCollisionSystem: CollisionSystem<Wall> = new CollisionSystem();\r\n\r\n    newId() {\r\n        return this.idCounter++;\r\n    }\r\n\r\n    add(object: WorldObject) {\r\n        if (object.id == -1)\r\n            object.id = this.newId();\r\n\r\n        if (object instanceof Cell)\r\n            this.cells.set(object.id, object);\r\n        if (object instanceof Food)\r\n            this.food.set(object.id, object);\r\n        if (object instanceof Wall)\r\n            this.walls.set(object.id, object);\r\n    }\r\n\r\n    remove(object: WorldObject) {\r\n        this.cells.delete(object.id);\r\n        this.food.delete(object.id);\r\n        this.walls.delete(object.id);\r\n\r\n        if (object instanceof Cell) {\r\n            for (const id of object.connections.keys()) {\r\n                this.cells.get(id)?.connections.delete(object.id);\r\n            }\r\n        }\r\n    }\r\n\r\n    getLightIntensityAtPoint(point: Vector2) {\r\n        // TODO in future\r\n    }\r\n\r\n    getRadiationIntensityAtPoint(point: Vector2) {\r\n        // TODO in future\r\n    }\r\n\r\n    updateCollisionSystem() {\r\n        this.cellCollisionSystem.buildSystem(this, this.cells.values());\r\n        this.foodCollisionSystem.buildSystem(this, this.food.values());\r\n        this.wallCollisionSystem.buildSystem(this, this.walls.values());\r\n    }\r\n\r\n    // TODO this is slow\r\n    // TODO return intersection points\r\n    rayCast(a: Vector2, b: Vector2): WorldObject[] {\r\n        const result: WorldObject[] = [];\r\n\r\n        for (const it of this.walls.values()) {\r\n            if (Geometry.findLinesIntersection([it.a, it.b], [a, b]))\r\n                result.push(it);\r\n        }\r\n\r\n        for (const it of this.cells.values()) {\r\n            if (Geometry.findLineAndCircleIntersections(it.center, it.radius, a, b).length != 0)\r\n                result.push(it);\r\n        }\r\n\r\n        for (const it of this.food.values()) {\r\n            if (Geometry.findLineAndCircleIntersections(it.center, it.radius, a, b).length != 0)\r\n                result.push(it);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    // TODO return intersection points\r\n    circleCast(center: Vector2, radius: number): WorldObject[] {\r\n        const result: WorldObject[] = [];\r\n        const aabb: Aabb = [\r\n            center.x - radius,\r\n            center.y - radius,\r\n            center.x + radius,\r\n            center.y + radius\r\n        ];\r\n\r\n        for (const it of this.wallCollisionSystem.findPotentialCollisions(aabb)) {\r\n            if (Geometry.findLineAndCircleIntersections(center, radius, it.a, it.b).length != 0)\r\n                result.push(it);\r\n        }\r\n\r\n        for (const it of this.cellCollisionSystem.findPotentialCollisions(aabb)) {\r\n            if (Geometry.findCirclesIntersections(center, radius, it.center, it.radius).length != 0)\r\n                result.push(it);\r\n        }\r\n\r\n        for (const it of this.foodCollisionSystem.findPotentialCollisions(aabb)) {\r\n            if (Geometry.findCirclesIntersections(center, radius, it.center, it.radius).length != 0)\r\n                result.push(it);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    // TODO return intersection points\r\n    pointCast(point: Vector2, threshold: number): WorldObject[] {\r\n        const result: WorldObject[] = [];\r\n        const error = 10e-6;\r\n        const aabb: Aabb = [\r\n            point.x - threshold,\r\n            point.y - threshold,\r\n            point.x + threshold,\r\n            point.y + threshold\r\n        ];\r\n\r\n        for (const it of this.wallCollisionSystem.findPotentialCollisions(aabb)) {\r\n            const projected = Geometry.projectPointOntoLine(point, [it.a, it.b])\r\n            if (point.distance(projected) <= threshold) {\r\n                if (projected.distance(it.a) + projected.distance(it.b) <= it.a.distance(it.b) + threshold * 2 + error)\r\n                    result.push(it);\r\n            }\r\n        }\r\n\r\n        for (const it of this.cellCollisionSystem.findPotentialCollisions(aabb)) {\r\n            if (it.center.distance(point) <= it.radius + threshold)\r\n                result.push(it);\r\n        }\r\n\r\n        for (const it of this.foodCollisionSystem.findPotentialCollisions(aabb)) {\r\n            if (it.center.distance(point) <= it.radius + threshold)\r\n                result.push(it);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    clear() {\r\n        this.cells.forEach(this.remove.bind(this));\r\n        this.food.forEach(this.remove.bind(this));\r\n        this.walls.forEach(this.remove.bind(this));\r\n    }\r\n\r\n    static getDefault() {\r\n        return new World(0, 0)\r\n    }\r\n\r\n    static TEMPORARY_DEBUG = (() => {\r\n        const world = new World(200, 200);\r\n        world.viscosity = 0.1;\r\n        world.foodSpawnRate = 10;\r\n        world.camera = new Camera(new Vector2(0, 0), 800)\r\n        world.gravity = new Vector2(0, 0);\r\n        for (let i = 0; i < 40; i++) {\r\n            const genome = Genome.newSampleGenome();\r\n            // genome.stickOnSplit = true;\r\n            world.add(new Cell(new Vector2(world.width * Math.random(), world.height * Math.random()), new Vector2(), 400, 0, 0, genome));\r\n        }\r\n        for (let i = 0; i < 100; i++) {\r\n            world.add(new Food(new Vector2(world.width * Math.random(), world.height * Math.random()), 50));\r\n        }\r\n        world.camera.center = new Vector2(world.width/2, world.height/2);\r\n        world.camera.height = world.height * 1.5;\r\n        world.add(new Wall(new Vector2(0, 0), new Vector2(0, world.height)));\r\n        world.add(new Wall(new Vector2(0, world.height), new Vector2(world.width, world.height)));\r\n        world.add(new Wall(new Vector2(world.width, world.height), new Vector2(world.width, 0)));\r\n        world.add(new Wall(new Vector2(world.width, 0), new Vector2(0, 0)));\r\n        world.updateCollisionSystem();\r\n        return world;\r\n    })()\r\n}\r\n\r\nexport class CollisionResult {\r\n    constructor(\r\n        public object: WorldObject,\r\n        public points: Vector2[]\r\n    ) {}\r\n}","export type TransformMatrix = [number, number, number, number, number, number];\r\n\r\nexport function createTranslate(x: number, y: number): TransformMatrix {\r\n    return [1, 0, 0, 1, x, y]\r\n}\r\n\r\nexport function createScale(sx: number, sy: number): TransformMatrix {\r\n    return [sx, 0, 0, sy, 0, 0]\r\n}\r\n\r\nexport function multiplyMatrices(matrixA: TransformMatrix, matrixB: TransformMatrix): TransformMatrix {\r\n    const   a1 = matrixA[0],\r\n            b1 = matrixA[1],\r\n            c1 = matrixA[2],\r\n            d1 = matrixA[3],\r\n            e1 = matrixA[4],\r\n            f1 = matrixA[5];\r\n\r\n    const   a2 = matrixB[0],\r\n            b2 = matrixB[1],\r\n            c2 = matrixB[2],\r\n            d2 = matrixB[3],\r\n            e2 = matrixB[4],\r\n            f2 = matrixB[5];\r\n\r\n    return [\r\n        a1 * a2 + c1 * b2,\r\n        b1 * a2 + d1 * b2,\r\n        a1 * c2 + c1 * d2,\r\n        b1 * c2 + d1 * d2,\r\n        a1 * e2 + c1 * f2 + e1,\r\n        b1 * e2 + d1 * f2 + f1\r\n    ];\r\n}\r\n\r\nexport function invertMatrix(matrix: TransformMatrix): TransformMatrix {\r\n    const   a = matrix[0],\r\n            b = matrix[1],\r\n            c = matrix[2],\r\n            d = matrix[3],\r\n            e = matrix[4],\r\n            f = matrix[5],\r\n            det = a * d - b * c;\r\n\r\n    if (det === 0) {\r\n        throw Error(\"Matrix has zero determinant\");\r\n    }\r\n\r\n    return [\r\n        d / det,\r\n        -b / det,\r\n        -c / det,\r\n        a / det,\r\n        (c * f - d * e) / det,\r\n        (b * e - a * f) / det\r\n    ];\r\n}\r\n\r\nexport function transformVector(vector: [number, number], matrix: TransformMatrix): [number, number] {\r\n    const x = vector[0], y = vector[1];\r\n\r\n    return [\r\n        matrix[0] * x + matrix[2] * y + matrix[4],\r\n        matrix[1] * x + matrix[3] * y + matrix[5]\r\n    ]\r\n}","import {cmywFromGenome, cmywToRgba, darkenRgba, mixRgba, rgbaToCssString} from \"@/util/ColorUtil\";\r\nimport World from \"@/game/world/World\";\r\nimport {invertMatrix, TransformMatrix, transformVector} from \"@/geom/TransformMatrix\";\r\nimport Wall from \"@/game/world/object/Wall\";\r\nimport Cell from \"@/game/world/object/Cell\";\r\nimport Geometry from \"@/geom/Geometry\";\r\nimport Vector2 from \"@/geom/Vector2\";\r\n\r\nexport default class Renderer {\r\n    private readonly startTime = Date.now()\r\n\r\n    private readonly context: CanvasRenderingContext2D\r\n\r\n    config = {\r\n        layers: {\r\n            background: true,\r\n            walls: true,\r\n            cells: true,\r\n            food: true\r\n        }\r\n    };\r\n\r\n    constructor(\r\n        private canvas: HTMLCanvasElement,\r\n        private world: World = World.getDefault()\r\n    ) {\r\n        this.context = canvas.getContext('2d')!;\r\n    }\r\n\r\n    render() {\r\n        this.clearScene();\r\n        this.context.save();\r\n        this.applyCameraTransform();\r\n        if (this.config.layers.background)\r\n            this.renderBackground();\r\n        if (this.config.layers.food)\r\n            this.renderFood();\r\n        if (this.config.layers.cells)\r\n            this.renderCells();\r\n        if (this.config.layers.walls)\r\n            this.renderWalls();\r\n        this.context.restore();\r\n    }\r\n\r\n    setWorld(world: World) {\r\n        this.world = world;\r\n    }\r\n\r\n    /**\r\n     * From world coordinates to screen coordinates.\r\n     */\r\n    project(worldPoint: [number, number]): [number, number] {\r\n        return transformVector(worldPoint, this.buildCameraTransform())\r\n    }\r\n\r\n    /**\r\n     * From screen coordinates to world coordinates.\r\n     */\r\n    unproject(screenPoint: [number, number]): [number, number] {\r\n        const projection = this.buildCameraTransform()\r\n        const inverted = invertMatrix(projection)\r\n        return transformVector(screenPoint, inverted)\r\n    }\r\n\r\n    private clearScene() {\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n\r\n    private applyCameraTransform() {\r\n        this.context.setTransform(...this.buildCameraTransform());\r\n    }\r\n\r\n    private renderFood() {\r\n        const ctx = this.context;\r\n        ctx.fillStyle = \"rgb(168, 105, 33)\";\r\n        this.world.food.forEach(food => {\r\n            ctx.beginPath();\r\n            ctx.arc(food.center.x, food.center.y, food.radius, 0, 2*Math.PI);\r\n            ctx.fill();\r\n        });\r\n    }\r\n\r\n    private renderWalls() {\r\n        const ctx = this.context;\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.lineCap = \"round\";\r\n        ctx.lineWidth = 2;\r\n        ctx.beginPath();\r\n        this.world.walls.forEach(wall => {\r\n            ctx.moveTo(wall.a.x, wall.a.y);\r\n            ctx.lineTo(wall.b.x, wall.b.y);\r\n        });\r\n        ctx.stroke();\r\n    }\r\n\r\n    private renderCells() {\r\n        const ctx = this.context;\r\n\r\n        this.world.cells.forEach(cell => {\r\n            const aabb = cell.aabb; // TODO scale by 2 to handle the bigger visual AABB\r\n            const [\r\n                [aabbMinX, aabbMinY],\r\n                [aabbMaxX, aabbMaxY]\r\n            ] = [\r\n                this.project([aabb[0], aabb[1]]),\r\n                this.project([aabb[2], aabb[3]])\r\n            ];\r\n            if (aabbMaxX < 0 || aabbMaxY < 0\r\n                || aabbMinX > this.canvas.width\r\n                || aabbMinY > this.canvas.height\r\n            ) return;\r\n\r\n            const bodyRgba = cmywToRgba(cmywFromGenome(cell.genome));\r\n\r\n            const borderRgba = darkenRgba(bodyRgba, 0.3);\r\n            const nucleusRgba = borderRgba;\r\n\r\n            const cellBorderWidth = 1.5;\r\n            const fillRadius = cell.radius - cellBorderWidth;\r\n            const strokeRadius = cell.radius - cellBorderWidth/2;\r\n\r\n            const obstacles = this.calculateCellObstacles(cell);\r\n\r\n            const fillGuidelines = obstacles.map(o => {\r\n                const offset1 = new Vector2(o[0], o[1]).to(cell.center).unit.times(cellBorderWidth);\r\n                const offset2 = new Vector2(o[2], o[3]).to(cell.center).unit.times(cellBorderWidth);\r\n                return [o[0] + offset1.x, o[1] + offset1.y, o[2] + offset2.x, o[3] + offset2.y];\r\n            });\r\n            const strokeGuidelines = obstacles.map(o => {\r\n                const offset1 = new Vector2(o[0], o[1]).to(cell.center).unit.times(cellBorderWidth / 2);\r\n                const offset2 = new Vector2(o[2], o[3]).to(cell.center).unit.times(cellBorderWidth / 2);\r\n                return [o[0] + offset1.x, o[1] + offset1.y, o[2] + offset2.x, o[3] + offset2.y];\r\n            });\r\n\r\n            ctx.fillStyle = rgbaToCssString(bodyRgba);\r\n            ctx.beginPath();\r\n            if (fillGuidelines.length == 0) {\r\n                ctx.arc(cell.center.x, cell.center.y, fillRadius, 0, 2*Math.PI);\r\n            } else {\r\n                ctx.moveTo(fillGuidelines[0][0], fillGuidelines[0][1]);\r\n                for (let i = 0; i < fillGuidelines.length; i++) {\r\n                    const current = fillGuidelines[i];\r\n                    const next = fillGuidelines[(i + 1) % fillGuidelines.length];\r\n                    ctx.lineTo(current[2], current[3]);\r\n                    if (current[2] != next[0] || current[3] != next[1]) {\r\n                        const startAngle = cell.center.to(new Vector2(current[2], current[3])).angle\r\n                        const endAngle = cell.center.to(new Vector2(next[0], next[1])).angle\r\n                        ctx.arc(cell.center.x, cell.center.y, fillRadius, startAngle, endAngle);\r\n                    }\r\n                }\r\n            }\r\n            ctx.fill();\r\n\r\n            ctx.strokeStyle = rgbaToCssString(borderRgba);\r\n            ctx.lineCap = \"round\";\r\n            ctx.lineWidth = cellBorderWidth;\r\n            ctx.beginPath();\r\n            if (strokeGuidelines.length == 0) {\r\n                ctx.arc(cell.center.x, cell.center.y, strokeRadius, 0, 2*Math.PI);\r\n            } else {\r\n                ctx.moveTo(strokeGuidelines[0][0], strokeGuidelines[0][1]);\r\n                for (let i = 0; i < strokeGuidelines.length; i++) {\r\n                    const current = strokeGuidelines[i];\r\n                    const next = strokeGuidelines[(i + 1) % strokeGuidelines.length];\r\n                    ctx.lineTo(current[2], current[3]);\r\n                    if (current[2] != next[0] || current[3] != next[1]) {\r\n                        const startAngle = cell.center.to(new Vector2(current[2], current[3])).angle\r\n                        const endAngle = cell.center.to(new Vector2(next[0], next[1])).angle\r\n                        ctx.arc(cell.center.x, cell.center.y, strokeRadius, startAngle, endAngle);\r\n                    }\r\n                }\r\n            }\r\n            ctx.stroke();\r\n\r\n            // Nucleus\r\n            ctx.fillStyle = rgbaToCssString(nucleusRgba);\r\n            ctx.beginPath();\r\n            ctx.arc(cell.center.x, cell.center.y, Math.sqrt(cell.radius), 0, 2*Math.PI);\r\n            ctx.fill();\r\n\r\n            // // debug\r\n            // for (let i = 0; i < obstacles.length; i++) {\r\n            //     const o = obstacles[i];\r\n            //     const offset1 = new Vector2(o[0], o[1]).to(cell.center).unit.times(cellBorderWidth / 2);\r\n            //     const offset2 = new Vector2(o[2], o[3]).to(cell.center).unit.times(cellBorderWidth / 2);\r\n            //     o[0] += offset1.x;\r\n            //     o[1] += offset1.y;\r\n            //     o[2] += offset2.x;\r\n            //     o[3] += offset2.y;\r\n            // }\r\n            //\r\n            // // debug\r\n            // obstacles.forEach((o, i) => {\r\n            //     ctx.beginPath();\r\n            //     const offset = new Vector2((o[0] + o[2])/2, (o[1] + o[3])/2).to(cell.center).times(0.1);\r\n            //     const [x1, y1, x2, y2] = [...o];\r\n            //     const gradient = ctx.createLinearGradient(x1, y1, x2, y2);\r\n            //     gradient.addColorStop(0, \"red\");\r\n            //     gradient.addColorStop(1, \"orange\");\r\n            //     ctx.strokeStyle = gradient;\r\n            //     ctx.fillStyle = \"black\";\r\n            //     ctx.font = \"2px Arial\";\r\n            //     ctx.lineWidth = 0.2;\r\n            //     ctx.moveTo(x1, y1);\r\n            //     ctx.lineTo(x2, y2);\r\n            //     ctx.textAlign = \"center\";\r\n            //     ctx.textBaseline = \"middle\";\r\n            //     ctx.stroke();\r\n            //     ctx.fillText(i + '', (x1 + x2)/2 + offset.x, (y1 + y2)/2 + offset.y);\r\n            // });\r\n            // ctx.fillText('id' + cell.id, cell.center.x, cell.center.y);\r\n        });\r\n\r\n        this.world.cells.forEach(cell => this.renderCellConnections(cell));\r\n    }\r\n\r\n    private renderCellConnections(cell: Cell) {\r\n        const ctx = this.context;\r\n        cell.connections.forEach(connection => {\r\n            const partnerId = connection.partnerId;\r\n            if (partnerId < cell.id)\r\n                return;\r\n\r\n            const partner = this.world.cells.get(partnerId)!;\r\n            const partnerConnection = partner.connections.get(cell.id)!;\r\n\r\n            for (let stringId = 0; stringId < 4; stringId++) {\r\n                const angleOffset = stringId * Math.PI / 24 - 1.5 * Math.PI / 24;\r\n                const lineStart = cell.center.plus(Vector2.unit(cell.angle + connection.angle + angleOffset).times(cell.radius * 0.5));\r\n                const lineEnd = partner.center.plus(Vector2.unit(partner.angle + partnerConnection.angle - angleOffset).times(partner.radius * 0.5));\r\n                const gradient = ctx.createLinearGradient(lineStart.x, lineStart.y, lineEnd.x, lineEnd.y);\r\n                const cellColor = darkenRgba(cmywToRgba(cmywFromGenome(cell.genome)), 0.3);\r\n                const partnerColor = darkenRgba(cmywToRgba(cmywFromGenome(partner.genome)), 0.3);\r\n                const connectionColor = darkenRgba(mixRgba(cellColor, partnerColor), 0.2);\r\n                gradient.addColorStop(0, \"transparent\");\r\n                gradient.addColorStop(0.5, rgbaToCssString(connectionColor));\r\n                gradient.addColorStop(1, \"transparent\");\r\n                ctx.fillStyle = gradient;\r\n\r\n                const cellControlPointForward = cell.center.plus(Vector2.unit(cell.angle + connection.angle + angleOffset*2 + Math.PI/45).times(cell.radius * 0.7));\r\n                const partnerControlPointForward = partner.center.plus(Vector2.unit(partner.angle + partnerConnection.angle - angleOffset*2 - Math.PI/45).times(partner.radius * 0.7));\r\n                const cellControlPointBackward = cell.center.plus(Vector2.unit(cell.angle + connection.angle + angleOffset*2 - Math.PI/45).times(cell.radius * 0.7));\r\n                const partnerControlPointBackward = partner.center.plus(Vector2.unit(partner.angle + partnerConnection.angle - angleOffset*2 + Math.PI/45).times(partner.radius * 0.7));\r\n\r\n                ctx.beginPath();\r\n                ctx.moveTo(lineStart.x, lineStart.y);\r\n                ctx.bezierCurveTo(cellControlPointForward.x, cellControlPointForward.y, partnerControlPointForward.x, partnerControlPointForward.y, lineEnd.x, lineEnd.y);\r\n                ctx.bezierCurveTo(partnerControlPointBackward.x, partnerControlPointBackward.y, cellControlPointBackward.x, cellControlPointBackward.y, lineStart.x, lineStart.y)\r\n                ctx.fill();\r\n            }\r\n        });\r\n    }\r\n\r\n    private renderBackground() {\r\n        const ctx = this.context;\r\n\r\n        ctx.save();\r\n        ctx.resetTransform();\r\n        ctx.fillStyle = \"rgb(36, 36, 36)\";\r\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n        ctx.restore();\r\n\r\n        ctx.fillStyle = \"rgb(51, 51, 51)\";\r\n        ctx.fillRect(0, 0, this.world.width, this.world.height);\r\n    }\r\n\r\n    private calculateCellObstacles(cell: Cell): [number, number, number, number][] {\r\n        const obstaclesAngular: [number, number, number, number][] = [];\r\n        const obstacles: [number, number, number, number][] = [];\r\n\r\n        this.world.circleCast(cell.center, cell.radius).forEach(object => {\r\n            if (object == cell)\r\n                return;\r\n\r\n            let intersections: Vector2[];\r\n            if (object instanceof Wall) {\r\n                intersections = Geometry.findLineAndCircleIntersections(cell.center, cell.radius, object.a, object.b);\r\n                if (intersections.length == 1) {\r\n                    const distanceA = cell.center.distance(object.a);\r\n                    const distanceB = cell.center.distance(object.b);\r\n                    intersections.push(distanceA < distanceB ? object.a : object.b);\r\n                }\r\n            } else if (object instanceof Cell)\r\n                intersections = Geometry.findCirclesIntersections(\r\n                    cell.center, cell.radius, object.center, object.radius\r\n                );\r\n            else return;\r\n\r\n            if (intersections.length != 2)\r\n                return;\r\n\r\n            let [x1, y1, x2, y2] = [intersections[0].x, intersections[0].y, intersections[1].x, intersections[1].y];\r\n\r\n            if (cell.center.to(new Vector2(x2, y2)).shortestAngularTurn(cell.center.to(new Vector2(x1, y1))) == 1)\r\n                [x1, y1, x2, y2] = [x2, y2, x1, y1];\r\n\r\n            const v1 = cell.center.to(new Vector2(x1, y1));\r\n            const v2 = cell.center.to(new Vector2(x2, y2));\r\n            let r1 = v1.length;\r\n            let r2 = v2.length;\r\n\r\n            if (r1 == 0 || r2 == 0)\r\n                return;\r\n\r\n            let a1 = v1.angle;\r\n            let a2 = v2.angle;\r\n\r\n            let newObstacleIndex = obstaclesAngular.length;\r\n            for (let i = 0; i < obstaclesAngular.length; i++) {\r\n                if (a1 <= obstaclesAngular[i][1]) {\r\n                    newObstacleIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // Merging intersecting obstacles\r\n            for (let i = 0; obstacles.length > 0 && i < obstaclesAngular.length + 1; i++) {\r\n                const opponent = obstacles[(i + obstacles.length) % obstacles.length];\r\n                const opponentAngular = obstaclesAngular[(i + obstacles.length) % obstacles.length];\r\n\r\n                const intersection = Geometry.findLinesIntersection(\r\n                    [new Vector2(opponent[0], opponent[1]), new Vector2(opponent[2], opponent[3])],\r\n                    [new Vector2(x1, y1), new Vector2(x2, y2)]\r\n                );\r\n                if (intersection) {\r\n                    const intersectionRelative = cell.center.to(intersection);\r\n                    const diff = opponentAngular[1] - a1\r\n                    const shortestAngularTurn = (diff < -Math.PI || diff >= 0.0 && diff < Math.PI) ? 1 : -1\r\n                    if (shortestAngularTurn == 1) {\r\n                        x2 = intersection.x;\r\n                        y2 = intersection.y;\r\n                        a2 = intersectionRelative.angle;\r\n                        r2 = intersectionRelative.length;\r\n                        opponent[0] = intersection.x;\r\n                        opponent[1] = intersection.y;\r\n                        opponentAngular[0] = r2;\r\n                        opponentAngular[1] = a2;\r\n                    } else {\r\n                        x1 = intersection.x;\r\n                        y1 = intersection.y;\r\n                        a1 = intersectionRelative.angle;\r\n                        r1 = intersectionRelative.length;\r\n                        opponent[2] = intersection.x;\r\n                        opponent[3] = intersection.y;\r\n                        opponentAngular[2] = r1;\r\n                        opponentAngular[3] = a1;\r\n                    }\r\n                }\r\n            }\r\n\r\n            obstaclesAngular.splice(newObstacleIndex, 0, [r1, a1, r2, a2]);\r\n            obstacles.splice(newObstacleIndex, 0, [x1, y1, x2, y2]);\r\n        });\r\n\r\n        // Removing redundant obstacles\r\n        for (let i = 0; i < obstacles.length; i++) {\r\n            const thisObstacle = obstacles[i];\r\n            const thisObstacleAngular = obstaclesAngular[i];\r\n\r\n            // Check against every other obstacle\r\n            // If fully behind, remove\r\n            // If partially behind, cut\r\n            // If length is near 0, remove\r\n            for (let j = 0; j < obstacles.length; j++) {\r\n                if (i == j)\r\n                    continue;\r\n                const opponentObstacle = obstacles[j];\r\n                const opponentObstacleAngular = obstaclesAngular[j];\r\n                if (\r\n                    Math.abs(thisObstacleAngular[3] - opponentObstacleAngular[1]) > 1e-8 &&\r\n                    Geometry.shortestAngularTurn(thisObstacleAngular[1], opponentObstacleAngular[1]) >= 0 &&\r\n                    Geometry.shortestAngularTurn(thisObstacleAngular[1], opponentObstacleAngular[3]) == 1 &&\r\n                    Geometry.shortestAngularTurn(thisObstacleAngular[3], opponentObstacleAngular[1]) == -1\r\n                ) {\r\n                    const opponentIsFarther = Geometry.findLinesIntersection(\r\n                        [cell.center, new Vector2(opponentObstacle[0], opponentObstacle[1])],\r\n                        [new Vector2(thisObstacle[0], thisObstacle[1]), new Vector2(thisObstacle[2], thisObstacle[3])]\r\n                    ) != null;\r\n\r\n                    if (Geometry.shortestAngularTurn(thisObstacleAngular[3], opponentObstacleAngular[3]) == -1) {\r\n                        // Full cover\r\n                        if (opponentIsFarther) {\r\n                            // Opponent is farther -> remove opponent\r\n                            const indexToRemove = j;\r\n                            if (indexToRemove <= i)\r\n                                i--;\r\n                            j--;\r\n                            obstacles.splice(indexToRemove, 1);\r\n                            obstaclesAngular.splice(indexToRemove, 1);\r\n                        } else {\r\n                            // Opponent is closer -> split this\r\n                            // Not sure if this is going to work at all. If you have a lot of free time, you can test this\r\n                            const splitPointA = Geometry.findLinesIntersection(\r\n                                [cell.center, Vector2.unit(opponentObstacleAngular[1]).times(cell.radius)],\r\n                                [new Vector2(thisObstacle[0], thisObstacle[1]), new Vector2(thisObstacle[2], thisObstacle[3])]\r\n                            );\r\n                            const splitPointB = Geometry.findLinesIntersection(\r\n                                [cell.center, Vector2.unit(opponentObstacleAngular[3]).times(cell.radius)],\r\n                                [new Vector2(thisObstacle[0], thisObstacle[1]), new Vector2(thisObstacle[2], thisObstacle[3])]\r\n                            );\r\n                            if (splitPointA == null || splitPointB == null)\r\n                                break;\r\n                            const newObstacle: [number, number, number, number] = [\r\n                                splitPointB.x, splitPointB.y, thisObstacle[2], thisObstacle[3]\r\n                            ];\r\n                            const newObstacleAngular: [number, number, number, number] = [\r\n                                cell.center.distance(splitPointB), opponentObstacleAngular[3], thisObstacleAngular[2], thisObstacleAngular[3]\r\n                            ];\r\n                            thisObstacle[2] = splitPointA.x;\r\n                            thisObstacle[3] = splitPointA.y;\r\n                            thisObstacleAngular[2] = cell.center.distance(splitPointA);\r\n                            thisObstacleAngular[3] = opponentObstacleAngular[1];\r\n                            const newObstacleIndex = j + 1;\r\n                            obstacles.splice(newObstacleIndex, 0, newObstacle);\r\n                            obstaclesAngular.splice(newObstacleIndex, 0, newObstacleAngular);\r\n                            if (newObstacleIndex <= i)\r\n                                i++;\r\n                        }\r\n                    } else {\r\n                        // Partial cover\r\n                        if (opponentIsFarther) {\r\n                            // Opponent is father -> trim opponent\r\n                            const newOpponentStart = Geometry.findLinesIntersection(\r\n                                [cell.center, cell.center.plus(Vector2.unit(thisObstacleAngular[3]).times(cell.radius))],\r\n                                [new Vector2(opponentObstacle[0], opponentObstacle[1]), new Vector2(opponentObstacle[2], opponentObstacle[3])]\r\n                            );\r\n                            if (newOpponentStart == null)\r\n                                break;\r\n                            opponentObstacle[0] = newOpponentStart.x;\r\n                            opponentObstacle[1] = newOpponentStart.y;\r\n                            opponentObstacleAngular[0] = cell.center.distance(newOpponentStart);\r\n                            opponentObstacleAngular[1] = thisObstacleAngular[3];\r\n                            if (new Vector2(opponentObstacle[0], opponentObstacle[1]).distance(new Vector2(opponentObstacle[2], opponentObstacle[3])) < 1e-6) {\r\n                                if (j <= i)\r\n                                    i--;\r\n                                obstacles.splice(j, 1);\r\n                                obstaclesAngular.splice(j, 1);\r\n                                j--;\r\n                            }\r\n                        } else {\r\n                            // Opponent is closer -> trim this\r\n                            const newThisObstacleEnd = Geometry.findLinesIntersection(\r\n                                [cell.center, cell.center.plus(Vector2.unit(opponentObstacleAngular[1]).times(cell.radius))],\r\n                                [new Vector2(thisObstacle[0], thisObstacle[1]), new Vector2(thisObstacle[2], thisObstacle[3])]\r\n                            );\r\n                            if (newThisObstacleEnd == null)\r\n                                break;\r\n                            thisObstacle[2] = newThisObstacleEnd.x;\r\n                            thisObstacle[3] = newThisObstacleEnd.y;\r\n                            thisObstacleAngular[2] = cell.center.distance(newThisObstacleEnd);\r\n                            thisObstacleAngular[3] = opponentObstacleAngular[1];\r\n                            if (new Vector2(thisObstacle[0], thisObstacle[1]).distance(new Vector2(thisObstacle[2], thisObstacle[3])) < 1e-6) {\r\n                                if (i <= j)\r\n                                    j--;\r\n                                obstacles.splice(i, 1);\r\n                                obstaclesAngular.splice(i, 1);\r\n                                i--;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return obstacles;\r\n    }\r\n\r\n    private buildCameraTransform(): TransformMatrix {\r\n        const canvasWidth = this.canvas.width;\r\n        const canvasHeight = this.canvas.height;\r\n\r\n        const camera = this.world.camera;\r\n        const scale = canvasHeight != 0 ? canvasHeight/camera.height : 1;\r\n        return [\r\n            scale,\r\n            0,\r\n            0,\r\n            scale,\r\n            -camera.center.x*scale + canvasWidth/2,\r\n            -camera.center.y*scale + canvasHeight/2\r\n        ];\r\n    }\r\n}\r\n","import World from \"@/game/world/World\";\r\n\r\nexport default class WorldMouseEvent {\r\n    constructor(\r\n        public world: World,\r\n        public type: string,\r\n        public screenX: number,\r\n        public screenY: number,\r\n        public worldX: number,\r\n        public worldY: number\r\n    ) {}\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { withModifiers as _withModifiers, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"onTouchstart\", \"onTouchmove\", \"onTouchend\", \"onWheel\"]\n\nimport {ref, inject, onMounted, onBeforeUnmount} from 'vue';\r\nimport World from \"@/game/world/World\";\r\nimport Renderer from \"@/render/Renderer\";\r\nimport WorldMouseEvent from \"@/game/event/WorldMouseEvent\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'WorldViewer',\n  setup(__props, { emit }: { emit: ({(e: string, payload: WorldMouseEvent): void}), expose: any, slots: any, attrs: any }) {\n\r\nconst SCROLL_SENSITIVITY = 0.005\r\n\r\nconst canvasRef = ref<HTMLCanvasElement>()\r\nconst containerRef = ref<HTMLDivElement>()\r\n\r\n\r\n\r\nlet world = inject('world') as World\r\nlet canvas: HTMLCanvasElement\r\nlet container: HTMLDivElement\r\nlet renderer: Renderer\r\n\r\nlet canvasSizeObserver: ResizeObserver;\r\nlet animationFrameRequest: number;\r\n\r\nconst dragging = {\r\n  dragged: false,\r\n  mouseDown: false,\r\n  lastMouseWorldPoint: [0, 0]\r\n}\r\n\r\nonMounted(() => {\r\n  canvas = canvasRef.value!;\r\n  container = containerRef.value!;\r\n  renderer = new Renderer(canvas, world);\r\n  canvasSizeObserver = new ResizeObserver(onCanvasResize);\r\n  canvasSizeObserver.observe(canvas);\r\n  renderingRoutine();\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  canvasSizeObserver.disconnect();\r\n  window.cancelAnimationFrame(animationFrameRequest);\r\n});\r\n\r\nfunction onWheel(event: WheelEvent) {\r\n  const camera = world.camera\r\n  if (event.deltaY > 0)\r\n    camera.height *= 1 + event.deltaY*SCROLL_SENSITIVITY\r\n  else\r\n    camera.height *= 1/(1 - event.deltaY*SCROLL_SENSITIVITY)\r\n  if (camera.height < 1)\r\n    camera.height = 1\r\n}\r\n\r\nfunction onTouchEvent(event: TouchEvent) {\r\n  if (event.touches.length == 1) {\r\n    let mouseEventType: string | undefined\r\n    switch (event.type) {\r\n      case 'touchstart': mouseEventType = 'mousedown'; break;\r\n      case 'touchmove': mouseEventType = 'mousemove'; break;\r\n      case 'touchend': mouseEventType = 'mouseup'; break;\r\n    }\r\n    if (mouseEventType) {\r\n      const { clientX: x, clientY: y } = event.touches[0]\r\n      const dps = window.devicePixelRatio\r\n      const [ screenX, screenY ] = [x * dps, y * dps]\r\n      let [ worldX, worldY ] = renderer.unproject([screenX, screenY])\r\n      const worldEvent = new WorldMouseEvent(world, `world-${mouseEventType}`, screenX, screenY, worldX, worldY)\r\n      handleDraggingEvent(worldEvent)\r\n      emit(worldEvent.type, worldEvent)\r\n    }\r\n  }\r\n}\r\n\r\nfunction onMouseEvent(event: MouseEvent) {\r\n  if (event.type === 'click' && dragging.dragged)\r\n    return;\r\n  const dps = window.devicePixelRatio\r\n  const [ screenX, screenY ] = [event.x * dps, event.y * dps]\r\n  let [ worldX, worldY ] = renderer.unproject([screenX, screenY])\r\n\r\n  const worldEvent = new WorldMouseEvent(world, `world-${event.type}`, screenX, screenY, worldX, worldY)\r\n  handleDraggingEvent(worldEvent)\r\n  emit(worldEvent.type, worldEvent)\r\n}\r\n\r\nfunction handleDraggingEvent(event: WorldMouseEvent) {\r\n  if (event.type === 'world-mousedown') {\r\n    dragging.mouseDown = true;\r\n    dragging.dragged = false;\r\n    dragging.lastMouseWorldPoint = [ event.worldX, event.worldY ];\r\n  }\r\n\r\n  if (event.type === 'world-mousemove' && dragging.mouseDown) {\r\n    dragging.dragged = true;\r\n    const [ prevX, prevY ] = dragging.lastMouseWorldPoint;\r\n    world.camera.center.x += prevX - event.worldX;\r\n    world.camera.center.y += prevY - event.worldY;\r\n    [ event.worldX, event.worldY ] = renderer.unproject([event.screenX, event.screenY]);\r\n    dragging.lastMouseWorldPoint = [ event.worldX, event.worldY ];\r\n  }\r\n\r\n  if (event.type === 'world-mouseup' || event.type === 'world-mouseleave')\r\n    dragging.mouseDown = false;\r\n}\r\n\r\nfunction renderingRoutine() {\r\n  renderer.render();\r\n  animationFrameRequest = window.requestAnimationFrame(renderingRoutine)\r\n}\r\n\r\nfunction onCanvasResize() {\r\n  const dpr = window.devicePixelRatio;\r\n  const { width, height } = container.getBoundingClientRect();\r\n  canvas.width = Math.round(width * dpr);\r\n  canvas.height = Math.round(height * dpr);\r\n  renderer.render();\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"c-world-viewer\",\n    ref_key: \"containerRef\",\n    ref: containerRef\n  }, [\n    _createElementVNode(\"canvas\", {\n      class: \"canvas\",\n      ref_key: \"canvasRef\",\n      ref: canvasRef,\n      onClick: onMouseEvent,\n      onMousedown: onMouseEvent,\n      onMouseup: onMouseEvent,\n      onMousemove: onMouseEvent,\n      onMouseleave: onMouseEvent,\n      onTouchstart: _withModifiers(onTouchEvent, [\"prevent\"]),\n      onTouchmove: _withModifiers(onTouchEvent, [\"prevent\"]),\n      onTouchend: _withModifiers(onTouchEvent, [\"prevent\"]),\n      onWheel: _withModifiers(onWheel, [\"prevent\"])\n    }, null, 40, _hoisted_1)\n  ], 512))\n}\n}\n\n})","import script from \"./WorldViewer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WorldViewer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WorldViewer.vue?vue&type=style&index=0&id=37b3f34d&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-tabbed-panel\" }\nconst _hoisted_2 = { class: \"tabs\" }\nconst _hoisted_3 = { class: \"body\" }\n\nimport { ref, provide } from 'vue'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesTabbedPanel',\n  setup(__props) {\n\r\nconst activeTabName = ref<string | null>(null)\r\nconst minWidth = 320\r\n\r\nlet dragStartX = 0\r\nconst oldWidth = ref(300)\r\nconst width = ref(oldWidth.value)\r\n\r\nprovide('activeTabName', activeTabName)\r\n\r\nfunction onHandleDragStart(event: DragEvent) {\r\n  dragStartX = event.clientX\r\n  initHandleDragging()\r\n}\r\n\r\nfunction initHandleDragging() {\r\n  window.addEventListener('mousemove', onHandleDrag);\r\n  window.addEventListener('mouseleave', stopHandleDragging);\r\n  window.addEventListener('mouseup', stopHandleDragging);\r\n}\r\n\r\nfunction onHandleDrag(event: MouseEvent) {\r\n  if (event.screenX === 0)\r\n    return\r\n  let offset = dragStartX - event.clientX\r\n  width.value = oldWidth.value + offset\r\n  if (width.value < minWidth)\r\n    width.value = minWidth\r\n}\r\n\r\nfunction stopHandleDragging() {\r\n  oldWidth.value = width.value\r\n  window.removeEventListener('mousemove', onHandleDrag);\r\n  window.removeEventListener('mouseleave', stopHandleDragging);\r\n  window.removeEventListener('mouseup', stopHandleDragging);\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"tabbed-panel\",\n      draggable: \"false\",\n      style: _normalizeStyle({ width: `${width.value}px`, minWidth: `${minWidth}px` })\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _renderSlot(_ctx.$slots, \"tabs\")\n      ]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _renderSlot(_ctx.$slots, \"bodies\"),\n        _createElementVNode(\"div\", {\n          class: \"resize-handle\",\n          onMousedown: onHandleDragStart\n        }, null, 32)\n      ])\n    ], 4)\n  ]))\n}\n}\n\n})","import script from \"./PropertiesTabbedPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesTabbedPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PropertiesTabbedPanel.vue?vue&type=style&index=0&id=47ded8a4&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useCssVars as _useCssVars, unref as _unref, defineComponent as _defineComponent } from 'vue'\nimport { renderSlot as _renderSlot, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"disabled\"]\n\nimport {computed} from \"vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'HudButton',\n  props: {\n    active: { type: Boolean, default: false },\n    disabled: { type: Boolean, default: false },\n    borderRadius: { default: \"4px\" },\n    borderWidth: { default: \"1px\" }\n  },\n  setup(__props: any) {\n\nconst props = __props as { active: boolean, disabled: boolean, borderRadius: string, borderWidth: string };\n\n_useCssVars(_ctx => ({\n  \"70e98800\": (_unref(defaultsSupportingBorderRadius)),\n  \"69d2b898\": (_unref(defaultsSupportingBorderWidth))\n}))\n\r\n\r\n\r\nlet defaultsSupportingBorderRadius = computed(() => props.borderRadius.replaceAll('default', \"4px\"))\r\nlet defaultsSupportingBorderWidth = computed(() => props.borderWidth.replaceAll('default', \"1px\"))\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"button\", {\n    class: _normalizeClass([\"c-button\", { active: __props.active }]),\n    disabled: __props.disabled\n  }, [\n    _renderSlot(_ctx.$slots, \"default\")\n  ], 10, _hoisted_1))\n}\n}\n\n})","import script from \"./HudButton.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HudButton.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HudButton.vue?vue&type=style&index=0&id=0ab01900&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderSlot as _renderSlot, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { inject, Ref } from 'vue'\r\nimport HudButton from \"@/component/HudButton.vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesTab',\n  props: ['name'],\n  setup(__props) {\n\nconst props = __props;\n\r\n\r\nconst activeTabName = inject('activeTabName') as Ref<string | null>\r\n\r\nfunction onClick() {\r\n  if (activeTabName.value == props.name)\r\n    activeTabName.value = null\r\n  else\r\n    activeTabName.value = props.name\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(HudButton, {\n    class: \"c-properties-tab\",\n    active: _unref(activeTabName) === __props.name,\n    onClick: onClick\n  }, {\n    default: _withCtx(() => [\n      _renderSlot(_ctx.$slots, \"default\")\n    ]),\n    _: 3\n  }, 8, [\"active\"]))\n}\n}\n\n})","import script from \"./PropertiesTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PropertiesTab.vue?vue&type=style&index=0&id=8da2aa86&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderSlot as _renderSlot, vShow as _vShow, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"body-wr\" }\n\nimport { inject, ref } from 'vue'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesTabBody',\n  props: ['name'],\n  setup(__props) {\n\nconst props = __props;\n\r\n\r\nconst activeTabName = inject('activeTabName', ref(null))\r\n\nreturn (_ctx: any,_cache: any) => {\n  return _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _renderSlot(_ctx.$slots, \"default\")\n  ], 512)), [\n    [_vShow, _unref(activeTabName) === props.name]\n  ])\n}\n}\n\n})","import script from \"./PropertiesTabBody.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesTabBody.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, createElementVNode as _createElementVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-35a5d221\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"section-wr\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"section-title\"\n}\nconst _hoisted_3 = { class: \"section-content\" }\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PropertiesSection',\n  props: ['title'],\n  setup(__props) {\n\nconst props = __props;\n\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (props.title)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString(props.title), 1))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _renderSlot(_ctx.$slots, \"default\")\n    ])\n  ]))\n}\n}\n\n})","import script from \"./PropertiesSection.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PropertiesSection.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PropertiesSection.vue?vue&type=style&index=0&id=35a5d221&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\david\\\\Desktop\\\\cybercells\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-35a5d221\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-39e8fa0e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"c-number-slider\" }\nconst _hoisted_2 = [\"disabled\", \"min\", \"max\", \"step\"]\n\nimport { ref, watch } from \"vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'NumberSlider',\n  props: {\n    min: null,\n    max: null,\n    step: null,\n    disabled: { type: Boolean },\n    modelValue: null\n  },\n  emits: ['update:modelValue'],\n  setup(__props: any, { emit }) {\n\nconst props = __props as {\r\n  min?: number,\r\n  max?: number,\r\n  step?: number,\r\n  disabled?: boolean,\r\n  modelValue?: number\r\n};\n\r\n\r\n\r\n\r\nconst value = ref<number>(props.modelValue || 0)\r\n\r\nwatch(props, () => {\r\n  if (props.modelValue != null)\r\n    value.value = props.modelValue\r\n})\r\n\r\nwatch(value, () => {\r\n  emit(\"update:modelValue\", value.value)\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives(_createElementVNode(\"input\", {\n      class: \"input\",\n      type: \"range\",\n      disabled: __props.disabled,\n      min: __props.min,\n      max: __props.max,\n      step: __props.step,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((value).value = $event))\n    }, null, 8, _hoisted_2), [\n      [_vModelText, value.value]\n    ])\n  ]))\n}\n}\n\n})","import script from \"./NumberSlider.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NumberSlider.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NumberSlider.vue?vue&type=style&index=0&id=39e8fa0e&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\david\\\\Desktop\\\\cybercells\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-39e8fa0e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, vModelText as _vModelText, unref as _unref, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-slider-with-number-input\" }\nconst _hoisted_2 = { class: \"slider-with-number-input\" }\nconst _hoisted_3 = [\"disabled\"]\n\nimport {Ref, ref, watch} from \"vue\";\r\nimport Slider from \"@/component/input/NumberSlider.vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SliderWithNumberInput',\n  props: {\n    min: null,\n    max: null,\n    step: null,\n    disabled: { type: Boolean },\n    modelValue: null\n  },\n  emits: ['update:modelValue'],\n  setup(__props: any, { emit }) {\n\nconst props = __props as {\r\n  min?: number,\r\n  max?: number,\r\n  step?: number,\r\n  disabled?: boolean,\r\n  modelValue?: number\r\n};\n\r\n\r\n\r\nconst textInput = ref<HTMLInputElement>() as Ref<HTMLInputElement>\r\nconst value = ref<number>(props.modelValue || 0)\r\n\r\nwatch(props, () => {\r\n  if (props.modelValue != null)\r\n    value.value = props.modelValue\r\n})\r\n\r\nwatch(value, () => {\r\n  emit(\"update:modelValue\", value.value)\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(Slider, {\n        class: \"slider\",\n        min: __props.min,\n        max: __props.max,\n        step: __props.step,\n        disabled: __props.disabled,\n        modelValue: value.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((value).value = $event)),\n        modelModifiers: { number: true }\n      }, null, 8, [\"min\", \"max\", \"step\", \"disabled\", \"modelValue\"]),\n      _withDirectives(_createElementVNode(\"input\", {\n        class: \"text-input\",\n        type: \"text\",\n        ref_key: \"textInput\",\n        ref: textInput,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((value).value = $event)),\n        disabled: __props.disabled,\n        onFocus: _cache[2] || (_cache[2] = ($event: any) => (_unref(textInput).select())),\n        onKeydown: [\n          _cache[3] || (_cache[3] = _withKeys(($event: any) => (_unref(textInput).blur()), [\"enter\"])),\n          _cache[4] || (_cache[4] = _withKeys(($event: any) => (_unref(textInput).blur()), [\"esc\"]))\n        ]\n      }, null, 40, _hoisted_3), [\n        [\n          _vModelText,\n          value.value,\n          void 0,\n          { number: true }\n        ]\n      ])\n    ])\n  ]))\n}\n}\n\n})","import script from \"./SliderWithNumberInput.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SliderWithNumberInput.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SliderWithNumberInput.vue?vue&type=style&index=0&id=52c2a261&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"c-input-label\"><slot/></div>\r\n</template>\r\n\r\n<style>\r\n.c-input-label {\r\n  color: var(--properties-input-label-color);\r\n  font-size: 0.8em;\r\n  margin-bottom: 1px;\r\n  cursor: default;\r\n}\r\n</style>","import { render } from \"./InputLabel.vue?vue&type=template&id=99afd250\"\nconst script = {}\n\nimport \"./InputLabel.vue?vue&type=style&index=0&id=99afd250&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\david\\\\Desktop\\\\cybercells\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { inject } from \"vue\";\r\n\r\nimport World from \"@/game/world/World\";\r\n\r\nimport PropertiesSection from \"@/component/properties/PropertiesSection.vue\";\r\nimport SliderWithNumberInput from \"@/component/input/SliderWithNumberInput.vue\";\r\nimport InputLabel from \"@/component/input/InputLabel.vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'WorldSettings',\n  setup(__props) {\n\r\nconst world = inject('world') as World;\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(PropertiesSection, {\n    class: \"c-world-settings-tab-body\",\n    title: \"World settings\"\n  }, {\n    default: _withCtx(() => [\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Gravity\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        class: \"slider-input\",\n        min: -5,\n        max: 5,\n        step: 0.01,\n        modelValue: _unref(world).gravity.y,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(world).gravity.y) = $event)),\n        modelModifiers: { number: true }\n      }, null, 8, [\"step\", \"modelValue\"]),\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Density\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        class: \"slider-input\",\n        min: 0,\n        max: 1.5,\n        step: 0.01,\n        modelValue: _unref(world).density,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(world).density) = $event)),\n        modelModifiers: { number: true },\n        disabled: true\n      }, null, 8, [\"max\", \"step\", \"modelValue\"]),\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Viscosity\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        class: \"slider-input\",\n        min: 0,\n        max: 0.8,\n        step: 0.01,\n        modelValue: _unref(world).viscosity,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(world).viscosity) = $event)),\n        modelModifiers: { number: true }\n      }, null, 8, [\"max\", \"step\", \"modelValue\"]),\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Light intensity\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        class: \"slider-input\",\n        min: 0,\n        max: 0.8,\n        step: 0.01,\n        modelValue: _unref(world).lightIntensity,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(world).lightIntensity) = $event)),\n        modelModifiers: { number: true },\n        disabled: true\n      }, null, 8, [\"max\", \"step\", \"modelValue\"]),\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Food spawn rate\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        class: \"slider-input\",\n        min: 0,\n        max: 100,\n        step: 0.01,\n        modelValue: _unref(world).foodSpawnRate,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_unref(world).foodSpawnRate) = $event)),\n        modelModifiers: { number: true }\n      }, null, 8, [\"step\", \"modelValue\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./WorldSettings.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WorldSettings.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WorldSettings.vue?vue&type=style&index=0&id=e0dd8b28&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-cell-genome-preview\" }\n\nimport Genome from \"@/game/Genome\";\r\nimport Renderer from \"@/render/Renderer\";\r\nimport {onBeforeUnmount, onMounted, Ref, ref, watch} from \"vue\";\r\nimport World from \"@/game/world/World\";\r\nimport Vector2 from \"@/geom/Vector2\";\r\nimport Camera from \"@/game/Camera\";\r\nimport Cell from \"@/game/world/object/Cell\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CellGenomePreview',\n  props: {\n    genome: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\r\n  genome: Genome | null\r\n};\n\r\n\r\n\r\nconst canvas = ref() as Ref<HTMLCanvasElement>;\r\nlet dummyWorld: World = World.getDefault();\r\nlet canvasSizeObserver: ResizeObserver\r\nlet renderer: Renderer\r\n\r\nonMounted(() => {\r\n  renderer = new Renderer(canvas.value, dummyWorld);\r\n  renderer.config.layers.background = false;\r\n  canvasSizeObserver = new ResizeObserver(onCanvasResize);\r\n  canvasSizeObserver.observe(canvas.value);\r\n  updateRendererDummyWorld();\r\n  renderer.render();\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  canvasSizeObserver.disconnect();\r\n})\r\n\r\nwatch(props, () => {\r\n  updateRendererDummyWorld()\r\n  renderer.render();\r\n})\r\n\r\nfunction updateRendererDummyWorld() {\r\n  dummyWorld.clear();\r\n  if (props.genome) {\r\n    const dummyCell = new Cell(new Vector2(), new Vector2(), 300, Math.PI/4, 0, props.genome)\r\n    dummyWorld.add(dummyCell)\r\n    dummyWorld.camera = new Camera(new Vector2(), dummyCell.radius * 3)\r\n  }\r\n}\r\n\r\nfunction onCanvasResize() {\r\n  const dpr = window.devicePixelRatio;\r\n  const { width, height } = canvas.value.getBoundingClientRect();\r\n  canvas.value.width = Math.round(width * dpr);\r\n  canvas.value.height = Math.round(height * dpr);\r\n  renderer.render();\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"canvas\", {\n      class: \"canvas\",\n      ref_key: \"canvas\",\n      ref: canvas\n    }, null, 512)\n  ]))\n}\n}\n\n})","import script from \"./CellGenomePreview.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CellGenomePreview.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CellGenomePreview.vue?vue&type=style&index=0&id=6f991464&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, unref as _unref, renderList as _renderList, Fragment as _Fragment, createElementBlock as _createElementBlock, createVNode as _createVNode, toDisplayString as _toDisplayString, vShow as _vShow, normalizeClass as _normalizeClass, resolveDirective as _resolveDirective } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-genome-selector\" }\nconst _hoisted_2 = { class: \"select-head\" }\nconst _hoisted_3 = [\"onKeydown\"]\nconst _hoisted_4 = { class: \"dropdown\" }\nconst _hoisted_5 = [\"onClick\"]\nconst _hoisted_6 = { class: \"dropdown-item__preview-wr\" }\nconst _hoisted_7 = { class: \"dropdown-item__name\" }\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"dropdown-item__controls\" }, null, -1)\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"new-item-button\" }, null, -1)\n\nimport {computed, ref, watch} from \"vue\";\r\nimport GenomeLibrary, {GenomeLibraryEntry} from \"@/game/GenomeLibrary\";\r\nimport CellGenomePreview from \"@/component/genome/CellGenomePreview.vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomeSelector',\n  props: {\n    library: null,\n    disabled: { type: Boolean, default: false },\n    modelValue: null\n  },\n  emits: ['update:modelValue'],\n  setup(__props: any, { emit }) {\n\nconst props = __props as { library: GenomeLibrary, disabled: boolean, modelValue?: GenomeLibraryEntry };\n\r\n\r\n\r\n\r\nconst nameInput = ref(props.modelValue ? props.modelValue.name : \"\")\r\nconst dropdownOpened = ref(false)\r\nconst value = ref<GenomeLibraryEntry | null>(null)\r\n\r\nconst libraryEntriesFiltered = computed(() => {\r\n  if (value.value && nameInput.value === value.value.name)\r\n    return props.library.entries\r\n  else\r\n    return props.library.search(nameInput.value)\r\n})\r\n\r\nwatch(value, () => {\r\n  emit('update:modelValue', value.value)\r\n  resetNameInput();\r\n})\r\n\r\nwatch(props, () => {\r\n  if (props.modelValue)\r\n    value.value = props.modelValue\r\n  resetNameInput();\r\n})\r\n\r\nfunction onInputFocus(e: InputEvent) {\r\n  dropdownOpened.value = true;\r\n  const input = e.target as HTMLInputElement;\r\n  input.select()\r\n}\r\n\r\nfunction select(item: GenomeLibraryEntry) {\r\n  value.value = item\r\n  dropdownOpened.value = false;\r\n}\r\n\r\nfunction cancelSelection() {\r\n  dropdownOpened.value = false\r\n  resetNameInput();\r\n}\r\n\r\nfunction resetNameInput() {\r\n  if (value.value == null)\r\n    nameInput.value = '';\r\n  else\r\n    nameInput.value = value.value.name\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _directive_click_outside = _resolveDirective(\"click-outside\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass({ 'dropdown-opened': dropdownOpened.value })\n    }, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        (value.value)\n          ? (_openBlock(), _createBlock(CellGenomePreview, {\n              key: 0,\n              class: \"select-head__preview\",\n              genome: __props.modelValue?.genome\n            }, null, 8, [\"genome\"]))\n          : _createCommentVNode(\"\", true),\n        _withDirectives(_createElementVNode(\"input\", {\n          class: \"select-head__name-input\",\n          placeholder: \"Select genome\",\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((nameInput).value = $event)),\n          onFocus: onInputFocus,\n          onKeydown: _withKeys(cancelSelection, [\"esc\"])\n        }, null, 40, _hoisted_3), [\n          [_vModelText, nameInput.value]\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"select-head__dropdown-trigger\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (dropdownOpened.value = !dropdownOpened.value))\n        })\n      ]),\n      _withDirectives(_createElementVNode(\"div\", _hoisted_4, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(libraryEntriesFiltered), (item) => {\n          return (_openBlock(), _createElementBlock(\"div\", {\n            class: \"dropdown-item\",\n            key: item.name,\n            onClick: () => select(item)\n          }, [\n            _createElementVNode(\"div\", _hoisted_6, [\n              _createVNode(CellGenomePreview, {\n                class: \"dropdown-item__preview\",\n                genome: item.genome\n              }, null, 8, [\"genome\"])\n            ]),\n            _createElementVNode(\"div\", _hoisted_7, _toDisplayString(item.name), 1),\n            _hoisted_8\n          ], 8, _hoisted_5))\n        }), 128)),\n        _hoisted_9\n      ], 512), [\n        [_vShow, dropdownOpened.value]\n      ])\n    ], 2)), [\n      [_directive_click_outside, cancelSelection]\n    ])\n  ]))\n}\n}\n\n})","import script from \"./GenomeSelector.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomeSelector.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GenomeSelector.vue?vue&type=style&index=0&id=5055c78a&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"c-properties-subheader\">\r\n    <span class=\"text\">\r\n      <slot/>\r\n    </span>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.c-properties-subheader {\r\n  text-align: center;\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 15px;\r\n  margin-bottom: 5px;\r\n\r\n  &:before, &:after {\r\n    content: '';\r\n    border-bottom: 1px solid grey;\r\n    height: 0;\r\n    flex: 1;\r\n  }\r\n\r\n  .text {\r\n    color: rgb(190, 190, 190);\r\n    text-transform: uppercase;\r\n    font-size: 0.8em;\r\n    margin: 0 10px;\r\n  }\r\n}\r\n</style>","import { render } from \"./PropertiesSubheader.vue?vue&type=template&id=8c428008\"\nconst script = {}\n\nimport \"./PropertiesSubheader.vue?vue&type=style&index=0&id=8c428008&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\david\\\\Desktop\\\\cybercells\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-genome-pigment-color-droplet-icon\" }\n\nimport {onBeforeUnmount, onMounted, Ref, ref, watch} from \"vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomePigmentColorDropletIcon',\n  props: {\r\n  color: {\r\n    type: String,\r\n    default: \"white\"\r\n  },\r\n  value: {\r\n    type: Number,\r\n    default: 1\r\n  }\r\n},\n  setup(__props) {\n\nconst props = __props;\n\r\nconst canvasRef = ref() as Ref<HTMLCanvasElement>;\r\nlet canvasCtx: CanvasRenderingContext2D | null = null\r\nlet canvasSizeObserver: ResizeObserver\r\n\r\n\r\n\r\nwatch(props, drawDroplet);\r\n\r\nonMounted(startObservingCanvasSizeChange);\r\nonBeforeUnmount(stopObservingCanvasSizeChange)\r\n\r\nfunction startObservingCanvasSizeChange() {\r\n  canvasSizeObserver = new ResizeObserver(onCanvasResize)\r\n  canvasSizeObserver.observe(canvasRef.value);\r\n}\r\n\r\nfunction stopObservingCanvasSizeChange() {\r\n  canvasSizeObserver.disconnect();\r\n}\r\n\r\nfunction onCanvasResize() {\r\n  const canvas = canvasRef.value\r\n  const dpr = window.devicePixelRatio;\r\n  const { width, height } = canvas.getBoundingClientRect();\r\n  canvas.width = Math.round(width * dpr);\r\n  canvas.height = Math.round(height * dpr);\r\n  drawDroplet();\r\n}\r\n\r\nfunction drawDroplet() {\r\n  const canvas = canvasRef.value;\r\n  const { width: w, height: h } = canvas;\r\n  canvasCtx = canvasCtx || canvas.getContext('2d')!;\r\n  const gradient = canvasCtx.createLinearGradient(0.5 * w, 0.2 * h, 0.5 * w, 0.85 * h);\r\n  const clippedValue = Math.min(1, Math.max(0, props.value));\r\n  gradient.addColorStop(0, \"transparent\");\r\n  gradient.addColorStop(1 - clippedValue, \"transparent\");\r\n  gradient.addColorStop(1 - clippedValue, props.color);\r\n  gradient.addColorStop(1, props.color);\r\n  canvasCtx.clearRect(0, 0, w, h);\r\n  canvasCtx.strokeStyle = props.color;\r\n  canvasCtx.fillStyle = gradient;\r\n  canvasCtx.lineWidth = 2;\r\n  canvasCtx.beginPath();\r\n  canvasCtx.moveTo(0.5 * w, 0.2 * h);\r\n  canvasCtx.lineTo(0.75 * w, 0.6 * h);\r\n  canvasCtx.arc(0.5 * w, 0.6 * h, 0.25 * w, 0, Math.PI);\r\n  canvasCtx.lineTo(0.5 * w, 0.2 * h);\r\n  canvasCtx.stroke();\r\n  canvasCtx.fill();\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"canvas\", {\n      class: \"canvas\",\n      ref_key: \"canvasRef\",\n      ref: canvasRef\n    }, null, 512)\n  ]))\n}\n}\n\n})","import script from \"./GenomePigmentColorDropletIcon.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomePigmentColorDropletIcon.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GenomePigmentColorDropletIcon.vue?vue&type=style&index=0&id=374333ae&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-genome-pigments-editor\" }\nconst _hoisted_2 = { class: \"pigments-view\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"pigments-view-arrow-icon\",\n  viewBox: \"0 0 100 100\"\n}, [\n  /*#__PURE__*/_createElementVNode(\"path\", {\n    fill: \"grey\",\n    d: \"M 0 30 h 50 v -30 l 50 50 l -50 50 v -30 h -50\"\n  })\n], -1)\n\nimport InputLabel from \"@/component/input/InputLabel.vue\";\r\nimport {computed, inject, onBeforeUnmount, onMounted, ref, Ref, watch} from \"vue\";\r\nimport SliderWithNumberInput from \"@/component/input/SliderWithNumberInput.vue\";\r\nimport GenomePigmentColorDropletIcon from \"@/component/genome/GenomePigmentColorDropletIcon.vue\";\r\nimport Genome from \"@/game/Genome\";\r\nimport {GenomeLibraryEntry} from \"@/game/GenomeLibrary\";\r\nimport {cmywFromGenome, cmywToRgba, rgbaToCssString} from \"@/util/ColorUtil\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomePigmentsEditor',\n  setup(__props) {\n\r\nconst selectedGenomeEntry = inject('selectedGenomeEntry') as Ref<GenomeLibraryEntry | null>\r\nconst genome: Ref<Genome> = computed(() =>\r\n    selectedGenomeEntry.value ? selectedGenomeEntry.value!.genome : Genome.newNullGenome()\r\n)\r\n\r\nconst finalColorCanvasRef = ref() as Ref<HTMLCanvasElement>;\r\nlet finalColorCanvasResizeObserver: ResizeObserver;\r\nlet finalColorCanvasContext: CanvasRenderingContext2D;\r\n\r\nonMounted(() => {\r\n  finalColorCanvasResizeObserver = new ResizeObserver(onFinalColorIndicatorResize);\r\n  finalColorCanvasResizeObserver.observe(finalColorCanvasRef.value);\r\n  finalColorCanvasContext = finalColorCanvasRef.value.getContext('2d')!;\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n  finalColorCanvasResizeObserver.disconnect();\r\n});\r\n\r\nwatch(genome, drawFinalColorIndicator, { deep: true });\r\n\r\nfunction onFinalColorIndicatorResize() {\r\n  const canvas = finalColorCanvasRef.value!\r\n  const dpr = window.devicePixelRatio;\r\n  const { width, height } = canvas.getBoundingClientRect();\r\n  canvas.width = Math.round(width * dpr);\r\n  canvas.height = Math.round(height * dpr);\r\n  drawFinalColorIndicator();\r\n}\r\n\r\nfunction drawFinalColorIndicator() {\r\n  const ctx = finalColorCanvasContext;\r\n  const rgba = cmywToRgba(cmywFromGenome(genome.value));\r\n  ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n  ctx.fillStyle = rgbaToCssString(rgba);\r\n  ctx.strokeStyle = `rgb(${rgba[0] * 255}, ${rgba[1] * 255}, ${rgba[2] * 255})`;\r\n  ctx.lineWidth = Math.min(ctx.canvas.width, ctx.canvas.height) * 0.06;\r\n  ctx.beginPath();\r\n  ctx.arc(ctx.canvas.width/2, ctx.canvas.height/2, Math.min(ctx.canvas.width, ctx.canvas.height)*0.45, 0, Math.PI*2)\r\n  ctx.stroke();\r\n  ctx.fill();\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(GenomePigmentColorDropletIcon, {\n        class: \"pigment-icon\",\n        color: \"cyan\",\n        value: _unref(genome).cyanPigment\n      }, null, 8, [\"value\"]),\n      _createVNode(GenomePigmentColorDropletIcon, {\n        class: \"pigment-icon\",\n        color: \"magenta\",\n        value: _unref(genome).magentaPigment\n      }, null, 8, [\"value\"]),\n      _createVNode(GenomePigmentColorDropletIcon, {\n        class: \"pigment-icon\",\n        color: \"yellow\",\n        value: _unref(genome).yellowPigment\n      }, null, 8, [\"value\"]),\n      _createVNode(GenomePigmentColorDropletIcon, {\n        class: \"pigment-icon\",\n        color: \"white\",\n        value: _unref(genome).whitePigment\n      }, null, 8, [\"value\"]),\n      _hoisted_3,\n      _createElementVNode(\"canvas\", {\n        class: \"final-color-canvas\",\n        ref_key: \"finalColorCanvasRef\",\n        ref: finalColorCanvasRef\n      }, null, 512)\n    ]),\n    _createVNode(InputLabel, { class: \"label\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Cyan\")\n      ]),\n      _: 1\n    }),\n    _createVNode(SliderWithNumberInput, {\n      class: \"input\",\n      min: 0,\n      max: 1,\n      step: 0.01,\n      disabled: !_unref(selectedGenomeEntry),\n      modelValue: _unref(genome).cyanPigment,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(genome).cyanPigment) = $event))\n    }, null, 8, [\"step\", \"disabled\", \"modelValue\"]),\n    _createVNode(InputLabel, { class: \"label\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Magenta\")\n      ]),\n      _: 1\n    }),\n    _createVNode(SliderWithNumberInput, {\n      class: \"input\",\n      min: 0,\n      max: 1,\n      step: 0.01,\n      disabled: !_unref(selectedGenomeEntry),\n      modelValue: _unref(genome).magentaPigment,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(genome).magentaPigment) = $event))\n    }, null, 8, [\"step\", \"disabled\", \"modelValue\"]),\n    _createVNode(InputLabel, { class: \"label\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Yellow\")\n      ]),\n      _: 1\n    }),\n    _createVNode(SliderWithNumberInput, {\n      class: \"input\",\n      min: 0,\n      max: 1,\n      step: 0.01,\n      disabled: !_unref(selectedGenomeEntry),\n      modelValue: _unref(genome).yellowPigment,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(genome).yellowPigment) = $event))\n    }, null, 8, [\"step\", \"disabled\", \"modelValue\"]),\n    _createVNode(InputLabel, { class: \"label\" }, {\n      default: _withCtx(() => [\n        _createTextVNode(\"White\")\n      ]),\n      _: 1\n    }),\n    _createVNode(SliderWithNumberInput, {\n      class: \"input\",\n      min: 0,\n      max: 1,\n      step: 0.01,\n      disabled: !_unref(selectedGenomeEntry),\n      modelValue: _unref(genome).whitePigment,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(genome).whitePigment) = $event))\n    }, null, 8, [\"step\", \"disabled\", \"modelValue\"])\n  ]))\n}\n}\n\n})","import script from \"./GenomePigmentsEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomePigmentsEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GenomePigmentsEditor.vue?vue&type=style&index=0&id=57025c65&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-cell-split-preview\" }\n\nimport Genome from \"@/game/Genome\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'CellSplitPreview',\n  props: {\n    genome: { default: null }\n  },\n  setup(__props: any) {\n\nconst props = __props as { genome: Genome | null };\n\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1))\n}\n}\n\n})","import script from \"./CellSplitPreview.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CellSplitPreview.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CellSplitPreview.vue?vue&type=style&index=0&id=28518c44&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { vModelCheckbox as _vModelCheckbox, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withDirectives as _withDirectives, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"disabled\"]\n\nimport {ref, watch} from \"vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'Checkbox',\n  props: {\n    modelValue: { type: Boolean },\n    disabled: { type: Boolean }\n  },\n  emits: ['update:modelValue'],\n  setup(__props: any, { emit }) {\n\nconst props = __props as { modelValue?: boolean, disabled?: boolean };\n\r\n\r\n\r\nconst value = ref<boolean>();\r\n\r\nwatch(value, () => emit('update:modelValue', value.value));\r\nwatch(props, () => value.value = props.modelValue || false);\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"label\", {\n    class: _normalizeClass([\"c-checkbox\", {disabled: __props.disabled}])\n  }, [\n    _withDirectives(_createElementVNode(\"input\", {\n      type: \"checkbox\",\n      class: _normalizeClass([\"input\", { checked: value.value }]),\n      disabled: __props.disabled,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((value).value = $event))\n    }, null, 10, _hoisted_1), [\n      [_vModelCheckbox, value.value]\n    ]),\n    _renderSlot(_ctx.$slots, \"default\")\n  ], 2))\n}\n}\n\n})","import script from \"./Checkbox.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Checkbox.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Checkbox.vue?vue&type=style&index=0&id=517b7318&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"c-genome-children-editor\" }\nconst _hoisted_2 = { class: \"inputs\" }\n\nimport {computed, inject, ref, Ref, watch} from \"vue\";\r\nimport GenomeLibrary, {GenomeLibraryEntry} from \"@/game/GenomeLibrary\";\r\nimport Genome from \"@/game/Genome\";\r\nimport CellSplitPreview from \"@/component/genome/CellSplitPreview.vue\";\r\nimport SliderWithNumberInput from \"@/component/input/SliderWithNumberInput.vue\";\r\nimport InputLabel from \"@/component/input/InputLabel.vue\";\r\nimport Checkbox from \"@/component/input/Checkbox.vue\";\r\nimport GenomeSelector from \"@/component/genome/GenomeSelector.vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomeChildrenEditor',\n  setup(__props) {\n\r\nconst genomeLibrary = inject('genomeLibrary') as Ref<GenomeLibrary>;\r\nconst selectedGenomeEntry = inject('selectedGenomeEntry') as Ref<GenomeLibraryEntry | null>\r\nconst genome: Ref<Genome> = computed(() =>\r\n    selectedGenomeEntry.value ? selectedGenomeEntry.value!.genome : Genome.newNullGenome()\r\n);\r\n\r\nconst child1GenomeEntry = ref<GenomeLibraryEntry | null>();\r\nconst child2GenomeEntry = ref<GenomeLibraryEntry | null>();\r\n\r\nwatch(genome, () => {\r\n  child1GenomeEntry.value = genomeLibrary.value.lookupByGenome(genome.value.children[0]);\r\n  child2GenomeEntry.value = genomeLibrary.value.lookupByGenome(genome.value.children[1]);\r\n});\r\n\r\nwatch(child1GenomeEntry, () => {\r\n  genome.value.children[0] = child1GenomeEntry.value?.genome || genome.value;\r\n});\r\nwatch(child2GenomeEntry, () => {\r\n  genome.value.children[1] = child2GenomeEntry.value?.genome || genome.value;\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(CellSplitPreview, {\n      class: \"preview\",\n      genome: _unref(genome)\n    }, null, 8, [\"genome\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(InputLabel, { class: \"label\" }, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Split mass\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        min: 0,\n        max: 500,\n        step: 1,\n        disabled: !_unref(selectedGenomeEntry),\n        modelValue: _unref(genome).splitMass,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(genome).splitMass) = $event))\n      }, null, 8, [\"disabled\", \"modelValue\"]),\n      _createVNode(InputLabel, { class: \"label\" }, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Split angle\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        min: 0,\n        max: 360,\n        step: 1,\n        disabled: !_unref(selectedGenomeEntry),\n        modelValue: _unref(genome).splitAngle,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(genome).splitAngle) = $event))\n      }, null, 8, [\"disabled\", \"modelValue\"]),\n      _createVNode(Checkbox, {\n        class: \"input checkbox\",\n        disabled: !_unref(selectedGenomeEntry),\n        modelValue: _unref(genome).stickOnSplit,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(genome).stickOnSplit) = $event))\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(\" Stick children together \")\n        ]),\n        _: 1\n      }, 8, [\"disabled\", \"modelValue\"]),\n      _createVNode(InputLabel, { class: \"label\" }, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Child A angle\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        min: 0,\n        max: 360,\n        step: 1,\n        disabled: !_unref(selectedGenomeEntry),\n        modelValue: _unref(genome).child1Angle,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(genome).child1Angle) = $event))\n      }, null, 8, [\"disabled\", \"modelValue\"]),\n      _createVNode(InputLabel, { class: \"label\" }, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Child B angle\")\n        ]),\n        _: 1\n      }),\n      _createVNode(SliderWithNumberInput, {\n        min: 0,\n        max: 360,\n        step: 1,\n        disabled: !_unref(selectedGenomeEntry),\n        modelValue: _unref(genome).child2Angle,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_unref(genome).child2Angle) = $event))\n      }, null, 8, [\"disabled\", \"modelValue\"]),\n      _createVNode(InputLabel, { class: \"label\" }, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Child B genome\")\n        ]),\n        _: 1\n      }),\n      _createVNode(GenomeSelector, {\n        library: _unref(genomeLibrary),\n        disabled: !_unref(selectedGenomeEntry),\n        modelValue: child1GenomeEntry.value,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((child1GenomeEntry).value = $event))\n      }, null, 8, [\"library\", \"disabled\", \"modelValue\"]),\n      _createVNode(InputLabel, { class: \"label\" }, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Child A genome\")\n        ]),\n        _: 1\n      }),\n      _createVNode(GenomeSelector, {\n        library: _unref(genomeLibrary),\n        disabled: !_unref(selectedGenomeEntry),\n        modelValue: child2GenomeEntry.value,\n        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((child2GenomeEntry).value = $event))\n      }, null, 8, [\"library\", \"disabled\", \"modelValue\"]),\n      _createVNode(Checkbox, {\n        class: \"input checkbox\",\n        disabled: !_unref(selectedGenomeEntry),\n        modelValue: _unref(genome).child1KeepConnections,\n        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_unref(genome).child1KeepConnections) = $event))\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(\" Child A inherits connections \")\n        ]),\n        _: 1\n      }, 8, [\"disabled\", \"modelValue\"]),\n      _createVNode(Checkbox, {\n        class: \"input checkbox\",\n        disabled: !_unref(selectedGenomeEntry),\n        modelValue: _unref(genome).child2KeepConnections,\n        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_unref(genome).child2KeepConnections) = $event))\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(\" Child B inherits connections \")\n        ]),\n        _: 1\n      }, 8, [\"disabled\", \"modelValue\"])\n    ])\n  ]))\n}\n}\n\n})","import script from \"./GenomeChildrenEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomeChildrenEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GenomeChildrenEditor.vue?vue&type=style&index=0&id=7f1b910c&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport PropertiesSubheader from \"@/component/properties/PropertiesSubheader.vue\";\r\nimport GenomePigmentsEditor from \"@/component/genome/GenomePigmentsEditor.vue\";\r\nimport GenomeChildrenEditor from \"@/component/genome/GenomeChildrenEditor.vue\";\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomeEditor',\n  setup(__props) {\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", null, [\n    _createVNode(PropertiesSubheader, null, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Pigments\")\n      ]),\n      _: 1\n    }),\n    _createVNode(GenomePigmentsEditor),\n    _createVNode(PropertiesSubheader, null, {\n      default: _withCtx(() => [\n        _createTextVNode(\"Children\")\n      ]),\n      _: 1\n    }),\n    _createVNode(GenomeChildrenEditor)\n  ]))\n}\n}\n\n})","import script from \"./GenomeEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomeEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, isRef as _isRef, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport {inject, provide, ref, Ref} from \"vue\";\r\nimport PropertiesSection from \"@/component/properties/PropertiesSection.vue\";\r\nimport GenomeLibrary, { GenomeLibraryEntry } from \"@/game/GenomeLibrary\";\r\nimport GenomeSelector from \"@/component/genome/GenomeSelector.vue\";\r\nimport GenomeEditor from \"@/component/genome/GenomeEditor.vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'GenomeLibraryEditor',\n  setup(__props) {\n\r\nconst library = inject('genomeLibrary') as Ref<GenomeLibrary>;\r\n\r\nlet selectedGenomeEntry = ref<GenomeLibraryEntry | null>(null);\r\nprovide('selectedGenomeEntry', selectedGenomeEntry);\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(PropertiesSection, { title: \"Genome editor\" }, {\n    default: _withCtx(() => [\n      _createVNode(GenomeSelector, {\n        library: _unref(library),\n        modelValue: _unref(selectedGenomeEntry),\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(selectedGenomeEntry) ? (selectedGenomeEntry).value = $event : selectedGenomeEntry = $event))\n      }, null, 8, [\"library\", \"modelValue\"]),\n      _createVNode(GenomeEditor)\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./GenomeLibraryEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GenomeLibraryEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode } from \"vue\"\nimport _imports_0 from '@public/icon/time_control/pause.svg'\nimport _imports_1 from '@public/icon/time_control/play.svg'\n\n\nconst _hoisted_1 = { class: \"c-time-control\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"icon\",\n  src: _imports_0,\n  alt: \"pause icon\"\n}\nconst _hoisted_3 = {\n  key: 1,\n  class: \"icon\",\n  src: _imports_1,\n  alt: \"play icon\"\n}\n\nimport {inject, ShallowReactive} from \"vue\";\r\n\r\nimport HudButton from \"@/component/HudButton.vue\";\r\nimport WorldUpdater from \"@/game/world/updater/WorldUpdater\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TimeControl',\n  setup(__props) {\n\r\nconst updater = inject('worldUpdater') as ShallowReactive<WorldUpdater>;\r\n\r\nfunction onPausePlayButtonClick() {\r\n  if (updater.simulationActive)\r\n    updater.pauseSimulation();\r\n  else\r\n    updater.startSimulation();\r\n}\r\n\r\nfunction onSpeedButtonClick(speed: number) {\r\n  updater.simulationSpeed = speed;\r\n  updater.startSimulation();\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(HudButton, {\n      class: \"button pause-play-button\",\n      onClick: onPausePlayButtonClick\n    }, {\n      default: _withCtx(() => [\n        (_unref(updater).simulationActive)\n          ? (_openBlock(), _createElementBlock(\"img\", _hoisted_2))\n          : (_openBlock(), _createElementBlock(\"img\", _hoisted_3))\n      ]),\n      _: 1\n    }),\n    _createVNode(HudButton, {\n      class: \"button play-1x-button\",\n      \"border-radius\": \"default 0 0 default\",\n      \"border-width\": \"default 0.5px default default\",\n      active: _unref(updater).simulationSpeed === 1,\n      onClick: _cache[0] || (_cache[0] = () => onSpeedButtonClick(1))\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\" x1 \")\n      ]),\n      _: 1\n    }, 8, [\"active\"]),\n    _createVNode(HudButton, {\n      class: \"button play-2x-button\",\n      \"border-radius\": \"0\",\n      \"border-width\": \"default 0.5px\",\n      active: _unref(updater).simulationSpeed === 2,\n      onClick: _cache[1] || (_cache[1] = () => onSpeedButtonClick(2))\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\" x2 \")\n      ]),\n      _: 1\n    }, 8, [\"active\"]),\n    _createVNode(HudButton, {\n      class: \"button play-5x-button\",\n      \"border-radius\": \"0.5px default default 0\",\n      \"border-width\": \"default default default 0.5px\",\n      active: _unref(updater).simulationSpeed === 5,\n      onClick: _cache[2] || (_cache[2] = () => onSpeedButtonClick(5))\n    }, {\n      default: _withCtx(() => [\n        _createTextVNode(\" x5 \")\n      ]),\n      _: 1\n    }, 8, [\"active\"])\n  ]))\n}\n}\n\n})","import script from \"./TimeControl.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimeControl.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimeControl.vue?vue&type=style&index=0&id=be6f79d6&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import Tool from \"@/tool/Tool\";\r\nimport ToolsManager from \"@/tool/ToolsManager\";\r\nimport {GenomeLibraryEntry} from \"@/game/GenomeLibrary\";\r\nimport WorldMouseEvent from \"@/game/event/WorldMouseEvent\";\r\nimport Cell from \"@/game/world/object/Cell\";\r\nimport Vector2 from \"@/geom/Vector2\";\r\n\r\nexport default class AddCellTool implements Tool {\r\n    name = \"Add cell\"\r\n    icon = require(\"@public/icon/tool/add-cell.svg\")\r\n    enabled = true\r\n    selectedGenomeEntry: GenomeLibraryEntry | null = null;\r\n\r\n    init(toolsManager: ToolsManager) {\r\n        toolsManager.addWorldEventListener(this, 'world-click', this.onClick);\r\n    }\r\n\r\n    onSelect() {}\r\n    onUnselect() {}\r\n\r\n    private onClick(event: WorldMouseEvent) {\r\n        if (!this.selectedGenomeEntry ||\r\n            event.worldX < 0 ||\r\n            event.worldY < 0 ||\r\n            event.worldX >= event.world.width ||\r\n            event.worldY >= event.world.height\r\n        ) return;\r\n\r\n        const cell = new Cell(\r\n            new Vector2(event.worldX, event.worldY),\r\n            new Vector2(),\r\n            400,\r\n            0,\r\n            0,\r\n            this.selectedGenomeEntry.genome.deepCopy()\r\n        );\r\n\r\n        event.world.add(cell);\r\n    }\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, isRef as _isRef, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport PropertiesSection from \"@/component/properties/PropertiesSection.vue\";\r\nimport GenomeSelector from \"@/component/genome/GenomeSelector.vue\";\r\nimport {inject, ref, Ref, watch} from \"vue\";\r\nimport GenomeLibrary, {GenomeLibraryEntry} from \"@/game/GenomeLibrary\";\r\nimport ToolsManager from \"@/tool/ToolsManager\";\r\nimport AddCellTool from \"@/tool/AddCellTool\";\r\nimport InputLabel from \"@/component/input/InputLabel.vue\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'AddCellToolProperties',\n  setup(__props) {\n\r\nconst genomeLibrary = inject('genomeLibrary') as Ref<GenomeLibrary>;\r\nconst toolsManager = inject('toolsManager') as Ref<ToolsManager>;\r\nconst value = ref() as Ref<GenomeLibraryEntry | null>;\r\n\r\nwatch(value, () => {\r\n  if (toolsManager.value.getSelectedTool() instanceof AddCellTool) {\r\n    const tool = toolsManager.value.getSelectedTool() as AddCellTool;\r\n    tool.selectedGenomeEntry = value.value;\r\n  }\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createBlock(PropertiesSection, { title: \"Add cell\" }, {\n    default: _withCtx(() => [\n      _createVNode(InputLabel, null, {\n        default: _withCtx(() => [\n          _createTextVNode(\"Genome of the new cell\")\n        ]),\n        _: 1\n      }),\n      _createVNode(GenomeSelector, {\n        library: _unref(genomeLibrary),\n        modelValue: _unref(value),\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => (_isRef(value) ? (value).value = $event : null))\n      }, null, 8, [\"library\", \"modelValue\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","import script from \"./AddCellToolProperties.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AddCellToolProperties.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\"\nimport _imports_0 from '@public/icon/properties/genome-editor.svg'\nimport _imports_1 from '@public/icon/properties/settings.svg'\n\n\nconst _hoisted_1 = { class: \"c-controls-panel\" }\nconst _hoisted_2 = [\"src\"]\nconst _hoisted_3 = {\n  key: 1,\n  class: \"buttons-separator\"\n}\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"properties-tab__icon\",\n  src: _imports_0,\n  alt: \"Tab icon\"\n}, null, -1)\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"img\", {\n  class: \"properties-tab__icon\",\n  src: _imports_1,\n  alt: \"Tab icon\"\n}, null, -1)\nconst _hoisted_6 = { class: \"tool-buttons-container\" }\nconst _hoisted_7 = [\"src\"]\n\nimport {inject, watch} from \"vue\";\r\nimport PropertiesTabbedPanel from \"@/component/properties/PropertiesTabbedPanel.vue\";\r\nimport PropertiesTab from \"@/component/properties/PropertiesTab.vue\";\r\nimport ToolsManager from \"@/tool/ToolsManager\";\r\nimport HudButton from \"@/component/HudButton.vue\";\r\nimport PropertiesTabBody from \"@/component/properties/PropertiesTabBody.vue\";\r\nimport WorldSettings from \"@/component/WorldSettings.vue\";\r\nimport GenomeLibraryEditor from \"@/component/genome/GenomeLibraryEditor.vue\";\r\nimport TimeControl from \"@/component/TimeControl.vue\";\r\nimport AddCellProperties from \"@/component/properties/tool/AddCellToolProperties.vue\";\r\nimport AddCellTool from \"@/tool/AddCellTool\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'HudPanel',\n  setup(__props) {\n\r\nconst toolsManager = inject('toolsManager') as ToolsManager;\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(PropertiesTabbedPanel, { class: \"properties-container\" }, {\n      tabs: _withCtx(() => [\n        (_unref(toolsManager).getSelectedTool() instanceof _unref(AddCellTool))\n          ? (_openBlock(), _createBlock(PropertiesTab, {\n              key: 0,\n              class: \"properties-tab\",\n              name: \"current-tool\"\n            }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"img\", {\n                  class: \"properties-tab__icon\",\n                  src: _unref(toolsManager).getSelectedTool().icon,\n                  alt: \"Tab icon\"\n                }, null, 8, _hoisted_2)\n              ]),\n              _: 1\n            }))\n          : _createCommentVNode(\"\", true),\n        (_unref(toolsManager).getSelectedTool() instanceof _unref(AddCellTool))\n          ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3))\n          : _createCommentVNode(\"\", true),\n        _createVNode(PropertiesTab, {\n          class: \"properties-tab\",\n          name: \"genome-editor\"\n        }, {\n          default: _withCtx(() => [\n            _hoisted_4\n          ]),\n          _: 1\n        }),\n        _createVNode(PropertiesTab, {\n          class: \"properties-tab\",\n          name: \"settings\"\n        }, {\n          default: _withCtx(() => [\n            _hoisted_5\n          ]),\n          _: 1\n        })\n      ]),\n      bodies: _withCtx(() => [\n        _createVNode(PropertiesTabBody, { name: \"genome-editor\" }, {\n          default: _withCtx(() => [\n            _createVNode(GenomeLibraryEditor)\n          ]),\n          _: 1\n        }),\n        _createVNode(PropertiesTabBody, { name: \"settings\" }, {\n          default: _withCtx(() => [\n            _createVNode(WorldSettings)\n          ]),\n          _: 1\n        }),\n        (_unref(toolsManager).getSelectedTool() instanceof _unref(AddCellTool))\n          ? (_openBlock(), _createBlock(PropertiesTabBody, {\n              key: 0,\n              name: \"current-tool\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(AddCellProperties)\n              ]),\n              _: 1\n            }))\n          : _createCommentVNode(\"\", true)\n      ]),\n      _: 1\n    }),\n    _createElementVNode(\"div\", _hoisted_6, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(toolsManager).tools, (tool) => {\n        return (_openBlock(), _createBlock(HudButton, {\n          class: \"tool-button\",\n          key: tool.name,\n          disabled: !tool.enabled,\n          active: _unref(toolsManager).getSelectedTool() === tool,\n          onClick: ($event: any) => (_unref(toolsManager).selectTool(tool))\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"img\", {\n              class: \"tool-button__icon\",\n              src: tool.icon,\n              alt: \"Tool icon\"\n            }, null, 8, _hoisted_7)\n          ]),\n          _: 2\n        }, 1032, [\"disabled\", \"active\", \"onClick\"]))\n      }), 128))\n    ]),\n    _createVNode(TimeControl)\n  ]))\n}\n}\n\n})","import script from \"./HudPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HudPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HudPanel.vue?vue&type=style&index=0&id=3b19fbe9&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import Genome from \"@/game/Genome\";\r\n\r\nexport default class GenomeLibrary {\r\n    entries: Set<GenomeLibraryEntry> = new Set()\r\n\r\n    search(query: string): Set<GenomeLibraryEntry> {\r\n        const result = new Set<GenomeLibraryEntry>()\r\n        this.entries.forEach( entry => {\r\n            if (entry.name.toLowerCase().includes(query.toLowerCase()))\r\n                result.add(entry)\r\n        })\r\n        return result\r\n    }\r\n\r\n    lookupByGenome(genome: Genome): GenomeLibraryEntry | null {\r\n        for (const entry of this.entries) {\r\n            if (entry.genome == genome)\r\n                return entry;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nexport class GenomeLibraryEntry {\r\n    constructor(\r\n        public name: string,\r\n        public genome: Genome\r\n    ) {}\r\n}","export default class AppPreferences {\r\n    // Nothing here so far...\r\n}","import WorldMouseEvent from \"@/game/event/WorldMouseEvent\";\r\nimport Tool from \"@/tool/Tool\";\r\nimport World from \"@/game/world/World\";\r\n\r\nexport default class ToolsManager {\r\n\r\n    private currentTool: Tool;\r\n    private eventListeners: Map<Tool, Map<string, WorldEventListener>> = new Map();\r\n\r\n    constructor(\r\n        public tools: Tool[],\r\n        private world: World\r\n    ) {\r\n        tools.forEach(tool => tool.init(this, world))\r\n        this.currentTool = tools[0]\r\n    }\r\n\r\n    getSelectedTool() {\r\n        return this.currentTool;\r\n    }\r\n\r\n    selectTool(tool: Tool) {\r\n        if (tool == this.currentTool)\r\n            return;\r\n        this.currentTool.onUnselect();\r\n        this.currentTool = tool;\r\n        tool.onSelect();\r\n    }\r\n\r\n    addWorldEventListener(tool: Tool, eventType: string, handler: (event: WorldMouseEvent) => void) {\r\n        const listener: WorldEventListener = { eventType, handler: handler.bind(tool) };\r\n        if (!this.eventListeners.has(tool))\r\n            this.eventListeners.set(tool, new Map());\r\n        const toolListeners = this.eventListeners.get(tool)!;\r\n        toolListeners.set(eventType, listener)\r\n    }\r\n\r\n    dispatchEvent(event: WorldMouseEvent) {\r\n        const toolListeners = this.eventListeners.get(this.currentTool);\r\n        if (!toolListeners)\r\n            return;\r\n        const listener = toolListeners.get(event.type);\r\n        if (!listener)\r\n            return;\r\n        listener.handler(event);\r\n    }\r\n}\r\n\r\ninterface WorldEventListener {\r\n    eventType: string,\r\n    handler: (event: WorldMouseEvent) => any\r\n}","import Tool from \"@/tool/Tool\";\r\nimport ToolsManager from \"@/tool/ToolsManager\";\r\nimport WorldMouseEvent from \"@/game/event/WorldMouseEvent\";\r\nimport Vector2 from \"@/geom/Vector2\";\r\nimport Cell from \"@/game/world/object/Cell\";\r\n\r\nexport default class RemoveCellTool implements Tool {\r\n    name = \"Remove cell\"\r\n    icon = require(\"@public/icon/tool/remove-cell.svg\")\r\n    enabled = true\r\n\r\n    init(toolsManager: ToolsManager) {\r\n        toolsManager.addWorldEventListener(this, 'world-click', this.onClick);\r\n    }\r\n\r\n    onSelect() {}\r\n\r\n    onUnselect() {}\r\n\r\n    private onClick(event: WorldMouseEvent) {\r\n        const point = new Vector2(event.worldX, event.worldY)\r\n        const hits = event.world.pointCast(point, 1);\r\n        let target: Cell | null = null\r\n        let distance = 0\r\n        hits.filter(hit => hit instanceof Cell).forEach(hit => {\r\n            const cell = hit as Cell;\r\n            const thisCellDistance = point.distance(cell.center)\r\n            if (target == null || thisCellDistance < distance) {\r\n                target = cell;\r\n                distance = thisCellDistance;\r\n            }\r\n        })\r\n        if (target) {\r\n            event.world.remove(target);\r\n        }\r\n    }\r\n}","import Tool from \"@/tool/Tool\";\r\nimport ToolsManager from \"@/tool/ToolsManager\";\r\n\r\nexport default class SelectionTool implements Tool {\r\n    name = \"Selection\";\r\n    icon = require(\"@public/icon/tool/selection.svg\")\r\n    enabled = true\r\n\r\n    init(): void {}\r\n\r\n    onSelect(): void {\r\n\r\n    }\r\n\r\n    onUnselect(): void {\r\n\r\n    }\r\n}","import Updater from \"@/game/world/updater/Updater\";\r\nimport World from \"@/game/world/World\";\r\nimport UpdateContext from \"@/game/world/updater/UpdateContext\";\r\n\r\nexport default class ResetContextUpdater implements Updater {\r\n    constructor(\r\n        private world: World,\r\n        private context: UpdateContext\r\n    ) {}\r\n\r\n    update(): void {\r\n        // Use this method to reset context variables\r\n    }\r\n}","export default class UpdateContext {\r\n    // Place for updaters' communication\r\n}","import Updater from \"@/game/world/updater/Updater\";\r\nimport World from \"@/game/world/World\";\r\nimport Cell, {CellConnectionState} from \"@/game/world/object/Cell\";\r\nimport Wall from \"@/game/world/object/Wall\";\r\nimport Vector2 from \"@/geom/Vector2\";\r\nimport Geometry from \"@/geom/Geometry\";\r\nimport UpdateContext from \"@/game/world/updater/UpdateContext\";\r\n\r\nexport default class KineticsUpdater implements Updater {\r\n    private static CELL_STICKINESS_DEPTH = 3\r\n\r\n    private cellsSpeedBuffer = new Map<number, Vector2>();\r\n    private cellsAngularSpeedBuffer = new Map<number, number>();\r\n\r\n    constructor(\r\n        private world: World,\r\n        private context: UpdateContext,\r\n    ) {}\r\n\r\n    update(delta: number): void {\r\n        this.reset();\r\n\r\n        for (const cell of this.world.cells.values()) {\r\n            this.processGravity(cell, delta);\r\n\r\n            this.world.pointCast(cell.center, cell.radius).forEach(wo => {\r\n                if (wo instanceof Wall)\r\n                    this.processCellWallCollision(cell, wo, delta);\r\n                else if (wo instanceof Cell)\r\n                    this.processCellsCollision(cell, wo, delta);\r\n            })\r\n\r\n            for (const connection of cell.connections.values())\r\n                this.processCellConnection(cell, connection, delta);\r\n        }\r\n\r\n        this.apply();\r\n    }\r\n    \r\n    private reset() {\r\n        this.cellsSpeedBuffer.clear();\r\n        this.cellsAngularSpeedBuffer.clear();\r\n\r\n        for (const cell of this.world.cells.values()) {\r\n            this.cellsSpeedBuffer.set(cell.id, cell.speed);\r\n            this.cellsAngularSpeedBuffer.set(cell.id, cell.angularSpeed);\r\n        }\r\n    }\r\n\r\n    private apply() {\r\n        this.cellsSpeedBuffer.forEach((value, key) => {\r\n            const cell = this.world.cells.get(key)\r\n            if (cell) {\r\n                cell.speed = value;\r\n            }\r\n        });\r\n        this.cellsAngularSpeedBuffer.forEach((value, key) => {\r\n            const cell = this.world.cells.get(key)\r\n            if (cell) {\r\n                cell.angularSpeed = value;\r\n            }\r\n        });\r\n    }\r\n\r\n    // TODO use less Vector2 functions to improve performance\r\n    private processGravity(cell: Cell, delta: number) {\r\n        let speed = this.cellsSpeedBuffer.get(cell.id)!;\r\n        speed = speed.plus(this.world.gravity.times(delta));\r\n        this.cellsSpeedBuffer.set(cell.id, speed);\r\n    }\r\n\r\n    // TODO use less Vector2 functions to improve performance\r\n    // TODO cell can go through walls\r\n    private processCellWallCollision(cell: Cell, wall: Wall, delta: number) {\r\n        const intersections = Geometry.findLineAndCircleIntersections(cell.center, cell.radius, wall.a, wall.b);\r\n        if (intersections.length !== 0) {\r\n            const projection = Geometry.projectPointOntoLine(cell.center, [wall.a, wall.b]);\r\n            const oppositeForce = projection.to(cell.center).unit.times(cell.radius - projection.distance(cell.center));\r\n            const depth = Geometry.clamp(1 - cell.center.distance(projection) / cell.radius, 0, 1);\r\n            const hardnessCoefficient = Geometry.clamp(2 * (1 - cell.genome.hardness) * (depth - 0.5) + 1, 0, 1);\r\n            const oldSpeed = this.cellsSpeedBuffer.get(cell.id)!;\r\n            let newSpeed = oldSpeed.plus(oppositeForce.times(hardnessCoefficient * delta));\r\n            if (depth > 0.5) {\r\n                const angle = cell.center.to(projection).angle - cell.speed.angle;\r\n                const coefficient = Math.abs(angle) < Math.PI/4 ? Math.cos(angle) : 0;\r\n                newSpeed = newSpeed.plus(projection.to(cell.center).unit.times(2 * cell.speed.length * coefficient));\r\n            }\r\n            this.cellsSpeedBuffer.set(cell.id, newSpeed);\r\n        }\r\n    }\r\n\r\n    // TODO use less Vector2 functions to improve performance\r\n    private processCellsCollision(cell: Cell, otherCell: Cell, delta: number) {\r\n        if (cell.id == otherCell.id)\r\n            return;\r\n\r\n        const toOtherCellCenter = cell.center.to(otherCell.center)\r\n        const centersDistance = toOtherCellCenter.length\r\n        const radiusSum = cell.radius + otherCell.radius\r\n        if (centersDistance <= cell.radius + otherCell.radius) {\r\n            const toOtherCellDirection = toOtherCellCenter.unit\r\n            const toNearestOtherCellSurfacePoint = toOtherCellCenter.minus(toOtherCellDirection.times(otherCell.radius));\r\n            const toOtherCellSurfacePoint = toOtherCellDirection.times(cell.radius);\r\n            const rawForce = toNearestOtherCellSurfacePoint.minus(toOtherCellSurfacePoint);\r\n            const depth = (radiusSum - centersDistance)/radiusSum * 2;\r\n            const hardnessAvg = (cell.genome.hardness + otherCell.genome.hardness)/2;\r\n            const hardnessCoefficient = Geometry.clamp(2 * (1 - hardnessAvg) * (depth - 0.5) + 1, 0, 1);\r\n            const thisCellForce = rawForce\r\n                .times(hardnessCoefficient * otherCell.mass/(cell.mass + otherCell.mass));\r\n\r\n            const oldSpeed = this.cellsSpeedBuffer.get(cell.id)!;\r\n            const newSpeed = oldSpeed.plus(thisCellForce.times(delta));\r\n            this.cellsSpeedBuffer.set(cell.id, newSpeed);\r\n        }\r\n    }\r\n\r\n    // TODO use less Vector2 functions to improve performance\r\n    private processCellConnection(cell: Cell, connection: CellConnectionState, delta: number) {\r\n        const partner = this.world.cells.get(connection.partnerId);\r\n        if (!partner)\r\n            return;\r\n\r\n        const partnerConnection = partner.connections.get(cell.id);\r\n        if (!partnerConnection)\r\n            return;\r\n\r\n        // 4 is picked as balance between physical stability and computational load\r\n        for (let stringId = 0; stringId < 4; stringId++) {\r\n            const angleOffset = stringId * Math.PI / 24 - 1.5 * Math.PI / 24;\r\n            const effectiveConnectionAngle = cell.angle + connection.angle + angleOffset;\r\n            const effectiveConnectionForceOrigin = cell.center\r\n                    .plus(Vector2.unit(effectiveConnectionAngle).times(cell.radius))\r\n                    .minus(Vector2.unit(effectiveConnectionAngle).times(KineticsUpdater.CELL_STICKINESS_DEPTH));\r\n            const effectiveConnectionForceDestination = partner.center\r\n                .plus(Vector2.unit(partner.angle + partnerConnection.angle - angleOffset).times(partner.radius))\r\n                .minus(\r\n                    Vector2.unit(partner.angle + partnerConnection.angle - angleOffset)\r\n                        .times(KineticsUpdater.CELL_STICKINESS_DEPTH)\r\n                );\r\n            const connectionForceDirection = effectiveConnectionForceOrigin\r\n                .to(effectiveConnectionForceDestination)\r\n                .div(4)\r\n                .times(delta);\r\n            this.applyImpulse(cell, effectiveConnectionForceOrigin, connectionForceDirection)\r\n        }\r\n    }\r\n\r\n    // TODO use less Vector2 functions to improve performance\r\n    private applyImpulse(cell: Cell, impulseOrigin: Vector2, impulseDirection: Vector2) {\r\n        if (impulseDirection.length == 0)\r\n            return;\r\n        const originToCenterAngle = impulseOrigin.to(cell.center).angle;\r\n        const directionRelativeAngle = originToCenterAngle - impulseDirection.angle;\r\n        const impulseOriginDistance = cell.center.distance(impulseOrigin);\r\n        const projectedDistance = Math.sin(directionRelativeAngle) * impulseOriginDistance;\r\n        const translationImpactCoefficient = 1 / ((projectedDistance / cell.radius)**2 + 1);\r\n        const rotationImpactCoefficient = 1 - translationImpactCoefficient;\r\n        const oldSpeed = this.cellsSpeedBuffer.get(cell.id)!;\r\n        const newSpeed = oldSpeed.plus(impulseDirection.times(translationImpactCoefficient));\r\n        const oldAngularSpeed = this.cellsAngularSpeedBuffer.get(cell.id)!;\r\n        const newAngularSpeed = oldAngularSpeed\r\n            - Math.atan(impulseDirection.length / projectedDistance) * rotationImpactCoefficient;\r\n        this.cellsSpeedBuffer.set(cell.id, newSpeed);\r\n        this.cellsAngularSpeedBuffer.set(cell.id, newAngularSpeed);\r\n    }\r\n}","import Updater from \"@/game/world/updater/Updater\";\r\nimport World from \"@/game/world/World\";\r\n\r\nexport default class PositionUpdater implements Updater {\r\n    constructor(\r\n        private world: World\r\n    ) {}\r\n\r\n    update(delta: number): void {\r\n        this.world.cells.forEach(cell => {\r\n            cell.center = cell.center.plus(cell.speed.times(delta));\r\n            cell.angle += cell.angularSpeed * delta;\r\n            cell.speed = cell.speed.minus(cell.speed.times(this.world.viscosity * delta));\r\n            cell.angularSpeed -= cell.angularSpeed * this.world.viscosity * delta;\r\n        });\r\n        this.world.updateCollisionSystem();\r\n    }\r\n}","import World from \"@/game/world/World\";\r\nimport Updater from \"@/game/world/updater/Updater\";\r\nimport Vector2 from \"@/geom/Vector2\";\r\nimport Food from \"@/game/world/object/Food\";\r\n\r\nexport default class FoodUpdater implements Updater {\r\n    constructor(private world: World) {}\r\n\r\n    private debt = 0;\r\n\r\n    update(delta: number): void {\r\n        this.updateFoodSpawning(delta);\r\n        this.updateFoodLifecycle(delta);\r\n    }\r\n\r\n    private updateFoodSpawning(delta: number) {\r\n        const worldSizeAwareRate = this.world.foodSpawnRate * this.world.width * this.world.height / 1000000;\r\n        this.debt += worldSizeAwareRate * delta;\r\n        const newFoodNumber = Math.floor(this.debt);\r\n        for (let i = 0; i < newFoodNumber; i++)\r\n            this.spawnFoodAtRandomPlace();\r\n        this.debt -= newFoodNumber;\r\n    }\r\n\r\n    private updateFoodLifecycle(delta: number) {\r\n        this.world.food.forEach(food => {\r\n            food.mass -= this.world.foodMassLoss * delta;\r\n            if (food.mass < this.world.minFoodMass)\r\n                this.world.remove(food);\r\n        })\r\n    }\r\n\r\n    private spawnFoodAtRandomPlace() {\r\n        const center = new Vector2(Math.random() * this.world.width, Math.random() * this.world.height);\r\n        const mass = 40 + Math.random() * 40;\r\n        const food = new Food(center, mass);\r\n        this.world.add(food);\r\n    }\r\n}","import Updater from \"@/game/world/updater/Updater\";\r\nimport World from \"@/game/world/World\";\r\nimport Cell from \"@/game/world/object/Cell\";\r\nimport CellType from \"@/game/CellType\";\r\nimport Food from \"@/game/world/object/Food\";\r\nimport Geometry from \"@/geom/Geometry\";\r\n\r\nexport default class NutritionUpdater implements Updater {\r\n    constructor (private world: World) {}\r\n\r\n    update(delta: number): void {\r\n        const newMassByCell: { [index: number]: number } = {};\r\n\r\n        this.updateNutritionExchanges(newMassByCell, delta);\r\n        this.world.cells.forEach(cell => this.updateCellNutrition(cell, newMassByCell, delta));\r\n\r\n        this.world.cells.forEach(cell => cell.mass = newMassByCell[cell.id] || cell.mass)\r\n\r\n        this.killStarvingCells();\r\n    }\r\n\r\n    private updateCellNutrition(cell: Cell, newMassByCell: { [index: number]: number }, delta: number) {\r\n        const cellMaxFoodGain = this.world.maxNutritionGainSpeed * delta;\r\n\r\n        const liveCost = this.calculateLiveCost(cell) * delta;\r\n        newMassByCell[cell.id] = (newMassByCell[cell.id] || cell.mass) - liveCost;\r\n\r\n        if (cell.genome.type == CellType.PHAGOCYTE) {\r\n            let maxConsumableMass = Math.min(\r\n                this.world.maxCellMass - newMassByCell[cell.id],\r\n                cellMaxFoodGain - (cell.mass - newMassByCell[cell.id])\r\n            );\r\n\r\n            this.world.pointCast(cell.center, cell.radius).forEach(wo => {\r\n                if (wo instanceof Food) {\r\n                    const food = wo as Food;\r\n                    const massToEat = Geometry.clamp(food.mass, 0, maxConsumableMass);\r\n                    newMassByCell[cell.id] += massToEat;\r\n                    food.mass -= massToEat;\r\n                    maxConsumableMass -= massToEat;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    private updateNutritionExchanges(newMassByCell: { [index: number]: number }, delta: number) {\r\n        const cellMaxFoodGain = this.world.maxNutritionGainSpeed * delta;\r\n        this.world.cells.forEach(cell => {\r\n            if (cell.connections.size == 0)\r\n                return;\r\n\r\n            cell.connections.forEach((connection, partnerId) => {\r\n                if (partnerId <= cell.id)\r\n                    return;\r\n\r\n                const partner = this.world.cells.get(partnerId)!;\r\n                const nutritionRatio = cell.mass / partner.mass;\r\n                const targetNutritionRatio = cell.genome.nutritionPriority + partner.genome.nutritionPriority != 0\r\n                    ? cell.genome.nutritionPriority / partner.genome.nutritionPriority\r\n                    : 1.0\r\n                const maxConsumableMass = Math.min(\r\n                    this.world.maxCellMass - newMassByCell[cell.id],\r\n                    cellMaxFoodGain - (cell.mass - newMassByCell[cell.id])\r\n                );\r\n                const maxPartnerConsumableMass = Math.min(\r\n                    this.world.maxCellMass - partner.mass,\r\n                    cellMaxFoodGain - (partner.mass - newMassByCell[partner.id])\r\n                );\r\n                // Positive -> nutrition moves to this cell, negative -> ...to partner cell\r\n                const nutritionTransitionFactor = isFinite(targetNutritionRatio)\r\n                    ? (targetNutritionRatio - nutritionRatio) / (targetNutritionRatio + nutritionRatio)\r\n                    : Number.POSITIVE_INFINITY;\r\n                const nutritionTransitionAmount = Geometry.clamp( // Can't exceed max nutrition gain speed\r\n                    Geometry.clamp( // Can't get from other cell more that its mass\r\n                        nutritionTransitionFactor * cellMaxFoodGain,\r\n                        -cell.mass,\r\n                        partner.mass\r\n                    ),\r\n                    -maxPartnerConsumableMass,\r\n                    maxConsumableMass\r\n                );\r\n                newMassByCell[cell.id] = (newMassByCell[cell.id] || cell.mass) + nutritionTransitionAmount;\r\n                newMassByCell[partner.id] = (newMassByCell[partner.id] || partner.mass) - nutritionTransitionAmount;\r\n            })\r\n        })\r\n    }\r\n\r\n    private killStarvingCells() {\r\n        this.world.cells.forEach(cell => {\r\n            if (cell.mass < this.world.minCellMass) {\r\n                this.world.remove(cell);\r\n                this.world.add(new Food(cell.center, Math.sqrt(cell.mass)));\r\n            }\r\n        });\r\n    }\r\n\r\n    private calculateLiveCost(cell: Cell) {\r\n        return 0.0075 * cell.mass;\r\n    }\r\n}","import Updater from \"@/game/world/updater/Updater\";\r\nimport World from \"@/game/world/World\";\r\nimport Cell, {CellConnectionState} from \"@/game/world/object/Cell\";\r\nimport CellType from \"@/game/CellType\";\r\nimport Vector2 from \"@/geom/Vector2\";\r\nimport Food from \"@/game/world/object/Food\";\r\n\r\nexport default class CellUpdater implements Updater {\r\n    constructor (private world: World) {}\r\n\r\n    update(delta: number): void {\r\n        this.world.cells.forEach(cell => {\r\n            cell.age += delta;\r\n            this.doTypeSpecificThings(cell, delta);\r\n\r\n            if (cell.mass > cell.genome.splitMass)\r\n                this.split(cell);\r\n\r\n            if (cell.center.isNaN())\r\n                throw Error(\"Cell id = \" + cell.id + \" has NaN position!\");\r\n        });\r\n    }\r\n\r\n    private doTypeSpecificThings(cell: Cell, delta: number) {\r\n        if (cell.genome.type == CellType.FLAGELLOCYTE) {\r\n            const targetSpeed = Vector2.unit(cell.angle).times(cell.genome.flagellumForce);\r\n            const speedDiff = targetSpeed.minus(cell.speed);\r\n            const force = Vector2.unit(cell.angle).times(Vector2.unit(cell.angle).dot(speedDiff)).times(delta);\r\n            cell.applyImpulse(cell.center, force);\r\n            cell.mass -= speedDiff.length * this.world.flagellocyteFlagellumForceCost * delta;\r\n\r\n            cell.connections.forEach(c => {\r\n                if (Math.abs(c.angle - Math.PI) < Math.PI/12) {\r\n                    this.world.remove(cell); // Die if tail is blocked\r\n                    this.world.add(new Food(cell.center, Math.sqrt(cell.mass)));\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    private split(cell: Cell) {\r\n        const splitNormal = cell.angle + cell.genome.splitAngle + Math.PI/2;\r\n        const child1Center = cell.center.plus(Vector2.unit(splitNormal - Math.PI / 2));\r\n        const child2Center = cell.center.plus(Vector2.unit(splitNormal + Math.PI / 2));\r\n        const child1Angle = cell.angle + cell.genome.splitAngle + cell.genome.child1Angle;\r\n        const child2Angle = cell.angle + cell.genome.splitAngle + cell.genome.child2Angle;\r\n        const child1Genome = cell.genome.children[0].deepCopy();\r\n        const child2Genome = cell.genome.children[1].deepCopy();\r\n        child1Genome.applyRadiation(this.world, this.world.radiation);\r\n        child2Genome.applyRadiation(this.world, this.world.radiation);\r\n        const child1ConnectionAngle = (-cell.genome.child1Angle + 3 * Math.PI) % (2 * Math.PI);\r\n        const child2ConnectionAngle = (-cell.genome.child2Angle + 2 * Math.PI) % (2 * Math.PI);\r\n        const child1 = new Cell(child1Center, cell.speed, cell.mass / 2, child1Angle, 0, child1Genome);\r\n        const child2 = new Cell(child2Center, cell.speed, cell.mass / 2, child2Angle, 0, child2Genome);\r\n\r\n        this.world.add(child1);\r\n        this.world.add(child2);\r\n\r\n        if (cell.genome.stickOnSplit) {\r\n            child1.connections.set(child2.id, new CellConnectionState(child1ConnectionAngle, child2.id));\r\n            child2.connections.set(child1.id, new CellConnectionState(child2ConnectionAngle, child1.id));\r\n        }\r\n\r\n        const that = this;\r\n\r\n        if (cell.genome.child1KeepConnections)\r\n            processExistingConnections(child1);\r\n        if (cell.genome.child2KeepConnections)\r\n            processExistingConnections(child2);\r\n\r\n        function processExistingConnections(child: Cell) {\r\n            cell.connections.forEach(connection => {\r\n                const thisIsFirstChild = child.id == child1.id;\r\n                const partner = that.world.cells.get(connection.partnerId)!;\r\n                const partnerSideConnection = partner.connections.get(cell.id)!;\r\n\r\n                let connectionAngleRelative = cell.genome.splitAngle - connection.angle + Math.PI / 2;\r\n                if (!thisIsFirstChild)\r\n                    connectionAngleRelative += Math.PI;\r\n                connectionAngleRelative %= (2 * Math.PI);\r\n\r\n                const narrowRange = connectionAngleRelative >= Math.PI / 15 && connectionAngleRelative <= Math.PI - Math.PI / 15;\r\n                const broadRange = connectionAngleRelative >= -Math.PI / 15 && connectionAngleRelative <= Math.PI + Math.PI / 15;\r\n                const bothKeepConnections = cell.genome.child1KeepConnections && cell.genome.child2KeepConnections;\r\n\r\n                const childGenomeAngle = thisIsFirstChild ? cell.genome.child1Angle : cell.genome.child2Angle;\r\n                if (narrowRange || broadRange && !bothKeepConnections) { // Connect single\r\n                    partner.connections.set(child.id, new CellConnectionState(partnerSideConnection.angle, child.id));\r\n                    child.connections.set(partner.id, new CellConnectionState(\r\n                        (connection.angle - cell.genome.splitAngle - childGenomeAngle + 2 * Math.PI) % (2 * Math.PI),\r\n                        partner.id\r\n                    ));\r\n                } else if (broadRange) { // Connect both with angle shift\r\n                    let childShift = Math.PI / 6;\r\n                    if (!thisIsFirstChild)\r\n                        childShift *= -1;\r\n                    if (Math.abs(cell.genome.splitAngle - connection.angle + Math.PI/2) > Math.PI / 15)\r\n                        childShift *= -1;\r\n                    partner.connections.set(child.id, new CellConnectionState(\r\n                        partnerSideConnection.angle + childShift,\r\n                        child.id\r\n                    ));\r\n                    child.connections.set(partner.id, new CellConnectionState(\r\n                        (connection.angle - cell.genome.splitAngle - childGenomeAngle + childShift + 2 * Math.PI) % (2 * Math.PI),\r\n                        partner.id\r\n                    ));\r\n                }\r\n            })\r\n        }\r\n\r\n        this.world.remove(cell);\r\n    }\r\n}","import World from \"@/game/world/World\";\r\nimport ResetContextUpdater from \"@/game/world/updater/ResetContextUpdater\";\r\nimport UpdateContext from \"@/game/world/updater/UpdateContext\";\r\nimport KineticsUpdater from \"@/game/world/updater/KineticsUpdater\";\r\nimport Updater from \"@/game/world/updater/Updater\";\r\nimport PositionUpdater from \"@/game/world/updater/PositionUpdater\";\r\nimport FoodUpdater from \"@/game/world/updater/FoodUpdater\";\r\nimport NutritionUpdater from \"@/game/world/updater/NutritionUpdater\";\r\nimport CellUpdater from \"@/game/world/updater/CellUpdater\";\r\n\r\nexport default class WorldUpdater {\r\n    constructor(\r\n        private world: World\r\n    ) {\r\n        this.updateContext = new UpdateContext();\r\n        this.updatePipeline = [\r\n            new ResetContextUpdater(this.world, this.updateContext),\r\n            new KineticsUpdater(this.world, this.updateContext),\r\n            new FoodUpdater(this.world),\r\n            new NutritionUpdater(this.world),\r\n            new CellUpdater(this.world),\r\n            new PositionUpdater(this.world),\r\n            // update collision system\r\n        ]\r\n    }\r\n\r\n    static readonly SIMULATION_TICK_FIXED_DELTA = 16;\r\n    static readonly SIMULATION_SPEED_FACTOR = 5;\r\n\r\n    private readonly updateContext: UpdateContext\r\n    private readonly updatePipeline: Updater[]\r\n\r\n    simulationSpeed = 1;\r\n\r\n    private intervalId = -1;\r\n    private lastUpdateMillis = -1;\r\n\r\n    get simulationActive() {\r\n        return this.intervalId != -1;\r\n    }\r\n\r\n    startSimulation() {\r\n        if (!this.simulationActive) {\r\n            this.intervalId = setInterval(\r\n                this.intervalRoutine.bind(this),\r\n                WorldUpdater.SIMULATION_TICK_FIXED_DELTA\r\n            );\r\n            this.lastUpdateMillis = Date.now();\r\n        }\r\n    }\r\n\r\n    pauseSimulation() {\r\n        if (this.simulationActive)\r\n            clearInterval(this.intervalId);\r\n        this.intervalId = -1;\r\n    }\r\n\r\n    tick(delta: number) {\r\n        for (const updater of this.updatePipeline)\r\n            updater.update(delta);\r\n    }\r\n\r\n    private intervalRoutine() {\r\n        const deltaMillis = Date.now() - this.lastUpdateMillis;\r\n        const ticksRequiredOriginal = Math.round(deltaMillis / WorldUpdater.SIMULATION_TICK_FIXED_DELTA);\r\n        const ticksRequiredMultiplied = Math.min(\r\n            Math.round(deltaMillis * this.simulationSpeed / WorldUpdater.SIMULATION_TICK_FIXED_DELTA),\r\n            10\r\n        );\r\n        for (let i = 0; i < ticksRequiredMultiplied; i++)\r\n            this.tick(WorldUpdater.SIMULATION_TICK_FIXED_DELTA / 1000 * WorldUpdater.SIMULATION_SPEED_FACTOR);\r\n        this.lastUpdateMillis += WorldUpdater.SIMULATION_TICK_FIXED_DELTA * ticksRequiredOriginal;\r\n    }\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport {provide, ref, shallowReactive} from \"vue\";\r\n\r\nimport WorldViewer from \"@/component/WorldViewer.vue\";\r\nimport ControlsPanel from \"@/component/HudPanel.vue\";\r\nimport GenomeLibrary, {GenomeLibraryEntry} from \"@/game/GenomeLibrary\";\r\nimport World from \"@/game/world/World\";\r\nimport AppPreferences from \"@/AppPreferences\";\r\nimport ToolsManager from \"@/tool/ToolsManager\";\r\nimport AddCellTool from \"@/tool/AddCellTool\";\r\nimport RemoveCellTool from \"@/tool/RemoveCellTool\";\r\nimport Genome from \"@/game/Genome\";\r\nimport SelectionTool from \"@/tool/SelectionTool\";\r\nimport WorldUpdater from \"@/game/world/updater/WorldUpdater\";\r\nimport WorldMouseEvent from \"@/game/event/WorldMouseEvent\";\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\r\nconst tools = [ new SelectionTool(), new AddCellTool(), new RemoveCellTool() ];\r\nconst world = World.TEMPORARY_DEBUG;\r\n\r\nconst genomeLibrary = new GenomeLibrary();\r\nconst worldUpdater = new WorldUpdater(world);\r\nconst appPreferences = new AppPreferences();\r\nconst toolsManager = new ToolsManager(tools, world);\r\n\r\ngenomeLibrary.entries.add(new GenomeLibraryEntry(\"my genome\", Genome.newSampleGenome()));\r\ngenomeLibrary.entries.add(new GenomeLibraryEntry(\"test\", Genome.newSampleGenome()));\r\ngenomeLibrary.entries.add(new GenomeLibraryEntry(\"aaaaaaaaa\", Genome.newSampleGenome()));\r\ngenomeLibrary.entries.add(new GenomeLibraryEntry(\"aboba\", Genome.newSampleGenome()));\r\n\r\nprovide('world', world);\r\nprovide('worldUpdater', shallowReactive(worldUpdater));\r\nprovide('genomeLibrary', ref(genomeLibrary));\r\nprovide('appPreferences', ref(appPreferences));\r\nprovide('toolsManager', ref(toolsManager));\r\n\r\nfunction onWorldViewerEvent(event: any) {\r\n  if (event instanceof WorldMouseEvent)\r\n    toolsManager.dispatchEvent(event);\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(WorldViewer, { onWorldClick: onWorldViewerEvent }),\n    _createVNode(ControlsPanel, { class: \"controls-panel\" })\n  ], 64))\n}\n}\n\n})","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=6c7f2a94&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\n\r\nconst app = createApp(App)\r\n\r\napp.directive('click-outside', {\r\n    mounted: function (el, binding) {\r\n        el.clickOutsideEvent = function (event: MouseEvent) {\r\n            if (!(el == event.target || el.contains(event.target))) {\r\n                binding.value(event);\r\n            }\r\n        };\r\n        document.body.addEventListener('click', el.clickOutsideEvent)\r\n    },\r\n    beforeUnmount: function (el) {\r\n        document.body.removeEventListener('click', el.clickOutsideEvent)\r\n    },\r\n});\r\n\r\napp.mount('#app');","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.p = \"\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkcybercells\"] = self[\"webpackChunkcybercells\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(969); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["cmywFromGenome","genome","cyanPigment","magentaPigment","yellowPigment","whitePigment","cmywToRgba","color","cyan","magenta","yellow","white","r","g","b","map","v","a","mixRgba","darkenRgba","percent","coefficient","rgbaToCssString","Math","floor","sqrt","sin","cos","acos","PI","Vector2","constructor","x","y","this","length","plus","rvalue","minus","times","factor","div","negative","dot","that","to","nearest","vectors","reduce","distance","shortestAngularTurn","diff","angle","positiveAngleDiff","angleSafe","isNaN","rotate","radians","unit","static","vector","Food","center","mass","radius","FOOD_DENSITY","aabb","Cell","speed","angularSpeed","Map","applyImpulse","impulseOrigin","impulseDirection","originToCenterAngle","directionRelativeAngle","impulseOriginDistance","projectedDistance","translationImpactCoefficient","pow","rotationImpactCoefficient","atan","CellConnectionState","partnerId","Wall","CellType","Axis","Genome","type","hardness","splitMass","splitAngle","child1Angle","child2Angle","stickOnSplit","child1KeepConnections","child2KeepConnections","nutritionPriority","deepCopy","copyRecursive","applyRadiation","world","amount","result","getRandomCellPigments","cmyw","round","random","i","randomIndex","copies","set","flagellumForce","children","has","get","findAllGenomes","stash","Array","Set","pop","forEach","element","push","add","applyRadiationRecursive","Camera","height","Geometry","circleCenter","circleRadius","lineStart","lineEnd","x1","y1","x2","y2","xc","yc","vx","vy","sx","sy","c","d","t1","t2","circle1Center","circle1Radius","circle2Center","circle2Radius","r1","r2","dx","dy","h","x3","y3","xa","xb","ya","yb","lineA","lineB","lineAVector","lineBVector","angle1Ratio","angle2Ratio","isFinite","findVerticalLineIntersection","lineAOffset","lineBOffset","intersection","v1","v2","point","line","abs","Number","EPSILON","value","min","max","verticalLine","otherLine","otherAngleRatio","line2Offset","avgY","KdTree","Node","axis","objects","CollisionSystem","buildSystem","objectsSet","object","tree","root","X","width","buildNodes","size","remove","findPotentialCollisions","candidateNodes","node","childA","childB","middle","splitLine","minX","minY","maxX","maxY","depthRemaining","count","isAxisX","objectsA","objectsB","aabbA","aabbB","newAxis","Y","nodeA","nodeB","World","createNull","newId","idCounter","id","cells","food","walls","delete","connections","keys","getLightIntensityAtPoint","getRadiationIntensityAtPoint","updateCollisionSystem","cellCollisionSystem","values","foodCollisionSystem","wallCollisionSystem","rayCast","it","findLinesIntersection","findLineAndCircleIntersections","circleCast","findCirclesIntersections","pointCast","threshold","error","projected","projectPointOntoLine","clear","bind","viscosity","foodSpawnRate","camera","gravity","newSampleGenome","invertMatrix","matrix","e","f","det","Error","transformVector","Renderer","canvas","getDefault","Date","now","layers","background","context","getContext","render","clearScene","save","applyCameraTransform","config","renderBackground","renderFood","renderCells","renderWalls","restore","setWorld","project","worldPoint","buildCameraTransform","unproject","screenPoint","projection","inverted","clearRect","setTransform","ctx","fillStyle","beginPath","arc","fill","strokeStyle","lineCap","lineWidth","wall","moveTo","lineTo","stroke","cell","aabbMinX","aabbMinY","aabbMaxX","aabbMaxY","bodyRgba","borderRgba","nucleusRgba","cellBorderWidth","fillRadius","strokeRadius","obstacles","calculateCellObstacles","fillGuidelines","o","offset1","offset2","strokeGuidelines","current","next","startAngle","endAngle","renderCellConnections","connection","partner","partnerConnection","stringId","angleOffset","gradient","createLinearGradient","cellColor","partnerColor","connectionColor","addColorStop","cellControlPointForward","partnerControlPointForward","cellControlPointBackward","partnerControlPointBackward","bezierCurveTo","resetTransform","fillRect","obstaclesAngular","intersections","distanceA","distanceB","a1","a2","newObstacleIndex","opponent","opponentAngular","intersectionRelative","splice","thisObstacle","thisObstacleAngular","j","opponentObstacle","opponentObstacleAngular","opponentIsFarther","indexToRemove","splitPointA","splitPointB","newObstacle","newObstacleAngular","newOpponentStart","newThisObstacleEnd","canvasWidth","canvasHeight","scale","WorldMouseEvent","screenX","screenY","worldX","worldY","_hoisted_1","_defineComponent","__name","setup","__props","emit","SCROLL_SENSITIVITY","canvasRef","ref","containerRef","container","renderer","canvasSizeObserver","animationFrameRequest","inject","dragging","dragged","mouseDown","lastMouseWorldPoint","onWheel","event","deltaY","onTouchEvent","touches","mouseEventType","clientX","clientY","dps","window","devicePixelRatio","worldEvent","handleDraggingEvent","onMouseEvent","prevX","prevY","renderingRoutine","requestAnimationFrame","onCanvasResize","dpr","getBoundingClientRect","onMounted","ResizeObserver","observe","onBeforeUnmount","disconnect","cancelAnimationFrame","_ctx","_cache","_openBlock","_createElementBlock","class","ref_key","_createElementVNode","onClick","onMousedown","onMouseup","onMousemove","onMouseleave","onTouchstart","_withModifiers","onTouchmove","onTouchend","__exports__","_hoisted_2","_hoisted_3","activeTabName","minWidth","dragStartX","oldWidth","onHandleDragStart","initHandleDragging","addEventListener","onHandleDrag","stopHandleDragging","offset","removeEventListener","provide","draggable","style","_normalizeStyle","_renderSlot","$slots","props","active","Boolean","default","disabled","borderRadius","borderWidth","_useCssVars","_unref","defaultsSupportingBorderRadius","defaultsSupportingBorderWidth","computed","replaceAll","_normalizeClass","name","_createBlock","HudButton","_withCtx","_","_withDirectives","_vShow","key","title","_toDisplayString","_createCommentVNode","step","modelValue","emits","watch","$event","_vModelText","textInput","_createVNode","Slider","modelModifiers","number","onFocus","select","onKeydown","_withKeys","blur","script","PropertiesSection","InputLabel","_createTextVNode","SliderWithNumberInput","density","lightIntensity","dummyWorld","updateRendererDummyWorld","dummyCell","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","library","nameInput","dropdownOpened","libraryEntriesFiltered","entries","search","onInputFocus","input","target","item","cancelSelection","resetNameInput","_directive_click_outside","_resolveDirective","CellGenomePreview","placeholder","_Fragment","_renderList","String","canvasCtx","startObservingCanvasSizeChange","stopObservingCanvasSizeChange","drawDroplet","w","clippedValue","viewBox","selectedGenomeEntry","newNullGenome","finalColorCanvasRef","finalColorCanvasResizeObserver","finalColorCanvasContext","onFinalColorIndicatorResize","drawFinalColorIndicator","rgba","deep","GenomePigmentColorDropletIcon","checked","_vModelCheckbox","genomeLibrary","child1GenomeEntry","child2GenomeEntry","lookupByGenome","CellSplitPreview","Checkbox","GenomeSelector","PropertiesSubheader","GenomePigmentsEditor","GenomeChildrenEditor","_isRef","GenomeEditor","src","_imports_0","alt","_imports_1","updater","onPausePlayButtonClick","simulationActive","pauseSimulation","startSimulation","onSpeedButtonClick","simulationSpeed","AddCellTool","require","init","toolsManager","addWorldEventListener","onSelect","onUnselect","getSelectedTool","tool","PropertiesTabbedPanel","tabs","PropertiesTab","icon","bodies","PropertiesTabBody","GenomeLibraryEditor","WorldSettings","AddCellProperties","tools","enabled","selectTool","TimeControl","GenomeLibrary","query","entry","toLowerCase","includes","GenomeLibraryEntry","AppPreferences","ToolsManager","currentTool","eventType","handler","listener","eventListeners","toolListeners","dispatchEvent","RemoveCellTool","hits","filter","hit","thisCellDistance","SelectionTool","ResetContextUpdater","update","UpdateContext","KineticsUpdater","delta","reset","processGravity","wo","processCellWallCollision","processCellsCollision","processCellConnection","apply","cellsSpeedBuffer","cellsAngularSpeedBuffer","oppositeForce","depth","clamp","hardnessCoefficient","oldSpeed","newSpeed","otherCell","toOtherCellCenter","centersDistance","radiusSum","toOtherCellDirection","toNearestOtherCellSurfacePoint","toOtherCellSurfacePoint","rawForce","hardnessAvg","thisCellForce","effectiveConnectionAngle","effectiveConnectionForceOrigin","CELL_STICKINESS_DEPTH","effectiveConnectionForceDestination","connectionForceDirection","oldAngularSpeed","newAngularSpeed","PositionUpdater","FoodUpdater","updateFoodSpawning","updateFoodLifecycle","worldSizeAwareRate","debt","newFoodNumber","spawnFoodAtRandomPlace","foodMassLoss","minFoodMass","NutritionUpdater","newMassByCell","updateNutritionExchanges","updateCellNutrition","killStarvingCells","cellMaxFoodGain","maxNutritionGainSpeed","liveCost","calculateLiveCost","maxConsumableMass","maxCellMass","massToEat","nutritionRatio","targetNutritionRatio","maxPartnerConsumableMass","nutritionTransitionFactor","POSITIVE_INFINITY","nutritionTransitionAmount","minCellMass","CellUpdater","age","doTypeSpecificThings","split","targetSpeed","speedDiff","force","flagellocyteFlagellumForceCost","splitNormal","child1Center","child2Center","child1Genome","child2Genome","radiation","child1ConnectionAngle","child2ConnectionAngle","child1","child2","processExistingConnections","child","thisIsFirstChild","partnerSideConnection","connectionAngleRelative","narrowRange","broadRange","bothKeepConnections","childGenomeAngle","childShift","WorldUpdater","updateContext","updatePipeline","intervalId","setInterval","intervalRoutine","SIMULATION_TICK_FIXED_DELTA","lastUpdateMillis","clearInterval","tick","deltaMillis","ticksRequiredOriginal","ticksRequiredMultiplied","SIMULATION_SPEED_FACTOR","TEMPORARY_DEBUG","worldUpdater","appPreferences","onWorldViewerEvent","shallowReactive","WorldViewer","onWorldClick","ControlsPanel","app","createApp","App","directive","mounted","el","binding","clickOutsideEvent","contains","document","body","beforeUnmount","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","Object","every","n","getter","__esModule","definition","defineProperty","enumerable","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}